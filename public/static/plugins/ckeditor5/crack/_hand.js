(function () { var vp = vp || {}, vq = function () { return js.Boot.__string_rec(this, ''); }; function vr(vs, fields) { function vt() { }; vt.prototype = vs; var vu = new vt(); for (var name in fields) vu[name] = fields[name]; return vu; }; var EReg = vp["EReg"] = function (r, opt) { opt = opt.split("u").join(""); this.r = new RegExp(r, opt); }; EReg.__name__ = ["EReg"]; EReg.prototype = { customReplace: function (s, f) { var buf = new StringBuf(); while (true) { if (!this.match(s)) break; buf.b += Std.string(this.matchedLeft()); buf.b += Std.string(f(this)); s = this.matchedRight(); }; buf.b += Std.string(s); return buf.b; }, replace: function (s, vv) { return s.replace(this.r, vv); }, split: function (s) { var d = "#__delim__#"; return s.replace(this.r, d).split(d); }, matchedPos: function () { if (this.r.m == null) throw "No string matched"; return { pos: this.r.m.index, len: this.r.m[0].length }; }, matchedRight: function () { if (this.r.m == null) throw "No string matched"; var vw_ = this.r.m.index + this.r.m[0].length; return this.r.s.substr(vw_, this.r.s.length - vw_); }, matchedLeft: function () { if (this.r.m == null) throw "No string matched"; return this.r.s.substr(0, this.r.m.index); }, matched: function (n) { return this.r.m != null && n >= 0 && n < this.r.m.length ? this.r.m[n] : (function (vx) { var vy_; throw "EReg::matched"; return vy_; }(this)); }, match: function (s) { if (this.r.vz) this.r.v01 = 0; this.r.m = this.r.exec(s); this.r.s = s; return this.r.m != null; }, r: null, __class__: EReg }; var HaxeHash = vp["HaxeHash"] = function () { this.h = {}; }; HaxeHash.__name__ = ["HaxeHash"]; HaxeHash.prototype = { toString: function () { var s = new StringBuf(); s.b += Std.string("{"); var v11 = this.keys(); while (v11.hasNext()) { var i = v11.next(); s.b += Std.string(i); s.b += Std.string(" => "); s.b += Std.string(Std.string(this.get(i))); if (v11.hasNext()) s.b += Std.string(", "); }; s.b += Std.string("}"); return s.b; }, iterator: function () { return { ref: this.h, v11: this.keys(), hasNext: function () { return this.v11.hasNext(); }, next: function () { var i = this.v11.next(); return this.ref["$" + i]; } }; }, keys: function () { var a = []; for (var key in this.h) { if (this.h.hasOwnProperty(key)) a.push(key.substr(1)); }; return HxOverrides.iter(a); }, remove: function (key) { key = "$" + key; if (!this.h.hasOwnProperty(key)) return false; delete (this.h[key]); return true; }, exists: function (key) { return this.h.hasOwnProperty("$" + key); }, get: function (key) { return this.h["$" + key]; }, set: function (key, value) { this.h["$" + key] = value; }, h: null, __class__: HaxeHash }; var HxOverrides = vp["HxOverrides"] = function () { }; HxOverrides.__name__ = ["HxOverrides"]; HxOverrides.v21 = function (date) { var m = date.getMonth() + 1; var d = date.getDate(); var h = date.getHours(); var v31 = date.getMinutes(); var s = date.getSeconds(); return date.getFullYear() + "-" + (m < 10 ? "0" + m : "" + m) + "-" + (d < 10 ? "0" + d : "" + d) + " " + (h < 10 ? "0" + h : "" + h) + ":" + (v31 < 10 ? "0" + v31 : "" + v31) + ":" + (s < 10 ? "0" + s : "" + s); }; HxOverrides.v41 = function (s) { switch (s.length) { case 8: var k = s.split(":"); var d = new Date(); d.v51(0); d.v61(k[0]); d.v71(k[1]); d.v81(k[2]); return d; case 10: var k = s.split("-"); return new Date(k[0], k[1] - 1, k[2], 0, 0, 0); case 19: var k = s.split(" "); var y = k[0].split("-"); var t = k[1].split(":"); return new Date(y[0], y[1] - 1, y[2], t[0], t[1], t[2]); default: throw "Invalid date format : " + s; } }; HxOverrides.cca = function (s, index) { var x = s.charCodeAt(index); if (x != x) return undefined; return x; }; HxOverrides.substr = function (s, pos, len) { if (pos != null && pos != 0 && len != null && len < 0) return ""; if (len == null) len = s.length; if (pos < 0) { pos = s.length + pos; if (pos < 0) pos = 0; } else if (len < 0) len = s.length + len - pos; return s.substr(pos, len); }; HxOverrides.remove = function (a, obj) { var i = 0; var l = a.length; while (i < l) { if (a[i] == obj) { a.splice(i, 1); return true; }; i++; }; return false; }; HxOverrides.iter = function (a) { return { cur: 0, arr: a, hasNext: function () { return this.cur < this.arr.length; }, next: function () { return this.arr[this.cur++]; } }; }; var IntHash = vp["IntHash"] = function () { this.h = {}; }; IntHash.__name__ = ["IntHash"]; IntHash.prototype = { toString: function () { var s = new StringBuf(); s.b += Std.string("{"); var v11 = this.keys(); while (v11.hasNext()) { var i = v11.next(); s.b += Std.string(i); s.b += Std.string(" => "); s.b += Std.string(Std.string(this.get(i))); if (v11.hasNext()) s.b += Std.string(", "); }; s.b += Std.string("}"); return s.b; }, iterator: function () { return { ref: this.h, v11: this.keys(), hasNext: function () { return this.v11.hasNext(); }, next: function () { var i = this.v11.next(); return this.ref[i]; } }; }, keys: function () { var a = []; for (var key in this.h) { if (this.h.hasOwnProperty(key)) a.push(key | 0); }; return HxOverrides.iter(a); }, remove: function (key) { if (!this.h.hasOwnProperty(key)) return false; delete (this.h[key]); return true; }, exists: function (key) { return this.h.hasOwnProperty(key); }, get: function (key) { return this.h[key]; }, set: function (key, value) { this.h[key] = value; }, h: null, __class__: IntHash }; var IntIter = vp["IntIter"] = function (min, max) { this.min = min; this.max = max; }; IntIter.__name__ = ["IntIter"]; IntIter.prototype = { next: function () { return this.min++; }, hasNext: function () { return this.min < this.max; }, max: null, min: null, __class__: IntIter }; var List = vp["List"] = function () { this.length = 0; }; List.__name__ = ["List"]; List.prototype = { map: function (f) { var b = new List(); var l = this.h; while (l != null) { var v = l[0]; l = l[1]; b.add(f(v)); }; return b; }, filter: function (f) { var v91 = new List(); var l = this.h; while (l != null) { var v = l[0]; l = l[1]; if (f(v)) v91.add(v); }; return v91; }, join: function (vA1) { var s = new StringBuf(); var first = true; var l = this.h; while (l != null) { if (first) first = false; else s.b += Std.string(vA1); s.b += Std.string(l[0]); l = l[1]; }; return s.b; }, toString: function () { var s = new StringBuf(); var first = true; var l = this.h; s.b += Std.string("{"); while (l != null) { if (first) first = false; else s.b += Std.string(", "); s.b += Std.string(Std.string(l[0])); l = l[1]; }; s.b += Std.string("}"); return s.b; }, iterator: function () { return { h: this.h, hasNext: function () { return this.h != null; }, next: function () { if (this.h == null) return null; var x = this.h[0]; this.h = this.h[1]; return x; } }; }, remove: function (v) { var vB1 = null; var l = this.h; while (l != null) { if (l[0] == v) { if (vB1 == null) this.h = l[1]; else vB1[1] = l[1]; if (this.q == l) this.q = vB1; this.length--; return true; }; vB1 = l; l = l[1]; }; return false; }, clear: function () { this.h = null; this.q = null; this.length = 0; }, isEmpty: function () { return this.h == null; }, pop: function () { if (this.h == null) return null; var x = this.h[0]; this.h = this.h[1]; if (this.h == null) this.q = null; this.length--; return x; }, last: function () { return this.q == null ? null : this.q[0]; }, first: function () { return this.h == null ? null : this.h[0]; }, push: function (vC1) { var x = [vC1, this.h]; this.h = x; if (this.q == null) this.q = x; this.length++; }, add: function (vC1) { var x = [vC1]; if (this.h == null) this.h = x; else this.q[1] = x; this.q = x; this.length++; }, length: null, q: null, h: null, __class__: List }; var Reflect = vp["Reflect"] = function () { }; Reflect.__name__ = ["Reflect"]; Reflect.hasField = function (o, field) { return Object.prototype.hasOwnProperty.call(o, field); }; Reflect.field = function (o, field) { var v = null; try { v = o[field]; } catch (e) { }; return v; }; Reflect.setField = function (o, field, value) { o[field] = value; }; Reflect.vD1 = function (o, field) { var vE1; return o == null ? null : o.__properties__ && (vE1 = o.__properties__["get_" + field]) ? o[vE1]() : o[field]; }; Reflect.setProperty = function (o, field, value) { var vE1; if (o.__properties__ && (vE1 = o.__properties__["set_" + field])) o[vE1](value); else o[field] = value; }; Reflect.callMethod = function (o, vF1, args) { return vF1.apply(o, args); }; Reflect.fields = function (o) { var a = []; if (o != null) { var hasOwnProperty = Object.prototype.hasOwnProperty; for (var f in o) { if (hasOwnProperty.call(o, f)) a.push(f); } }; return a; }; Reflect.isFunction = function (f) { return typeof (f) == "function" && !(f.__name__ || f.vG1); }; Reflect.compare = function (a, b) { return a == b ? 0 : a > b ? 1 : -1; }; Reflect.compareMethods = function (vH1, vI1) { if (vH1 == vI1) return true; if (!Reflect.isFunction(vH1) || !Reflect.isFunction(vI1)) return false; return vH1.scope == vI1.scope && vH1.method == vI1.method && vH1.method != null; }; Reflect.isObject = function (v) { if (v == null) return false; var t = typeof (v); return t == "string" || t == "object" && !v.vJ1 || t == "function" && (v.__name__ || v.vG1); }; Reflect.deleteField = function (o, f) { if (!Reflect.hasField(o, f)) return false; delete (o[f]); return true; }; Reflect.copy = function (o) { var vK1 = {}; var vL1 = 0, vM1 = Reflect.fields(o); while (vL1 < vM1.length) { var f = vM1[vL1]; ++vL1; vK1[f] = Reflect.field(o, f); }; return vK1; }; Reflect.makeVarArgs = function (f) { return function () { var a = Array.prototype.slice.call(arguments); return f(a); }; }; var Std = vp["Std"] = function () { }; Std.__name__ = ["Std"]; Std["is"] = function (v, t) { return js.Boot.__instanceof(v, t); }; Std.string = function (s) { return js.Boot.__string_rec(s, ""); }; Std["int"] = function (x) { return x | 0; }; Std.parseInt = function (x) { var v = parseInt(x, 10); if (v == 0 && (HxOverrides.cca(x, 1) == 120 || HxOverrides.cca(x, 1) == 88)) v = parseInt(x); if (isNaN(v)) return null; return v; }; Std.parseFloat = function (x) { return parseFloat(x); }; Std.random = function (x) { return Math.floor(Math.random() * x); }; var StringBuf = vp["StringBuf"] = function () { this.b = ""; }; StringBuf.__name__ = ["StringBuf"]; StringBuf.prototype = { toString: function () { return this.b; }, addSub: function (s, pos, len) { this.b += HxOverrides.substr(s, pos, len); }, addChar: function (c) { this.b += String.fromCharCode(c); }, add: function (x) { this.b += Std.string(x); }, b: null, __class__: StringBuf }; var StringTools = vp["StringTools"] = function () { }; StringTools.__name__ = ["StringTools"]; StringTools.urlEncode = function (s) { return encodeURIComponent(s); }; StringTools.urlDecode = function (s) { return decodeURIComponent(s.split("+").join(" ")); }; StringTools.htmlEscape = function (s) { return s.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"); }; StringTools.htmlUnescape = function (s) { return s.split("&gt;").join(">").split("&lt;").join("<").split("&amp;").join("&"); }; StringTools.startsWith = function (s, start) { return s.length >= start.length && HxOverrides.substr(s, 0, start.length) == start; }; StringTools.endsWith = function (s, end) { var vN1 = end.length; var vO1 = s.length; return vO1 >= vN1 && HxOverrides.substr(s, vO1 - vN1, vN1) == end; }; StringTools.isSpace = function (s, pos) { var c = HxOverrides.cca(s, pos); return c >= 9 && c <= 13 || c == 32; }; StringTools.ltrim = function (s) { var l = s.length; var r = 0; while (r < l && StringTools.isSpace(s, r)) r++; if (r > 0) return HxOverrides.substr(s, r, l - r); else return s; }; StringTools.rtrim = function (s) { var l = s.length; var r = 0; while (r < l && StringTools.isSpace(s, l - r - 1)) r++; if (r > 0) return HxOverrides.substr(s, 0, l - r); else return s; }; StringTools.trim = function (s) { return StringTools.ltrim(StringTools.rtrim(s)); }; StringTools.rpad = function (s, c, l) { var vP1 = s.length; var vQ1 = c.length; while (vP1 < l) if (l - vP1 < vQ1) { s += HxOverrides.substr(c, 0, l - vP1); vP1 = l; } else { s += c; vP1 += vQ1; }; return s; }; StringTools.lpad = function (s, c, l) { var vR1 = ""; var vP1 = s.length; if (vP1 >= l) return s; var vQ1 = c.length; while (vP1 < l) if (l - vP1 < vQ1) { vR1 += HxOverrides.substr(c, 0, l - vP1); vP1 = l; } else { vR1 += c; vP1 += vQ1; }; return vR1 + s; }; StringTools.replace = function (s, sub, vv) { return s.split(sub).join(vv); }; StringTools.hex = function (n, vS1) { var s = ""; var vT1 = "0123456789ABCDEF"; do { s = vT1.charAt(n & 15) + s; n >>>= 4; } while (n > 0); if (vS1 != null) while (s.length < vS1) s = "0" + s; return s; }; StringTools.vU1 = function (s, index) { return s.charCodeAt(index); }; StringTools.vV1 = function (c) { return c != c; }; var ValueType = vp["ValueType"] = { vG1: ["ValueType"], vW1: ["TNull", "TInt", "TFloat", "TBool", "TObject", "TFunction", "TClass", "TEnum", "TUnknown"] }; ValueType.TNull = ["TNull", 0]; ValueType.TNull.toString = vq; ValueType.TNull.vJ1 = ValueType; ValueType.TInt = ["TInt", 1]; ValueType.TInt.toString = vq; ValueType.TInt.vJ1 = ValueType; ValueType.TFloat = ["TFloat", 2]; ValueType.TFloat.toString = vq; ValueType.TFloat.vJ1 = ValueType; ValueType.TBool = ["TBool", 3]; ValueType.TBool.toString = vq; ValueType.TBool.vJ1 = ValueType; ValueType.TObject = ["TObject", 4]; ValueType.TObject.toString = vq; ValueType.TObject.vJ1 = ValueType; ValueType.TFunction = ["TFunction", 5]; ValueType.TFunction.toString = vq; ValueType.TFunction.vJ1 = ValueType; ValueType.TClass = function (c) { var vX1 = ["TClass", 6, c]; vX1.vJ1 = ValueType; vX1.toString = vq; return vX1; }; ValueType.TEnum = function (e) { var vX1 = ["TEnum", 7, e]; vX1.vJ1 = ValueType; vX1.toString = vq; return vX1; }; ValueType.TUnknown = ["TUnknown", 8]; ValueType.TUnknown.toString = vq; ValueType.TUnknown.vJ1 = ValueType; var Type = vp["Type"] = function () { }; Type.__name__ = ["Type"]; Type.getClass = function (o) { if (o == null) return null; return o.__class__; }; Type.getEnum = function (o) { if (o == null) return null; return o.vJ1; }; Type.getSuperClass = function (c) { return c.__super__; }; Type.getClassName = function (c) { var a = c.__name__; return a.join("."); }; Type.getEnumName = function (e) { var a = e.vG1; return a.join("."); }; Type.resolveClass = function (name) { var vQ1 = vp[name]; if (vQ1 == null || !vQ1.__name__) return null; return vQ1; }; Type.resolveEnum = function (name) { var e = vp[name]; if (e == null || !e.vG1) return null; return e; }; Type.createInstance = function (vQ1, args) { switch (args.length) { case 0: return new vQ1(); case 1: return new vQ1(args[0]); case 2: return new vQ1(args[0], args[1]); case 3: return new vQ1(args[0], args[1], args[2]); case 4: return new vQ1(args[0], args[1], args[2], args[3]); case 5: return new vQ1(args[0], args[1], args[2], args[3], args[4]); case 6: return new vQ1(args[0], args[1], args[2], args[3], args[4], args[5]); case 7: return new vQ1(args[0], args[1], args[2], args[3], args[4], args[5], args[6]); case 8: return new vQ1(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7]); default: throw "Too many arguments"; }; return null; }; Type.createEmptyInstance = function (vQ1) { function empty() { }; empty.prototype = vQ1.prototype; return new empty(); }; Type.createEnum = function (e, vY1, params) { var f = Reflect.field(e, vY1); if (f == null) throw "No such constructor " + vY1; if (Reflect.isFunction(f)) { if (params == null) throw "Constructor " + vY1 + " need parameters"; return f.apply(e, params); }; if (params != null && params.length != 0) throw "Constructor " + vY1 + " does not need parameters"; return f; }; Type.createEnumIndex = function (e, index, params) { var c = e.vW1[index]; if (c == null) throw index + " is not a valid enum constructor index"; return Type.createEnum(e, c, params); }; Type.getInstanceFields = function (c) { var a = []; for (var i in c.prototype) a.push(i); HxOverrides.remove(a, "__class__"); HxOverrides.remove(a, "__properties__"); return a; }; Type.getClassFields = function (c) { var a = Reflect.fields(c); HxOverrides.remove(a, "__name__"); HxOverrides.remove(a, "__interfaces__"); HxOverrides.remove(a, "__properties__"); HxOverrides.remove(a, "__super__"); HxOverrides.remove(a, "prototype"); return a; }; Type.getEnumConstructs = function (e) { var a = e.vW1; return a.slice(); }; Type["typeof"] = function (v) { switch (typeof (v)) { case "boolean": return ValueType.TBool; case "string": return ValueType.TClass(String); case "number": if (Math.ceil(v) == v % 2147483648.0) return ValueType.TInt; return ValueType.TFloat; case "object": if (v == null) return ValueType.TNull; var e = v.vJ1; if (e != null) return ValueType.TEnum(e); var c = v.__class__; if (c != null) return ValueType.TClass(c); return ValueType.TObject; case "function": if (v.__name__ || v.vG1) return ValueType.TObject; return ValueType.TFunction; case "undefined": return ValueType.TNull; default: return ValueType.TUnknown; } }; Type.enumEq = function (a, b) { if (a == b) return true; try { if (a[0] != b[0]) return false; var vM1 = 2, vL1 = a.length; while (vM1 < vL1) { var i = vM1++; if (!Type.enumEq(a[i], b[i])) return false; }; var e = a.vJ1; if (e != b.vJ1 || e == null) return false; } catch (e) { return false; }; return true; }; Type.enumConstructor = function (e) { return e[0]; }; Type.enumParameters = function (e) { return e.slice(2); }; Type.enumIndex = function (e) { return e[1]; }; Type.vZ1 = function (e) { var all = []; var va1 = e.vW1; var vL1 = 0; while (vL1 < va1.length) { var c = va1[vL1]; ++vL1; var v = Reflect.field(e, c); if (!Reflect.isFunction(v)) all.push(v); }; return all; }; var Xml = vp["Xml"] = function () { }; Xml.__name__ = ["Xml"]; Xml.Element = null; Xml.PCData = null; Xml.CData = null; Xml.Comment = null; Xml.DocType = null; Xml.Prolog = null; Xml.Document = null; Xml.parse = function (str) { return haxe.xml.Parser.parse(str); }; Xml.createElement = function (name) { var r = new Xml(); r.nodeType = Xml.Element; r._children = new Array(); r._attributes = new HaxeHash(); r.setNodeName(name); return r; }; Xml.createPCData = function (data) { var r = new Xml(); r.nodeType = Xml.PCData; r.setNodeValue(data); return r; }; Xml.createCData = function (data) { var r = new Xml(); r.nodeType = Xml.CData; r.setNodeValue(data); return r; }; Xml.createComment = function (data) { var r = new Xml(); r.nodeType = Xml.Comment; r.setNodeValue(data); return r; }; Xml.createDocType = function (data) { var r = new Xml(); r.nodeType = Xml.DocType; r.setNodeValue(data); return r; }; Xml.createProlog = function (data) { var r = new Xml(); r.nodeType = Xml.Prolog; r.setNodeValue(data); return r; }; Xml.createDocument = function () { var r = new Xml(); r.nodeType = Xml.Document; r._children = new Array(); return r; }; Xml.prototype = { toString: function () { if (this.nodeType == Xml.PCData) return this._nodeValue; if (this.nodeType == Xml.CData) return "<![CDATA[" + this._nodeValue + "]]>"; if (this.nodeType == Xml.Comment) return "<!--" + this._nodeValue + "-->"; if (this.nodeType == Xml.DocType) return "<!DOCTYPE " + this._nodeValue + ">"; if (this.nodeType == Xml.Prolog) return "<?" + this._nodeValue + "?>"; var s = new StringBuf(); if (this.nodeType == Xml.Element) { s.b += Std.string("<"); s.b += Std.string(this._nodeName); var vb1 = this._attributes.keys(); while (vb1.hasNext()) { var k = vb1.next(); s.b += Std.string(" "); s.b += Std.string(k); s.b += Std.string("=\""); s.b += Std.string(this._attributes.get(k)); s.b += Std.string("\""); }; if (this._children.length == 0) { s.b += Std.string("/>"); return s.b; }; s.b += Std.string(">"); }; var vc1 = this.iterator(); while (vc1.hasNext()) { var x = vc1.next(); s.b += Std.string(x.toString()); }; if (this.nodeType == Xml.Element) { s.b += Std.string("</"); s.b += Std.string(this._nodeName); s.b += Std.string(">"); }; return s.b; }, insertChild: function (x, pos) { if (this._children == null) throw "bad nodetype"; if (x._parent != null) HxOverrides.remove(x._parent._children, x); x._parent = this; this._children.splice(pos, 0, x); }, removeChild: function (x) { if (this._children == null) throw "bad nodetype"; var b = HxOverrides.remove(this._children, x); if (b) x._parent = null; return b; }, addChild: function (x) { if (this._children == null) throw "bad nodetype"; if (x._parent != null) HxOverrides.remove(x._parent._children, x); x._parent = this; this._children.push(x); }, firstElement: function () { if (this._children == null) throw "bad nodetype"; var cur = 0; var l = this._children.length; while (cur < l) { var n = this._children[cur]; if (n.nodeType == Xml.Element) return n; cur++; }; return null; }, firstChild: function () { if (this._children == null) throw "bad nodetype"; return this._children[0]; }, elementsNamed: function (name) { if (this._children == null) throw "bad nodetype"; return { cur: 0, x: this._children, hasNext: function () { var k = this.cur; var l = this.x.length; while (k < l) { var n = this.x[k]; if (n.nodeType == Xml.Element && n._nodeName == name) break; k++; }; this.cur = k; return k < l; }, next: function () { var k = this.cur; var l = this.x.length; while (k < l) { var n = this.x[k]; k++; if (n.nodeType == Xml.Element && n._nodeName == name) { this.cur = k; return n; } }; return null; } }; }, elements: function () { if (this._children == null) throw "bad nodetype"; return { cur: 0, x: this._children, hasNext: function () { var k = this.cur; var l = this.x.length; while (k < l) { if (this.x[k].nodeType == Xml.Element) break; k += 1; }; this.cur = k; return k < l; }, next: function () { var k = this.cur; var l = this.x.length; while (k < l) { var n = this.x[k]; k += 1; if (n.nodeType == Xml.Element) { this.cur = k; return n; } }; return null; } }; }, iterator: function () { if (this._children == null) throw "bad nodetype"; return { cur: 0, x: this._children, hasNext: function () { return this.cur < this.x.length; }, next: function () { return this.x[this.cur++]; } }; }, attributes: function () { if (this.nodeType != Xml.Element) throw "bad nodeType"; return this._attributes.keys(); }, exists: function (att) { if (this.nodeType != Xml.Element) throw "bad nodeType"; return this._attributes.exists(att); }, remove: function (att) { if (this.nodeType != Xml.Element) throw "bad nodeType"; this._attributes.remove(att); }, set: function (att, value) { if (this.nodeType != Xml.Element) throw "bad nodeType"; this._attributes.set(att, value); }, get: function (att) { if (this.nodeType != Xml.Element) throw "bad nodeType"; return this._attributes.get(att); }, getParent: function () { return this._parent; }, setNodeValue: function (v) { if (this.nodeType == Xml.Element || this.nodeType == Xml.Document) throw "bad nodeType"; return this._nodeValue = v; }, getNodeValue: function () { if (this.nodeType == Xml.Element || this.nodeType == Xml.Document) throw "bad nodeType"; return this._nodeValue; }, setNodeName: function (n) { if (this.nodeType != Xml.Element) throw "bad nodeType"; return this._nodeName = n; }, getNodeName: function () { if (this.nodeType != Xml.Element) throw "bad nodeType"; return this._nodeName; }, _parent: null, _children: null, _attributes: null, _nodeValue: null, _nodeName: null, parent: null, nodeValue: null, nodeName: null, nodeType: null, __class__: Xml, __properties__: { vd1: "setNodeName", ve1: "getNodeName", vf1: "setNodeValue", vg1: "getNodeValue", vh1: "getParent" } }; var com = com || {}; if (!com.wiris) com.wiris = {}; if (!com.wiris.common) com.wiris.common = {}; com.wiris.common.WInteger = vp["com.wiris.common.WInteger"] = function () { }; com.wiris.common.WInteger.__name__ = ["com", "wiris", "common", "WInteger"]; com.wiris.common.WInteger.max = function (x, y) { if (x > y) return x; return y; }; com.wiris.common.WInteger.min = function (x, y) { if (x < y) return x; return y; }; com.wiris.common.WInteger.vi1 = function (x, vS1) { var s = ""; while (x != 0 && vS1 > 0) { vS1--; var d = x & 15; s = com.wiris.e1_8.vj1(d + (d >= 10 ? 55 : 48)) + s; x = x >> 4; }; while (vS1-- > 0) s = "0" + s; return s; }; com.wiris.common.WInteger.vk1 = function (str) { return Std.parseInt("0x" + str); }; com.wiris.common.WInteger.vl1 = function (str) { str = StringTools.trim(str); var i = 0; var n = str.length; if (StringTools.startsWith(str, "-")) i++; if (StringTools.startsWith(str, "+")) i++; var c; while (i < n) { c = HxOverrides.cca(str, i); if (c < 48 || c > 57) return false; i++; }; return true; }; if (!com.wiris.js) com.wiris.js = {}; com.wiris.js.HandInterface = vp["com.wiris.js.HandInterface"] = function () { }; com.wiris.js.HandInterface.__name__ = ["com", "wiris", "js", "HandInterface"]; com.wiris.js.HandInterface.prototype = { setParams: null, setStrokes: null, getStrokes: null, setMathML: null, getScore: null, getMathMLWithStrokes: null, getMathML: null, addHandListener: null, insertInto: null, __class__: com.wiris.js.HandInterface }; com.wiris.js.HandListener = vp["com.wiris.js.HandListener"] = function () { }; com.wiris.js.HandListener.__name__ = ["com", "wiris", "js", "HandListener"]; com.wiris.js.HandListener.prototype = { strokesChanged: null, recognitionError: null, contentChanged: null, __class__: com.wiris.js.HandListener }; if (!com.wiris.system) com.wiris.system = {}; com.wiris.e1_1 = vp["com.wiris.e1_1"] = function () { }; com.wiris.e1_1.__name__ = ["com", "wiris", "e1_1"]; com.wiris.e1_1.prototype = { urlAnswerReceived: null, serviceAnswerReceived: null, __class__: com.wiris.e1_1 }; com.wiris.js.JsHand = vp["com.wiris.js.JsHand"] = function (params) { com.wiris.system.ServiceProvider.vm1(com.wiris.system.ServiceProvider.vn1); com.wiris.system.ServiceProvider.vo1("mathtype-web-hand-java"); var vp1 = this.findPaths(); if (vp1 == null) js.Lib.alert("Missing MathType SDK Hand service! (cannot find hand.js)."); else { this.resourceLoader = com.wiris.system.ResourceLoader.newInstance(vp1[0] + "/resources"); com.wiris.system.ServiceProvider.vq1(vp1[1]); }; this.element = null; this.readOnly = false; this.toolbarHidden = false; this.lineColor = com.wiris.js.JsHand.DEFAULT_LINE_COLOR; this.lineWidth = com.wiris.js.JsHand.DEFAULT_LINE_WIDTH; this.previewZoom = com.wiris.js.JsHand.DEFAULT_PREVIEW_ZOOM; this.recognitionDelay = com.wiris.js.JsHand.DEFAULT_RECOGNITION_DELAY; this.symbolList = ""; this.structureList = ""; this.grammar = ""; this.dir = "ltr"; this.alphabet = "western"; this.recognitionType = "math"; this.handListeners = new Array(); this.testSuccessCallbacks = new Array(); this.testErrorCallbacks = new Array(); this.tickContainer = null; this.strokes = this.newStrokeBuffer(); this.resetUndoBuffer(); this.recognitionTimer = null; this.recognitionResult = null; this.recognitionScore = 0.0; this.errorMessage = null; this.strokesResult = this.getStrokes(); this.strokesSent = this.strokesResult; this.requestId = null; this.status = null; this.sessionId = this.generateId(10); this.painting = false; this.playing = false; this.deletionGestureEnabled = true; this.strokesZoom = 1; this.strokesDX = 0; this.strokesDY = 0; this.editionMode = false; this.helpStoredStrokes = null; this.setParams(params); this.instanceIndex = com.wiris.js.JsHand.instances.length; com.wiris.js.JsHand.instances.push([null, this]); }; com.wiris.js.JsHand.__name__ = ["com", "wiris", "js", "JsHand"]; com.wiris.js.JsHand.__interfaces__ = [com.wiris.e1_1, com.wiris.js.HandInterface]; com.wiris.js.JsHand.newInstance = function (params) { return new com.wiris.js.JsHand(params); }; com.wiris.js.JsHand.getInstance = function (parent) { var i = HxOverrides.iter(com.wiris.js.JsHand.instances); while (i.hasNext()) { var vr1 = i.next(); if (vr1[0] == parent) return vr1[1]; }; return null; }; com.wiris.js.JsHand.bypassEncapsulation = function () { if (window.com == null) window.com = {}; if (window.com.wiris == null) window.com.wiris = {}; if (window.com.wiris.js == null) window.com.wiris.js = {}; window.com.wiris.js.JsHand = com.wiris.js.JsHand; }; com.wiris.js.JsHand.prototype = { stringToInternalState: function (input) { var vs1 = new HaxeHash(); if (StringTools.startsWith(input, "[")) { vs1.set("strokes", haxe.Json.parse(input)); vs1.set("params", { dir: "ltr", alphabet: "western" }); return vs1; }; var vt1 = com.wiris.e1_C.decode(input); var strokes = this.newStrokeBuffer(); var i = 0; var x = vt1.get("x"); while (i < x.length) { strokes.push(new Array()); var j = 0; while (j < x[i].length) { strokes[i].push(new Array()); var component = 0; while (component < com.wiris.js.JsHand.STROKE_VARS.length) { var value = vt1.exists(com.wiris.js.JsHand.STROKE_VARS[component]) ? vt1.get(com.wiris.js.JsHand.STROKE_VARS[component])[i][j] : 0.0; strokes[i][j].push(value); ++component; }; ++j; }; ++i; }; vs1.set("strokes", strokes); vs1.set("params", vt1.exists("params") ? vt1.get("params") : {}); return vs1; }, internalStateToString: function (strokes, dir, alphabet) { var vt1 = new HaxeHash(); var i = HxOverrides.iter(com.wiris.js.JsHand.STROKE_VARS); while (i.hasNext()) vt1.set(i.next(), new Array()); var j = HxOverrides.iter(strokes); while (j.hasNext()) { i = HxOverrides.iter(com.wiris.js.JsHand.STROKE_VARS); while (i.hasNext()) vt1.get(i.next()).push(new Array()); var stroke = j.next(); var k = HxOverrides.iter(stroke); while (k.hasNext()) { var vu1 = k.next(); var component = 0; while (component < com.wiris.js.JsHand.STROKE_VARS.length) { var vv1 = vt1.get(com.wiris.js.JsHand.STROKE_VARS[component]); var value = component < vu1.length ? vu1[component] : 0.0; vv1[vv1.length - 1].push(value); ++component; } } }; var vw1 = vt1.get("t"); if (vw1.length > 0 && vw1[0].length > 0) { var vx1 = vw1[0][0]; var vy1 = 0; while (vy1 < vw1.length) { var vz1 = 0; while (vz1 < vw1[vy1].length) { vw1[vy1][vz1] -= vx1; ++vz1; }; ++vy1; } }; vt1.set("version", "2.0.0"); var params = new HaxeHash(); if (dir != "ltr") params.set("dir", dir); if (alphabet != "western") params.set("alphabet", alphabet); if (params.keys().hasNext()) vt1.set("params", params); return com.wiris.e1_C.encode(vt1); }, showTickContainer: function (text) { if (this.tickContainer != null) this.element.removeChild(this.tickContainer); this.tickContainer = js.Lib.document.createElement("div"); this.tickContainer.className = "wrs_tickContainer"; this.tickContainer.innerHTML = text; var v02 = this.tickContainer.getElementsByTagName("a"); var vM1 = 0, vL1 = v02.length; while (vM1 < vL1) { var i = vM1++; v02[i].setAttribute("tabindex", "-1"); }; this.element.appendChild(this.tickContainer); }, onPublicServicesResult: function (requestId, status, result, warnings, errors) { if (requestId != this.requestId) return; this.strokesResult = this.strokesSent; this.status = status; if (status == "error") { this.errorMessage = errors[0]; this.renderPreviewImage(); this.fireRecognitionError(errors[0]); this.recognitionResult = null; this.recognitionScore = 0.0; } else { this.recognitionResult = result.mathml; this.recognitionScore = result.score; this.renderPreviewImage(); }; this.fireContentChanged(); viewer.run(); }, hideHelp: function () { if (com.wiris.system.JsDOMUtils.v12(this.element, "wrs_withHelp")) { com.wiris.system.JsDOMUtils.v22(this.helpButton, "wrs_pressed"); com.wiris.system.JsDOMUtils.v22(this.element, "wrs_withHelp"); this.snackbar.hide(); if (this.helpTimeout != null) { clearTimeout(this.helpTimeout); this.helpTimeout = null; }; this.clear(); this.recognize(); if (this.helpStoredStrokes != null) { this.setStrokes(this.helpStoredStrokes); this.fitStrokes(true); this.helpStoredStrokes = null; }; if (this.helpStoredUndoBuffer != null) { this.undoBuffer = this.helpStoredUndoBuffer; this.undoPosition = this.helpStoredUndoPosition; this.manageUndoRedoButtons(); }; this.playing = false; } }, showHelp: function () { this.hideHelp(); this.helpStoredStrokes = this.getStrokes(); this.helpStoredUndoBuffer = this.undoBuffer; this.helpStoredUndoPosition = this.undoPosition; this.resetUndoBuffer(); this.clear(); this.hidePreviewImage(); this.resetUndoBuffer(); this.manageUndoRedoButtons(); com.wiris.system.JsDOMUtils.v32(this.helpButton, "wrs_pressed"); com.wiris.system.JsDOMUtils.v32(this.element, "wrs_withHelp"); var v42; if (this.recognitionType == "text") v42 = "To delete parts of the text, scribble them out"; else v42 = "To delete parts of the formula, scribble them out"; this.snackbar.show(v42, null, null); var self = this; this.helpTimeout = setTimeout(function () { var strokes = self.recognitionType == "text" ? com.wiris.js.JsHand.HELP_STROKES_TEXT : com.wiris.js.JsHand.HELP_STROKES_MATH; self.playStrokes(strokes, com.wiris.js.JsHand.HELP_POINTS_DELAY, com.wiris.js.JsHand.HELP_STROKES_DELAY, function () { self.fireRepaintAndRecognize(); self.helpTimeout = setTimeout(v52(self, self.hideHelp), 4000); }); }, 2000); }, onDocumentMouseDown: function (e) { this.hideHelp(); }, onDocumentKeyPress: function (e) { this.hideHelp(); if (e.charCode == 114) this.removeEditionPoint(); else if (e.charCode == 97) this.insertAfterPoint(); else if (e.charCode == 98) this.insertBeforePoint(); else if (e.charCode == 99) this.createEditionStroke(); else if (e.charCode == 102) this.finishEditionStroke(); }, finishEditionStroke: function () { if (this.creatingEditionStroke) { this.creatingEditionStroke = false; this.editionStroke = null; this.editionPoint = null; com.wiris.system.JsDOMUtils.v22(this.createEditionStrokeButton, "wrs_pressed"); } }, createEditionStroke: function () { if (!this.creatingEditionStroke) { this.creatingEditionStroke = true; this.editionStroke = null; this.editionPoint = null; com.wiris.system.JsDOMUtils.v32(this.createEditionStrokeButton, "wrs_pressed"); } }, getPointPosition: function () { var i = this.editionStroke.length - 1; while (i >= 0) { if (this.editionStroke[i] == this.editionPoint) return i; --i; }; return -1; }, insertAfterPoint: function () { if (this.editionPoint != null) { var position = this.getPointPosition(); this.editionStroke.splice(position + 1, 0, [this.editionPoint[0] + com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE, this.editionPoint[1] + com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE]); this.fireRepaintAndRecognize(); } }, insertBeforePoint: function () { if (this.editionPoint != null) { var position = this.getPointPosition(); this.editionStroke.splice(position, 0, [this.editionPoint[0] - com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE, this.editionPoint[1] - com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE]); this.fireRepaintAndRecognize(); } }, removeEditionPoint: function () { if (this.editionPoint != null) { HxOverrides.remove(this.editionStroke, this.editionPoint); this.editionPoint = null; this.editionStroke = null; this.movingPoint = false; this.fireRepaintAndRecognize(); } }, polyLineToPolygon: function (v62, v72, v82, v92, vA2) { var m = com.wiris.js.JsHand.DEFAULT_DELETION_SAFE_MARGIN / this.strokesZoom; if (2 * m < v92 - v72 && 2 * m < vA2 - v82) { v72 += m; v82 += m; v92 -= m; vA2 -= m; }; var i = 0; var a = -1; while (i < v62.length && a == -1) { if (v62[i][0] >= v72 && v62[i][0] <= v92 && v62[i][1] >= v82 && v62[i][1] <= vA2) a = i; ++i; }; var vB2 = new Array(); i = a + 1; var vC2 = 0; while (i < v62.length) { if (v62[i][0] >= v72 && v62[i][0] <= v92 && v62[i][1] >= v82 && v62[i][1] <= vA2) { var vD2 = this.segmentToRectangle(v62[a], v62[i]); if (vD2 != null) { vB2.splice(vC2++, 0, vD2[0]); vB2.splice(vC2++, 0, vD2[1]); vB2.splice(vC2, 0, vD2[3]); vB2.splice(vC2, 0, vD2[2]); }; a = i; }; ++i; }; if (vB2.length == 0) return null; return vB2; }, segmentToRectangle: function (a, b) { var vE2 = b[0] - a[0]; var vF2 = b[1] - a[1]; var vG2 = Math.sqrt(vE2 * vE2 + vF2 * vF2); if (vG2 == 0) return null; var vH2 = vE2 / vG2; var vI2 = vF2 / vG2; var w = com.wiris.js.JsHand.DEFAULT_DELETION_RECTANGLE_WIDTH / this.strokesZoom; var vD2 = new Array(); vD2.push([a[0] - vI2 * w / 2.0, a[1] + vH2 * w / 2.0]); vD2.push([vD2[0][0] + vE2, vD2[0][1] + vF2]); vD2.push([vD2[1][0] + vI2 * w, vD2[1][1] - vH2 * w]); vD2.push([vD2[2][0] - vE2, vD2[2][1] - vF2]); return vD2; }, segmentsIntersect: function (vJ2, vK2, vL2, vM2) { return this.pointSegmentPosition(vJ2, vK2, vL2) * this.pointSegmentPosition(vJ2, vK2, vM2) < 0 && this.pointSegmentPosition(vL2, vM2, vJ2) * this.pointSegmentPosition(vL2, vM2, vK2) < 0; }, pointInsidePolygon: function (p, vB2) { var vN2 = 0; var i = 0; while (i < vB2.length) { var vO2 = (i + 1) % vB2.length; if (vB2[i][1] <= p[1]) { if (vB2[vO2][1] > p[1]) { if (this.pointSegmentPosition(vB2[i], vB2[vO2], p) > 0) ++vN2; } } else if (vB2[vO2][1] <= p[1]) { if (this.pointSegmentPosition(vB2[i], vB2[vO2], p) < 0) --vN2; }; ++i; }; return vN2 != 0; }, pointSegmentPosition: function (vP2, vQ2, p) { return (vQ2[0] - vP2[0]) * (p[1] - vP2[1]) - (vQ2[1] - vP2[1]) * (p[0] - vP2[0]); }, newStrokeBuffer: function (vR2) { var r = new Array(); if (vR2 != null) { var i = HxOverrides.iter(vR2); while (i.hasNext()) r.push(i.next()); }; return r; }, fireStrokesChanged: function () { this.requestId = null; this.manageUndoRedoButtons(); this.fitStrokes(); var vL1 = 0, vM1 = this.handListeners; while (vL1 < vM1.length) { var listener = vM1[vL1]; ++vL1; if ('strokesChanged' in listener) listener.strokesChanged(this); } }, fireRepaintAndRecognize: function () { this.fireStrokesChanged(); this.repaint(); this.recognizeWithDelay(); }, fireRecognitionError: function (vS2) { var vL1 = 0, vM1 = this.handListeners; while (vL1 < vM1.length) { var listener = vM1[vL1]; ++vL1; if ('recognitionError' in listener) listener.recognitionError(this, vS2); } }, fireContentChanged: function () { var vL1 = 0, vM1 = this.handListeners; while (vL1 < vM1.length) { var listener = vM1[vL1]; ++vL1; if ('contentChanged' in listener) listener.contentChanged(this); } }, setToolbarHidden: function (hidden) { this.toolbarHidden = hidden; if (this.element == null) return; if (hidden) com.wiris.system.JsDOMUtils.vT2(this.element, "wrs_toolbarHidden"); else com.wiris.system.JsDOMUtils.v22(this.element, "wrs_toolbarHidden"); }, setReadOnly: function (readOnly) { this.readOnly = readOnly; if (this.element == null) return; if (readOnly) com.wiris.system.JsDOMUtils.vT2(this.element, "wrs_readOnly"); else com.wiris.system.JsDOMUtils.v22(this.element, "wrs_readOnly"); }, setConstraints: function (param) { if (js.Boot.__instanceof(param, String)) param = haxe.Json.parse(param); this.symbolList = haxe.Json.stringify(Reflect.field(param, "symbols")); this.structureList = haxe.Json.stringify(Reflect.field(param, "structure")); this.grammar = Reflect.field(param, "grammar"); if (this.symbolList == null || this.symbolList == "['']") this.symbolList = ""; if (this.structureList == null || this.structureList == "['']") this.structureList = ""; if (this.grammar == null) this.grammar = ""; }, setParams: function (params) { if (params == null) return; var vU2 = new HaxeHash(); if (js.Boot.__instanceof(params, HaxeHash)) vU2 = js.Boot.vV2(params, HaxeHash); else { var i = HxOverrides.iter(Reflect.fields(params)); while (i.hasNext()) { var key = i.next(); var value = Reflect.field(params, key); vU2.set(key, value); } }; var repaint = false; var recognize = false; var i = vU2.keys(); while (i.hasNext()) { var key = i.next(); var value = vU2.get(key); key = key.toLowerCase(); if (js.Boot.__instanceof(value, Bool)) { if (js.Boot.vV2(value, Bool)) value = "true"; else value = "false"; }; if (key == "readonly") this.setReadOnly("true" == value); else if (key == "toolbarhidden") this.setToolbarHidden("true" == value); else if (key == "linecolor") { this.lineColor = value; repaint = true; } else if (key == "linewidth") { this.lineWidth = value; repaint = true; } else if (key == "recognitiondelay") this.recognitionDelay = value; else if (key == "previewzoom") { this.previewZoom = value; recognize = true; } else if (key == "constraints") { this.setConstraints(value); recognize = true; } else if (key == "grammar") { this.grammar = value; recognize = true; } else if (key == "dir") { this.dir = value; recognize = true; } else if (key == "alphabet") { this.alphabet = value; recognize = true; } else if (key == "editionmode") { var vW2 = "true" == value; if (vW2 != this.editionMode) { if (vW2) com.wiris.system.JsDOMUtils.v32(this.element, "wrs_editionMode"); else com.wiris.system.JsDOMUtils.v22(this.element, "wrs_editionMode"); this.editionMode = vW2; }; repaint = true; } else if (key == "deletiongesture") this.deletionGestureEnabled = value != "false"; else if (key == "recognitiontype") { com.wiris.system.JsDOMUtils.v22(this.element, "wrs_recognitionType_" + this.recognitionType); this.recognitionType = value; com.wiris.system.JsDOMUtils.v32(this.element, "wrs_recognitionType_" + this.recognitionType); } else if (key == "useHTTPCredentials") com.wiris.system.ServiceProvider.vX2(value == "true"); else if (key == "licenseid") com.wiris.system.ServiceProvider.vY2(value); }; if (repaint) this.repaint(); if (recognize) this.recognize(); }, urlAnswerReceived: function (url, parameters, status, vZ2) { if (url == com.wiris.js.JsHand.DEFAULT_LATEX2MATHML_SERVICE_URL) { this.recognitionResult = vZ2; this.renderPreviewImage(); this.fireContentChanged(); } }, serviceAnswerReceived: function (serviceName, parameters, status, vZ2) { if ((serviceName == "recognize" || serviceName == "strokes2text") && parameters.get("r") == this.requestId) { this.strokesResult = parameters.get("input"); var va2; try { va2 = haxe.Json.parse(vZ2); } catch (e) { va2 = { status: "error", errors: ["Recognition server is not available"], result: null }; }; this.status = va2.status; if (va2.status == "error") { this.errorMessage = va2.errors[0]; this.renderPreviewImage(); this.fireRecognitionError(va2.errors[0]); this.recognitionResult = null; this.recognitionScore = 0.0; this.fireContentChanged(); } else { var result = va2.result; var update = true; if (serviceName == "strokes2text") this.recognitionResult = "<math><mtext>" + StringTools.htmlEscape(result.text) + "</mtext></math>"; else { var latex = Reflect.field(result, "latex"); if (latex != null) { this.latex2mathml(latex); update = false; } else this.recognitionResult = result.mathml; }; this.recognitionScore = result.score; if (update) { this.renderPreviewImage(); this.fireContentChanged(); } } } else if (serviceName == "runtest") { var vb2 = null; if (status >= 400) vb2 = this.testErrorCallbacks.shift(); else vb2 = this.testSuccessCallbacks.shift(); if (vb2 != null) vb2(vZ2); } else if (serviceName == "validate") { if (status != 200) js.Lib.alert("ERROR! Problem connecting to server: sample not validated"); } else if (serviceName == "tick" && vZ2 != "" && !StringTools.startsWith(vZ2, "Error:") && !(("cordova" in window) || ("wrs_hand_publicServices" in window))) this.showTickContainer(vZ2); }, latex2mathml: function (latex) { var params = new HaxeHash(); params.set("latex", latex); com.wiris.system.ServiceProvider.vc2(com.wiris.js.JsHand.DEFAULT_LATEX2MATHML_SERVICE_URL, params, "hand_convert_latex_recognition", this); }, validateResult: function (strokes, user) { var params = new HaxeHash(); params.set("input", strokes); params.set("value", user); com.wiris.system.ServiceProvider.vd2("recognize", params, "validate_result", this); }, runTest: function (ve2, vf2) { this.testSuccessCallbacks.push(ve2); this.testErrorCallbacks.push(vf2); var params = new HaxeHash(); com.wiris.system.ServiceProvider.vd2("runtest", params, "test_service", this); }, findPaths: function () { var basePath = null; var vg2 = "hand.js"; var vh2 = js.Lib.document.getElementsByTagName("script"); var vM1 = 0, vL1 = vh2.length; while (vM1 < vL1) { var i = vM1++; var src = vh2[i].src; var j = src.lastIndexOf("/" + vg2); if (j >= 0) basePath = HxOverrides.substr(src, 0, j); else if (src == vg2) basePath = ""; }; var vi2 = basePath; return [basePath, vi2]; }, fitStrokes: function (vj2) { if (vj2 == null) vj2 = false; if (this.element == null) return; var set = false; var v72 = -1; var v82 = -1; var v92 = -1; var vA2 = -1; var i = 0; while (i < this.strokes.length) { var j = 0; while (j < this.strokes[i].length) { if (!set) { v72 = this.strokes[i][j][0]; v82 = this.strokes[i][j][1]; v92 = v72; vA2 = v82; set = true; } else { if (this.strokes[i][j][0] < v72) v72 = this.strokes[i][j][0]; if (this.strokes[i][j][0] > v92) v92 = this.strokes[i][j][0]; if (this.strokes[i][j][1] < v82) v82 = this.strokes[i][j][1]; if (this.strokes[i][j][1] > vA2) vA2 = this.strokes[i][j][1]; }; ++j; }; ++i; }; if (!set) { this.strokesZoom = 1; this.strokesDX = 0; this.strokesDY = 0; } else if (vj2 || this.tX(v72) < -1 || this.tY(v82) < -1 || this.tX(v92) > this.canvasWidth + 1 || this.tY(vA2) > this.canvasHeight + 1) { var vk2 = this.canvasWidth * com.wiris.js.JsHand.DEFAULT_RELATIVE_FIT_MARGIN; var vl2 = this.canvasHeight * com.wiris.js.JsHand.DEFAULT_RELATIVE_FIT_MARGIN; var vm2 = v92 - v72; var vn2 = vA2 - v82; var vo2 = this.canvasWidth - 2 * vk2; var vp2 = this.canvasHeight - 2 * vl2; this.strokesZoom = 1; var vq2 = vo2 * com.wiris.js.JsHand.DEFAULT_FIT_WIDTH_PER_CHARACTER_PROPORTION * this.strokes.length; if (vm2 * this.strokesZoom < vq2) this.strokesZoom = vq2 / (vm2 * this.strokesZoom); if (vm2 * this.strokesZoom > vo2) this.strokesZoom *= vo2 / (vm2 * this.strokesZoom); if (vn2 * this.strokesZoom > vp2) this.strokesZoom *= vp2 / (vn2 * this.strokesZoom); if (this.strokesZoom == 0) this.strokesZoom = 1; this.strokesDX = -this.strokesZoom * v72; this.strokesDY = -this.strokesZoom * v82; this.strokesDX += vk2 + (vo2 - vm2 * this.strokesZoom) / 2.0; this.strokesDY += vl2 + (vp2 - vn2 * this.strokesZoom) / 2.0; this.repaint(); } }, playStrokes: function (input, vr2, vs2, vt2) { var vL1 = this; this.hidePreviewImage(); var vs1 = this.stringToInternalState(input); this.strokes = vs1.get("strokes"); this.setParams(vs1.get("params")); this.resetUndoBuffer(); this.manageUndoRedoButtons(); this.fitStrokes(true); var vu2 = this.strokes; this.strokes = this.newStrokeBuffer(); var i = 0; var j = 0; if (vu2.length > 0) this.strokes.push([]); this.playing = true; var vv2 = (function (vx) { var vy_; var vw2 = null; vw2 = function () { if (!vL1.playing) return; if (i < vu2.length) { if (j < vu2[i].length) { vL1.strokes[vL1.strokes.length - 1].push(vu2[i][j]); ++j; vL1.repaint(); setTimeout(vw2, vr2); } else { if (vL1.getDeletionPolygon() != null) { vL1.applyDeletionGesture(); vL1.repaint(); }; ++i; j = 0; if (i < vu2.length) vL1.strokes.push([]); setTimeout(vw2, vs2); } } else { vL1.playing = false; if (vt2 != null) vt2(); } }; vy_ = vw2; return vy_; }(this)); vv2(); }, setStrokes: function (input) { var vs1 = this.stringToInternalState(input); this.strokes = vs1.get("strokes"); this.setParams(vs1.get("params")); this.resetUndoBuffer(); this.fireRepaintAndRecognize(); }, getStrokes: function () { var vx2 = new Array(); var i = HxOverrides.iter(this.strokes); while (i.hasNext()) { var stroke = i.next(); if (stroke.length > 0) vx2.push(stroke); }; return this.internalStateToString(vx2, this.dir, this.alphabet); }, insertStrokesAnnotationInMathML: function (mml, vy2) { var end = mml.indexOf("</semantics>"); if (end >= 0) return mml.substring(0, end) + vy2 + mml.substring(end); var vz2 = false; var i = Xml.parse(mml).elements(); while (i.hasNext()) { var element = i.next(); if (element.getNodeName().toLowerCase() == "math") { i = element.elements(); vz2 = i.hasNext() && i.next() != null && i.hasNext(); break; } }; var v03 = mml.indexOf("<math"); var v13 = mml.indexOf(">", v03) + 1; end = mml.indexOf("</math>"); if (end < 0) { mml = mml.substring(0, v13 - 2) + "></math>"; --v13; end = v13; }; var v23 = mml.substring(v03, v13); if (vz2) return v23 + "<semantics><mrow>" + mml.substring(v13, end) + "</mrow>" + vy2 + "</semantics></math>"; return v23 + "<semantics>" + mml.substring(v13, end) + vy2 + "</semantics></math>"; }, getStrokesAnnotationFromMathML: function (mml) { var v33 = "<annotation encoding=\"application/json\">"; var start = mml.indexOf(v33); if (start < 0) return null; var v43 = "</annotation>"; var end = mml.indexOf(v43, start); var result = new HaxeHash(); result.set("start", start); result.set("end", end + v43.length); result.set("strokesString", mml.substring(start + v33.length, end)); result.set("annotationString", mml.substring(start, end + v43.length)); return result; }, setMathML: function (mml) { var result = this.getStrokesAnnotationFromMathML(mml); if (result != null) { var vs1 = this.stringToInternalState(result.get("strokesString")); this.strokes = vs1.get("strokes"); this.setParams(vs1.get("params")); mml = mml.substring(0, result.get("start")) + mml.substring(result.get("end")); } else this.strokes = this.newStrokeBuffer(); this.strokesResult = this.getStrokes(); this.resetUndoBuffer(); this.repaint(); this.recognitionResult = mml; this.recognitionScore = 0.0; this.renderPreviewImage(); this.fireStrokesChanged(); this.fireContentChanged(); }, getMathMLWithStrokes: function () { var vy2 = "<annotation encoding=\"application/json\">" + this.strokesResult + "</annotation>"; var mml = this.getMathML(); return this.insertStrokesAnnotationInMathML(mml, vy2); }, getScore: function () { return this.recognitionScore; }, getMathML: function () { return this.recognitionResult == null ? "<math></math>" : this.recognitionResult; }, addHandListener: function (listener) { this.handListeners.push(listener); }, updateGUI: function () { if (this.element.parentNode == null) return; var v53 = this.element.parentNode.offsetHeight - 2; var v63 = this.element.parentNode.offsetWidth - 2; if (!this.readOnly && !this.toolbarHidden) v63 -= 41; if (this.tickContainer != null) v53 -= this.tickContainer.offsetHeight + 2; if (v63 != this.canvasWidth || v53 != this.canvasHeight) { this.element.style.height = this.element.parentNode.offsetHeight + "px"; this.toolbarElement.style.height = this.element.parentNode.offsetHeight - 2 - 4 + "px"; this.canvasWidth = v63; this.canvasHeight = v53; this.canvas.setAttribute("width", this.canvasWidth + ""); this.canvas.setAttribute("height", this.canvasHeight + ""); this.fitStrokes(); this.repaint(); } }, manageUndoRedoButtons: function () { if (this.element == null) return; if (this.undoPosition > 0) com.wiris.system.JsDOMUtils.v22(this.undoButton, "wrs_disabled"); else com.wiris.system.JsDOMUtils.v32(this.undoButton, "wrs_disabled"); if (this.undoPosition < this.undoBuffer.length) com.wiris.system.JsDOMUtils.v22(this.redoButton, "wrs_disabled"); else com.wiris.system.JsDOMUtils.v32(this.redoButton, "wrs_disabled"); if (this.strokes.length > 0) { com.wiris.system.JsDOMUtils.v22(this.clearButton, "wrs_disabled"); com.wiris.system.JsDOMUtils.v22(this.canvasContainer, "wrs_empty"); } else { com.wiris.system.JsDOMUtils.v32(this.clearButton, "wrs_disabled"); com.wiris.system.JsDOMUtils.vT2(this.canvasContainer, "wrs_empty"); } }, clear: function () { this.movingPoint = false; this.finishEditionStroke(); this.insertUndoItem({ type: "clear", strokes: this.newStrokeBuffer(this.strokes) }); this.strokes = this.newStrokeBuffer(); this.fireRepaintAndRecognize(); }, redo: function () { if (this.undoPosition >= this.undoBuffer.length) return; this.movingPoint = false; this.finishEditionStroke(); var v73 = this.undoBuffer[this.undoPosition]; ++this.undoPosition; if (v73.type == "add") this.strokes.push(v73.stroke); else if (v73.type == "remove") this.strokes.splice(v73.position, 1); else if (v73.type == "clear") this.strokes = this.newStrokeBuffer(); this.strokesDX = v73.strokesDX; this.strokesDY = v73.strokesDY; this.strokesZoom = v73.strokesZoom; this.fireRepaintAndRecognize(); }, undo: function () { if (this.undoPosition == 0) return; this.movingPoint = false; this.finishEditionStroke(); --this.undoPosition; var v73 = this.undoBuffer[this.undoPosition]; if (v73.type == "add") this.strokes.pop(); else if (v73.type == "remove") this.strokes.splice(v73.position, 0, v73.stroke); else if (v73.type == "clear") this.strokes = this.newStrokeBuffer(v73.strokes); this.strokesDX = v73.strokesDX; this.strokesDY = v73.strokesDY; this.strokesZoom = v73.strokesZoom; this.fireRepaintAndRecognize(); }, insertUndoItem: function (v73) { v73.strokesDX = this.strokesDX; v73.strokesDY = this.strokesDY; v73.strokesZoom = this.strokesZoom; this.undoBuffer.splice(this.undoPosition, 0, v73); ++this.undoPosition; this.deleteRedoBuffer(); }, repaint: function () { if (this.element == null) return; this.context.clearRect(0, 0, this.canvasWidth, this.canvasHeight); if (this.strokes.length == 0) return; var n = this.strokes.length; var v83 = this.getDeletionPolygon(); if (v83 != null) { --n; if (com.wiris.js.JsHand.DEBUG) this.paintStroke(v83, "#ffff00", 0, true); }; var i = 0; while (i < n) { if (v83 != null && this.strokeIsContained(this.strokes[i], this.lastDeletedStrokes)) this.paintStroke(this.strokes[i], com.wiris.js.JsHand.DEFAULT_DELETION_DELETED_STROKE_COLOR, this.lineWidth); else this.paintStroke(this.strokes[i], this.lineColor, this.lineWidth); ++i; }; if (v83 != null) this.paintStroke(this.strokes[this.strokes.length - 1], com.wiris.js.JsHand.DEFAULT_DELETION_LINE_COLOR, this.lineWidth); }, paintPoints: function (stroke) { this.context.lineWidth = 1; this.context.strokeStyle = com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_LINE_COLOR; var i = HxOverrides.iter(stroke); while (i.hasNext()) { var vu1 = i.next(); if (vu1 == this.editionPoint) this.context.fillStyle = com.wiris.js.JsHand.DEFAULT_EDITION_SELECTED_MARKER_BACKGROUND_COLOR; else this.context.fillStyle = com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_BACKGROUND_COLOR; this.context.fillRect(this.tX(vu1[0]) - com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE / 2, this.tY(vu1[1]) - com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE / 2, com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE, com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE); this.context.beginPath(); this.context.rect(this.tX(vu1[0]) - com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE / 2, this.tY(vu1[1]) - com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE / 2, com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE, com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE); this.context.stroke(); } }, paintStroke: function (stroke, color, width, fill) { if (fill == null) fill = false; this.context.lineWidth = width; this.context.strokeStyle = color; this.context.lineJoin = "round"; this.context.lineCap = "round"; if (stroke.length > 0) { this.context.beginPath(); var i = 0; var x = this.tX(stroke[i][0]); var y = this.tY(stroke[i][1]); this.context.moveTo(x, y); ++i; while (i < stroke.length - 1) { x = this.tX(stroke[i][0]); y = this.tY(stroke[i][1]); var v93 = (stroke[i][0] + stroke[i + 1][0]) / 2; var vA3 = (stroke[i][1] + stroke[i + 1][1]) / 2; this.context.quadraticCurveTo(x, y, this.tX(v93), this.tY(vA3)); ++i; }; if (i == stroke.length) i = 0; var vB3 = x; var vC3 = y; x = this.tX(stroke[i][0]); y = this.tY(stroke[i][1]); if (vB3 - x == 0 && vC3 - y == 0) ++x; this.context.lineTo(x, y); if (fill) { this.context.fillStyle = color; this.context.fill(); }; this.context.stroke(); }; if (this.editionMode && this.editing) this.paintPoints(stroke); }, itY: function (vD3) { return (vD3 - this.strokesDY) / this.strokesZoom; }, itX: function (vE3) { return (vE3 - this.strokesDX) / this.strokesZoom; }, tY: function (y) { return this.strokesDY + y * this.strokesZoom; }, tX: function (x) { return this.strokesDX + x * this.strokesZoom; }, getDeletionPolygon: function () { if (!this.deletionGestureEnabled || !this.painting && !this.playing || this.strokes.length == 0) return null; var vF3 = this.strokes[this.strokes.length - 1]; if (vF3.length == 0) return null; var v72 = vF3[0][0]; var v92 = vF3[0][0]; var v82 = vF3[0][1]; var vA2 = vF3[0][1]; var vG3 = false; var i = 1; var n = com.wiris.js.JsHand.DEFAULT_DELETION_GESTURE_INTERSECTIONS; while (i < vF3.length) { if (vF3[i][0] < v72) v72 = vF3[i][0]; if (vF3[i][0] > v92) v92 = vF3[i][0]; if (vF3[i][1] < v82) v82 = vF3[i][1]; if (vF3[i][1] > vA2) vA2 = vF3[i][1]; if (!vG3) { var vH3 = 0; var vI3 = 0; var vJ3 = 0; var vK3 = 0; var vL3 = (v92 - v72) * com.wiris.js.JsHand.DEFAULT_DELETION_DIAGONAL_OFFSET; var vM3 = (vA2 - v82) * com.wiris.js.JsHand.DEFAULT_DELETION_DIAGONAL_OFFSET; var j = 1; while (j < vF3.length) { if (this.segmentsIntersect(vF3[j - 1], vF3[j], [v72 + vL3, v82], [v92, vA2 - vM3])) ++vH3; if (this.segmentsIntersect(vF3[j - 1], vF3[j], [v72, v82 + vM3], [v92 - vL3, vA2])) ++vI3; if (this.segmentsIntersect(vF3[j - 1], vF3[j], [v92 - vL3, v82], [v72, vA2 - vM3])) ++vJ3; if (this.segmentsIntersect(vF3[j - 1], vF3[j], [v92, v82 + vM3], [v72 + vL3, vA2])) ++vK3; ++j; }; if (vH3 >= n && vI3 >= n || vJ3 >= n && vK3 >= n) vG3 = true; }; ++i; }; if (!vG3) return null; this.lastDeletedStrokes = new Array(); var v83 = this.polyLineToPolygon(vF3, v72, v82, v92, vA2); if (v83 == null) return null; var vy1 = 0; while (vy1 < this.strokes.length - 1) { if (!this.strokeIsContained(this.strokes[vy1], this.lastDeletedStrokes) && this.strokeIsDeleted(this.strokes[vy1], v83)) this.lastDeletedStrokes.push(this.strokes[vy1]); ++vy1; }; if (this.lastDeletedStrokes.length > 0) return v83; return null; }, applyDeletionGesture: function () { this.strokes.pop(); this.undoBuffer.splice(this.undoPosition - 1, 1); --this.undoPosition; var i = 0; while (i < this.strokes.length) if (this.strokeIsContained(this.strokes[i], this.lastDeletedStrokes)) { this.insertUndoItem({ type: "remove", stroke: this.strokes[i], position: i }); this.strokes.splice(i, 1); } else ++i; }, strokeIsDeleted: function (stroke, v83) { if (stroke.length == 0) return false; if (this.pointInsidePolygon(stroke[0], v83)) return true; var i = 1; while (i < stroke.length) { if (this.pointInsidePolygon(stroke[i], v83)) return true; if (this.segmentsIntersect(stroke[i - 1], stroke[i], v83[v83.length - 1], v83[0])) return true; var j = 1; while (j < v83.length) { if (this.segmentsIntersect(stroke[i - 1], stroke[i], v83[j - 1], v83[j])) return true; ++j; }; ++i; }; return false; }, strokeIsContained: function (stroke, stack) { var i = HxOverrides.iter(stack); while (i.hasNext()) if (i.next() == stroke) return true; return false; }, insertCSS: function () { var link = js.Lib.document.createElement("link"); link.setAttribute("rel", "stylesheet"); link.setAttribute("type", "text/css"); link.setAttribute("href", this.resourceLoader.getPath("hand.css")); js.Lib.document.getElementsByTagName("head")[0].appendChild(link); }, getElement: function () { var vL1 = this; if (this.element != null) return this.element; com.wiris.system.JsDOMUtils.init(); this.insertCSS(); this.element = js.Lib.document.createElement("div"); this.element.className = "wrs_hand wrs_recognitionType_math"; this.contextMenu = new com.wiris.e1_6(this.element); this.toolbarElement = js.Lib.document.createElement("div"); this.toolbarElement.className = "wrs_toolbar"; this.undoButton = this.createButton("undo.svg", function (e) { vL1.undo(); }); this.redoButton = this.createButton("redo.svg", function (e) { vL1.redo(); }); this.clearButton = this.createButton("trash.svg", function (e) { vL1.clear(); }); var vN3 = js.Lib.document.createElement("div"); vN3.className = "wrs_editionContainer"; this.toolbarElement.appendChild(vN3); this.createLine(vN3); this.editionButton = this.createButton("edit.svg", function (e) { if (vL1.editing) { com.wiris.system.JsDOMUtils.v22(vL1.element, "wrs_editing"); com.wiris.system.JsDOMUtils.v22(vL1.editionButton, "wrs_pressed"); } else { com.wiris.system.JsDOMUtils.v32(vL1.element, "wrs_editing"); com.wiris.system.JsDOMUtils.v32(vL1.editionButton, "wrs_pressed"); }; vL1.editing = !vL1.editing; vL1.movingPoint = false; vL1.finishEditionStroke(); vL1.repaint(); }, vN3); var vO3 = js.Lib.document.createElement("div"); vO3.className = "wrs_subEditionContainer"; vN3.appendChild(vO3); this.removePointButton = this.createButton("remove_point.svg", function (e) { vL1.removeEditionPoint(); }, vO3); this.insertBeforePointButton = this.createButton("insert_point_before.svg", function (e) { vL1.insertBeforePoint(); }, vO3); this.insertAfterPointButton = this.createButton("insert_point_after.svg", function (e) { vL1.insertAfterPoint(); }, vO3); this.createEditionStrokeButton = this.createButton("create_stroke.svg", function (e) { if (vL1.creatingEditionStroke) vL1.finishEditionStroke(); else vL1.createEditionStroke(); }, vO3); this.moveUpButton = this.createButton("move_up.svg", null, vO3); this.moveDownButton = this.createButton("move_down.svg", null, vO3); var vP3 = false; var vQ3 = function (vE2, vF2) { if (!vP3) return; var i = HxOverrides.iter(vL1.strokes); while (i.hasNext()) { var j = HxOverrides.iter(i.next()); while (j.hasNext()) { var vu1 = j.next(); vu1[0] += vE2; vu1[1] += vF2; } }; vL1.repaint(); setTimeout(function () { vQ3(vE2, vF2); }, 1000 / 24); }; com.wiris.system.JsDOMUtils.addEventListener(this.moveUpButton, "mousedown", function (e) { vP3 = true; vQ3(0, -1); }); com.wiris.system.JsDOMUtils.addEventListener(this.moveDownButton, "mousedown", function (e) { vP3 = true; vQ3(0, 1); }); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "mouseup", function (e) { vP3 = false; }); if (this.editionMode) com.wiris.system.JsDOMUtils.v32(this.element, "wrs_editionMode"); this.createLine(); this.helpButton = this.createButton("help.svg", function (e) { if (com.wiris.system.JsDOMUtils.v12(vL1.element, "wrs_withHelp")) vL1.hideHelp(); else vL1.showHelp(); }); com.wiris.system.JsDOMUtils.addEventListener(this.helpButton, "mousedown", function (e) { com.wiris.system.JsDOMUtils.vR3(e); e.stopPropagation(); }); this.canvasContainer = js.Lib.document.createElement("div"); this.canvasContainer.className = "wrs_canvasContainer"; this.canvas = js.Lib.document.createElement("canvas"); this.canvasWidth = 0; this.canvasHeight = 0; this.canvas.className = "wrs_canvas"; this.canvas.setAttribute("width", this.canvasWidth + ""); this.canvas.setAttribute("height", this.canvasHeight + ""); this.context = this.canvas.getContext("2d"); this.canvasContainer.appendChild(this.canvas); this.snackbar = new com.wiris.e1_7(this.canvasContainer); if ((("cordova" in window) || ("wrs_hand_publicServices" in window))) { this.previewMathML = js.Lib.document.createElement("div"); this.previewMathML.className = "wrs_previewMathML"; this.canvasContainer.appendChild(this.previewMathML); }; this.previewImage = js.Lib.document.createElement("img"); this.previewImage.className = "wrs_previewImage"; this.canvasContainer.appendChild(this.previewImage); this.element.appendChild(this.toolbarElement); this.element.appendChild(this.canvasContainer); var vS3 = new haxe.Timer(100); vS3.run = v52(this, this.updateGUI); com.wiris.system.JsDOMUtils.addEventListener(this.canvas, "touchstart", v52(this, this.onCanvasElementTouchStart)); com.wiris.system.JsDOMUtils.addEventListener(this.canvas, "touchmove", v52(this, this.onCanvasElementTouchMove)); com.wiris.system.JsDOMUtils.addEventListener(this.canvas, "touchend", v52(this, this.onCanvasElementTouchEnd)); com.wiris.system.JsDOMUtils.addEventListener(this.canvas, "mousedown", v52(this, this.onCanvasElementMouseDown)); com.wiris.system.JsDOMUtils.addEventListener(this.canvas, "mousemove", v52(this, this.onCanvasElementMouseMove)); com.wiris.system.JsDOMUtils.addEventListener(this.canvas, "mouseup", v52(this, this.onCanvasElementMouseEnd)); com.wiris.system.JsDOMUtils.addEventListener(this.canvas, "mouseleave", v52(this, this.onCanvasElementMouseEnd)); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "keypress", v52(this, this.onDocumentKeyPress)); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "touchstart", v52(this, this.onDocumentMouseDown)); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "mousedown", v52(this, this.onDocumentMouseDown)); var self = this; if (navigator.vT3) this.canvas.vU3 = function (e) { e.preventDefault(); }; if (!(("cordova" in window) || ("wrs_hand_publicServices" in window))) com.wiris.system.ServiceProvider.vd2("tick", null, "hand_tick", this); this.manageUndoRedoButtons(); this.setReadOnly(this.readOnly); this.setToolbarHidden(this.toolbarHidden); this.repaint(); this.renderPreviewImage(); return this.element; }, createButton: function (vV3, vW3, parent) { if (parent == null) parent = this.toolbarElement; var button = js.Lib.document.createElement("div"); button.className = "wrs_button"; button.appendChild(this.getIcon(vV3)); parent.appendChild(button); if (vW3 != null) com.wiris.system.JsDOMUtils.addEventListener(button, "click", vW3); return button; }, createLine: function (parent) { if (parent == null) parent = this.toolbarElement; var line = js.Lib.document.createElement("div"); line.className = "wrs_line"; parent.appendChild(line); }, getIcon: function (vV3) { var img = js.Lib.document.createElement("img"); var path = this.resourceLoader.getPath("decoration/" + vV3); if (("cordova" in window) || ("wrs_hand_publicServices" in window) && (wrs_hand_publicServices.getPlatformName() == "android" && wrs_hand_publicServices.getPlatformVersion() < "19")) path = StringTools.replace(path, ".svg", ".png"); img.setAttribute("src", path); return img; }, recognize: function () { if (this.strokes.length == 0) { this.recognitionResult = null; this.recognitionScore = 0.0; this.strokesResult = this.getStrokes(); this.hidePreviewImage(); this.fireContentChanged(); } else { this.loadingPreviewImage(); this.generateRequestId(); this.strokesSent = this.getStrokes(); if (("cordova" in window)) { var vX3 = this.requestId; var vY3 = this.strokesSent; var self = this; cordova.exec(function (vZ2) { if (vX3 == self.requestId) { self.strokesResult = self.strokesSent; var va2 = haxe.Json.parse(vZ2); self.status = va2.status; if (va2.status == "error") { self.errorMessage = va2.errors[0]; self.renderPreviewImage(); self.fireRecognitionError(va2.errors[0]); self.recognitionResult = null; self.recognitionScore = 0.0; } else { self.recognitionResult = va2.result.mathml; self.recognitionScore = va2.result.score; self.renderPreviewImage(); }; self.fireContentChanged(); viewer.run(); } }, function (error) { js.Lib.alert("There has been an unknown error. This should not happen."); }, "Hand", "mathRecognition", [vY3, this.symbolList, this.structureList]); } else if (("wrs_hand_publicServices" in window)) wrs_hand_publicServices.strokes2mathmlAsync(this.strokesSent, haxe.Json.stringify({ symbols: this.symbolList, structure: this.structureList }), "(function(s,r,w,e){" + this.getInstancePath() + ".onPublicServicesResult(\"" + this.requestId + "\",s,r,w,e);})"); else { var params = new HaxeHash(); params.set("input", this.strokesSent); params.set("s", this.sessionId); params.set("r", this.requestId); if (this.recognitionType == "text") com.wiris.system.ServiceProvider.vd2("strokes2text", params, "text_recognition", this); else { if (this.symbolList.length > 0) params.set("symbols", this.symbolList); if (this.structureList.length > 0) params.set("structure", this.structureList); if (this.grammar.length > 0) params.set("grammar", this.grammar); com.wiris.system.ServiceProvider.vd2("recognize", params, "math_hand_recognition", this); } } } }, recognizeWithDelay: function () { if (this.recognitionTimer != null) this.recognitionTimer.stop(); this.recognitionTimer = haxe.Timer.delay(v52(this, this.recognize), this.recognitionDelay); }, hidePreviewImage: function () { if (this.element == null) return; if ((("cordova" in window) || ("wrs_hand_publicServices" in window))) this.previewMathML.innerHTML = ""; com.wiris.system.JsDOMUtils.v22(this.canvasContainer, "wrs_withPreview"); }, renderPreviewImage: function () { if (this.element == null) return; if (this.recognitionResult == null && this.errorMessage == null) { this.hidePreviewImage(); return; }; var mathml = this.recognitionResult; var zoom = this.previewZoom; if (this.status == "error") { mathml = "<math mathcolor=\"#" + com.wiris.js.JsHand.DEFAULT_ERROR_COLOR + "\"><mtext>" + this.errorMessage + "</mtext></math>"; zoom = 1.0; } else if (this.status == "warning" && com.wiris.js.JsHand.DEFAULT_WARNING_COLOR != null) mathml = mathml.split("<math").join("<math mathcolor=\"#" + com.wiris.js.JsHand.DEFAULT_WARNING_COLOR + "\""); if ((("cordova" in window) || ("wrs_hand_publicServices" in window))) { com.wiris.system.JsDOMUtils.v22(this.canvasContainer, "wrs_withPreview"); this.previewMathML.innerHTML = mathml; } else { com.wiris.system.JsDOMUtils.v32(this.canvasContainer, "wrs_withPreview"); var params = "zoom=" + zoom + "&centerbaseline=false&stats-app=hand&mml=" + StringTools.urlEncode(mathml); params += "&" + com.wiris.system.ServiceProvider.vZ3("hand_preview"); if (("URL" in window)) { var va3 = new js.XMLHttpRequest(); va3.open("POST", com.wiris.js.JsHand.DEFAULT_EDITOR_SERVICE_URL + "/render.png", true); va3.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); va3.responseType = "blob"; var self = this; va3.onload = function () { self.previewImage.setAttribute("src", URL.createObjectURL(va3.response)); }; va3.send(params); } else this.previewImage.setAttribute("src", com.wiris.js.JsHand.DEFAULT_EDITOR_SERVICE_URL + "/render.png?" + params); } }, loadingPreviewImage: function () { if (this.element == null) return; if ((("cordova" in window) || ("wrs_hand_publicServices" in window))) this.previewMathML.innerHTML = ""; this.previewImage.setAttribute("src", this.resourceLoader.getPath("decoration/loading.gif")); com.wiris.system.JsDOMUtils.v32(this.canvasContainer, "wrs_withPreview"); }, onCanvasElementMouseEnd: function (e) { if (this.editionMode && this.editing && this.movingPoint) this.movingPoint = false; if (this.getDeletionPolygon() != null) { this.applyDeletionGesture(); this.painting = false; this.manageUndoRedoButtons(); this.fireRepaintAndRecognize(); } else this.painting = false; }, onCanvasElementMouseMove: function (e) { var vb3 = com.wiris.system.JsDOMUtils.vc3(this.canvas, e); if (this.editionMode && this.editing && this.movingPoint) { this.editionPoint[0] = this.itX(vb3[0]); this.editionPoint[1] = this.itY(vb3[1]); this.fireRepaintAndRecognize(); } else if (this.painting) { com.wiris.system.JsDOMUtils.vR3(e); this.addPoint(vb3); } }, onCanvasElementMouseDown: function (e) { if (com.wiris.system.JsDOMUtils.v12(this.element, "wrs_withHelp")) return; com.wiris.system.JsDOMUtils.vR3(e); var vb3 = com.wiris.system.JsDOMUtils.vc3(this.canvas, e); if (this.editionMode && this.editing) { var x = this.itX(vb3[0]); var y = this.itY(vb3[1]); if (this.creatingEditionStroke) { if (this.editionStroke == null) this.editionStroke = this.startStroke(); if (this.editionStroke.length > 0) { var vd3 = this.editionStroke[this.editionStroke.length - 1]; if (vd3[0] == x && vd3[1] == y) this.finishEditionStroke(); }; if (this.creatingEditionStroke) this.editionStroke.push([x, y, haxe.Timer.stamp() * 1000]); this.fireRepaintAndRecognize(); return; }; var i = this.strokes.length - 1; while (i >= 0) { var j = this.strokes[i].length - 1; while (j >= 0) { var ve3 = this.strokes[i][j][0]; var vf3 = this.strokes[i][j][1]; var h = com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE / 2; if (x >= ve3 - h && x <= ve3 + h && y >= vf3 - h && y <= vf3 + h) { this.movingPoint = true; this.editionStroke = this.strokes[i]; this.editionPoint = this.strokes[i][j]; this.repaint(); return; }; --j; }; --i; } }; this.startStroke(); this.addPoint(vb3); this.painting = true; }, onCanvasElementTouchEnd: function (e) { this.onCanvasElementMouseEnd(e); com.wiris.system.JsDOMUtils.vR3(e); }, onCanvasElementTouchMove: function (e) { if (e.touches.length > 1) return; if (this.painting) { com.wiris.system.JsDOMUtils.vR3(e); this.addPoint(com.wiris.system.JsDOMUtils.vg3(this.canvas, e.touches[0])); } }, onCanvasElementTouchStart: function (e) { if (com.wiris.system.JsDOMUtils.v12(this.element, "wrs_withHelp")) return; if (e.touches.length > 1) { if (this.painting && e.touches.length == 2) { this.painting = false; this.undo(); }; return; }; this.startStroke(); this.addPoint(com.wiris.system.JsDOMUtils.vg3(this.canvas, e.touches[0])); this.painting = true; if (com.wiris.system.JsDOMUtils.vh3.vi3()) com.wiris.system.JsDOMUtils.vR3(e); }, startStroke: function () { if (this.readOnly) return null; var stroke = new Array(); this.strokes.push(stroke); this.insertUndoItem({ type: "add", stroke: this.strokes[this.strokes.length - 1] }); return stroke; }, addPoint: function (vu1) { if (this.readOnly) return; if (this.strokes.length == 0) return; if (vu1[0] < 0 || vu1[1] < 0 || vu1[0] > this.canvasWidth || vu1[1] > this.canvasHeight) return; this.strokes[this.strokes.length - 1].push([this.itX(vu1[0]), this.itY(vu1[1]), haxe.Timer.stamp() * 1000]); this.fireRepaintAndRecognize(); }, deleteRedoBuffer: function () { this.undoBuffer.splice(this.undoPosition, this.undoBuffer.length - this.undoPosition); }, resetUndoBuffer: function () { this.undoBuffer = new Array(); this.undoPosition = 0; }, generateRequestId: function () { this.requestId = this.generateId(10); }, generateId: function (n) { var text = ""; var vj3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"; while (n > 0) { text += vj3.charAt(Std.random(vj3.length)); --n; }; return text; }, close: function () { if (this.element != null && this.element.parentNode != null) { com.wiris.js.JsHand.instances[this.instanceIndex][0] = null; this.element.parentNode.removeChild(this.element); } }, insertInto: function (parent) { com.wiris.system.JsDOMUtils.vk3(parent); parent.appendChild(this.getElement()); com.wiris.js.JsHand.instances[this.instanceIndex][0] = parent; }, getInstancePath: function () { return "com.wiris.js.JsHand.instances[" + this.instanceIndex + "][1]"; }, testErrorCallbacks: null, testSuccessCallbacks: null, helpTimeout: null, helpStoredUndoPosition: null, helpStoredUndoBuffer: null, helpStoredStrokes: null, moveDownButton: null, moveUpButton: null, createEditionStrokeButton: null, insertAfterPointButton: null, insertBeforePointButton: null, removePointButton: null, editionButton: null, creatingEditionStroke: null, editionPoint: null, editionStroke: null, movingPoint: null, editing: null, editionMode: null, recognitionType: null, alphabet: null, dir: null, grammar: null, structureList: null, symbolList: null, lineWidth: null, lineColor: null, recognitionDelay: null, previewZoom: null, toolbarHidden: null, readOnly: null, deletionGestureEnabled: null, lastDeletedStrokes: null, strokesDY: null, strokesDX: null, strokesZoom: null, undoPosition: null, undoBuffer: null, strokes: null, canvasHeight: null, canvasWidth: null, context: null, playing: null, painting: null, contextMenu: null, snackbar: null, tickContainer: null, canvasContainer: null, helpButton: null, modeButton: null, clearButton: null, redoButton: null, undoButton: null, toolbarElement: null, canvas: null, previewMathML: null, previewImage: null, element: null, sessionId: null, status: null, requestId: null, strokesSent: null, handListeners: null, recognitionTimer: null, strokesResult: null, errorMessage: null, recognitionScore: null, recognitionResult: null, resourceLoader: null, instanceIndex: null, __class__: com.wiris.js.JsHand }; com.wiris.system.ArrayEx = vp["com.wiris.system.ArrayEx"] = function () { }; com.wiris.system.ArrayEx.__name__ = ["com", "wiris", "system", "ArrayEx"]; com.wiris.system.ArrayEx.vl3 = function (a, b) { var vL1 = 0; while (vL1 < a.length) { var x = a[vL1]; ++vL1; if (x == b) return true; }; return false; }; com.wiris.system.ArrayEx.indexOf = function (a, b) { var vm3 = 0; while (vm3 < a.length) { if (a[vm3] == b) return vm3; ++vm3; }; return -1; }; com.wiris.e1_2 = vp["com.wiris.e1_2"] = function (v42, vn3) { this.v42 = v42; }; com.wiris.e1_2.__name__ = ["com", "wiris", "e1_2"]; com.wiris.e1_2.prototype = { vo3: function () { return this.v42; }, v42: null, __class__: com.wiris.e1_2 }; com.wiris.e1_3 = vp["com.wiris.e1_3"] = function () { }; com.wiris.e1_3.__name__ = ["com", "wiris", "e1_3"]; com.wiris.e1_3.prototype = { vp3: null, vq3: null, vr3: null, vs3: null, string: null, __class__: com.wiris.e1_3 }; com.wiris.e1_4 = vp["com.wiris.e1_4"] = function () { }; com.wiris.e1_4.__name__ = ["com", "wiris", "e1_4"]; com.wiris.e1_4.prototype = { vp3: null, vr3: null, string: null, __class__: com.wiris.e1_4 }; com.wiris.e1_5 = vp["com.wiris.e1_5"] = function () { this.vt3 = new Array(); this.vu3("navigator.userAgent", null, "Edge", null, "Edge"); this.vu3("navigator.userAgent", null, "Chrome", null, "Chrome"); this.vu3("navigator.userAgent", null, "OmniWeb", null, "OmniWeb"); this.vu3("navigator.vendor", null, "Apple", "Version", "Safari"); this.vu3(null, "window.opera", null, "Version", "Opera"); this.vu3("navigator.vendor", null, "iCab", null, "iCab"); this.vu3("navigator.vendor", null, "KDE", null, "Konkeror"); this.vu3("navigator.userAgent", null, "Firefox", null, "Firefox"); this.vu3("navigator.vendor", null, "Camino", null, "Camino"); this.vu3("navigator.userAgent", null, "Netscape", null, "Netscape"); this.vu3("navigator.userAgent", null, "MSIE", "MSIE", "Explorer"); this.vu3("navigator.userAgent", null, "Trident", "rv", "Explorer"); this.vu3("navigator.userAgent", null, "Gecko", "rv", "Mozilla"); this.vu3("navigator.userAgent", null, "Mozilla", "Mozilla", "Netscape"); this.vv3 = new Array(); this.vw3("navigator.platform", "Win", "Windows"); this.vw3("navigator.platform", "Mac", "Mac"); this.vw3("navigator.userAgent", "iPhone", "iOS"); this.vw3("navigator.userAgent", "iPad", "iOS"); this.vw3("navigator.userAgent", "Android", "Android"); this.vw3("navigator.platform", "Linux", "Linux"); if (window.matchMedia != null) this.vx3 = window.matchMedia("(any-pointer: coarse)").matches; else this.vx3 = false; this.vy3(); this.vz3(); this.v04 = this.vi3() || this.v14(); }; com.wiris.e1_5.__name__ = ["com", "wiris", "e1_5"]; com.wiris.e1_5.prototype = { v24: function () { return this.v04; }, v14: function () { return this.v34 == "Android"; }, v44: function () { return this.v34 == "Mac"; }, vi3: function () { return this.v34 == "iOS" || this.v34 == "Mac" && this.vx3; }, v54: function () { return this.vh3 == "Firefox"; }, v64: function () { return this.vh3 == "Safari"; }, v74: function () { return this.vh3 == "Chrome"; }, v84: function () { return this.vh3 == "Edge"; }, isIE: function () { return this.vh3 == "Explorer"; }, v94: function () { return this.vA4; }, vB4: function () { return this.v34; }, vC4: function () { return this.vh3; }, vD4: function (vs3, search) { var str = js.Boot.vV2(eval(vs3), String); var index = str.indexOf(search); if (index == -1) return null; return "" + Std.parseFloat(HxOverrides.substr(str, index + search.length + 1, null)); }, vz3: function () { var i = HxOverrides.iter(this.vv3); while (i.hasNext()) { var s = i.next(); var str = js.Boot.vV2(eval(s.string), String); if (str.indexOf(s.vr3) != -1) { this.v34 = s.vp3; return; } } }, vy3: function () { var i = HxOverrides.iter(this.vt3); while (i.hasNext()) { var b = i.next(); if (b.string != null) { var obj = eval(b.string); if (obj != null) { var str = js.Boot.vV2(obj, String); if (str.indexOf(b.vr3) != -1) { this.vh3 = b.vp3; this.vA4 = this.vD4("navigator.userAgent", b.vq3); if (this.vA4 == null) this.vA4 = this.vD4("navigator.appVersion", b.vq3); return; } } } } }, vw3: function (string, vr3, vp3) { var s = new com.wiris.e1_4(); s.string = string; s.vr3 = vr3; s.vp3 = vp3; this.vv3.push(s); }, vu3: function (string, vs3, vr3, vq3, vp3) { var b = new com.wiris.e1_3(); b.string = string; b.vs3 = vs3; b.vr3 = vr3; b.vq3 = vq3 != null ? vq3 : vp3; b.vp3 = vp3; this.vt3.push(b); }, vx3: null, v04: null, v34: null, vA4: null, vh3: null, vv3: null, vt3: null, __class__: com.wiris.e1_5 }; com.wiris.e1_6 = vp["com.wiris.e1_6"] = function (parent) { this.vE4 = js.Lib.document.createElement("div"); this.vE4.className = this.vF4() + " " + this.vG4(); this.insertInto(parent); this.vH4 = 0; this.vI4 = null; this.mouse = [0, 0]; this.vJ4 = true; this.vK4 = null; this.hidden = true; com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "mousemove", v52(this, this.vL4)); }; com.wiris.e1_6.__name__ = ["com", "wiris", "e1_6"]; com.wiris.e1_6.vM4 = function (element, parent, vN4, vO4, vP4, vQ4) { if (vQ4 == null) vQ4 = false; if (vP4 == null) vP4 = true; return function (mouse) { var x = com.wiris.system.JsDOMUtils.vR4(element, parent) + vN4; var y = com.wiris.system.JsDOMUtils.vS4(element, parent) + vO4; if (vQ4) { x += mouse[0] - com.wiris.system.JsDOMUtils.getLeft(element); y += mouse[1] - com.wiris.system.JsDOMUtils.getTop(element); } else if (vP4) y += element.offsetHeight; return [x, y]; }; }; com.wiris.e1_6.prototype = { vG4: function () { return "wrs_hidden"; }, vF4: function () { return "wrs_contextPanel"; }, getElement: function () { return this.vE4; }, vT4: function (x, w, min, max) { if (x < min) return min; if (x + w > max) return max - w; return x; }, updateGUI: function () { var vU4 = this.vV4(this.mouse); var vW4 = this.vE4.firstChild.offsetWidth; var vX4 = this.vE4.firstChild.offsetHeight; var vY4 = this.vE4.parentNode.offsetWidth; var vZ4 = this.vE4.parentNode.offsetHeight; if (this.vJ4) { vU4[0] = this.vT4(vU4[0], vW4, 0, vY4); vU4[1] = this.vT4(vU4[1], vX4, 0, vZ4); }; this.vE4.style.left = vU4[0] + "px"; this.vE4.style.top = vU4[1] + "px"; if (this.vH4 != 0) { this.vE4.style.width = this.vE4.firstChild.offsetWidth + "px"; this.vE4.style.height = this.vE4.firstChild.offsetHeight + "px"; } }, va4: function (vV4, content, vK4, vH4, vb4, vJ4, vc4) { if (vJ4 == null) vJ4 = true; if (vb4 == null) vb4 = true; if (vH4 == null) vH4 = 0; var vL1 = this; this.vd4(); com.wiris.system.JsDOMUtils.vk3(this.vE4); this.vE4.appendChild(content); this.vE4.style.ve4 = "initial"; this.vE4.style.vf4 = "0"; this.vE4.style.width = ""; this.vE4.style.height = ""; com.wiris.system.JsDOMUtils.v22(this.vE4, this.vG4()); if (this.vI4 != null) com.wiris.system.JsDOMUtils.v22(this.vE4, this.vI4); if (vc4 != null) com.wiris.system.JsDOMUtils.v32(this.vE4, vc4); this.vI4 = vc4; this.vV4 = vV4; var vU4 = this.vV4(this.mouse); this.vE4.style.left = vU4[0] + "px"; this.vE4.style.top = vU4[1] + "px"; this.vH4 = vH4; this.vJ4 = vJ4; if ((vH4 & com.wiris.e1_6.vg4) != 0) this.vE4.style.width = "0"; else this.vE4.style.width = this.vE4.firstChild.offsetWidth + "px"; if ((vH4 & com.wiris.e1_6.vh4) != 0) this.vE4.style.height = "0"; else this.vE4.style.height = this.vE4.firstChild.offsetHeight + "px"; var initialize = function () { var self = vL1; self.vE4.style.ve4 = ""; self.vE4.style.vf4 = ""; self.updateGUI(); self.vi4 = setInterval(v52(self, self.updateGUI), 25); }; if (vH4 == 0) initialize(); else setTimeout(initialize, 1); this.vK4 = vK4; this.hidden = false; this.vj4 = com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "mousedown", v52(this, this.onDocumentMouseDown)); this.vk4 = com.wiris.system.JsDOMUtils.vl4(js.Lib.document, "keydown", v52(this, this.vm4), true); if (vb4) this.vn4 = com.wiris.system.JsDOMUtils.vb4(js.Lib.document.body, this.vE4); else this.vn4 = null; }, vm4: function (e) { if (e.keyCode == 27) { this.vd4(); e.stopPropagation(); } }, vL4: function (e) { this.mouse[0] = e.clientX; this.mouse[1] = e.clientY; }, onDocumentMouseDown: function (e) { var target = com.wiris.system.JsDOMUtils.vo4(e); if (!com.wiris.system.JsDOMUtils.vp4(this.vE4, target)) this.vd4(); }, vd4: function () { if (!this.hidden) { this.hidden = true; com.wiris.system.JsDOMUtils.v32(this.vE4, this.vG4()); com.wiris.system.JsDOMUtils.removeEventListener(this.vj4); com.wiris.system.JsDOMUtils.removeEventListener(this.vk4); if (this.vn4 != null) com.wiris.system.JsDOMUtils.vq4(this.vn4); if (this.vK4 != null) { this.vK4(); this.vK4 = null; }; clearInterval(this.vi4); } }, insertInto: function (parent) { if (this.vE4.parentNode != null) this.vE4.parentNode.removeChild(this.vE4); if (parent != null) parent.appendChild(this.vE4); }, vn4: null, vI4: null, vH4: null, vk4: null, vj4: null, vV4: null, vi4: null, vJ4: null, mouse: null, hidden: null, vE4: null, vK4: null, __class__: com.wiris.e1_6 }; com.wiris.system.JsDOMUtils = vp["com.wiris.system.JsDOMUtils"] = function () { }; com.wiris.system.JsDOMUtils.__name__ = ["com", "wiris", "system", "JsDOMUtils"]; com.wiris.system.JsDOMUtils.vr4 = null; com.wiris.system.JsDOMUtils.init = function () { if (com.wiris.system.JsDOMUtils.vs4) return; com.wiris.system.JsDOMUtils.vr4 = new HaxeHash(); com.wiris.system.JsDOMUtils.vr4.set("touchstart", "MSPointerDown"); com.wiris.system.JsDOMUtils.vr4.set("touchmove", "MSPointerMove"); com.wiris.system.JsDOMUtils.vr4.set("touchend", "MSPointerUp"); com.wiris.system.JsDOMUtils.vs4 = true; com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "MSPointerDown", function (e) { com.wiris.system.JsDOMUtils.vt4.set("" + e.vu4, e); }); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "MSPointerUp", function (e) { com.wiris.system.JsDOMUtils.vt4 = new HaxeHash(); }); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "scroll", function (e) { com.wiris.system.JsDOMUtils.vt4 = new HaxeHash(); }); var vv4 = false; var vw4 = function (vx4) { var i = HxOverrides.iter(vx4); while (i.hasNext()) { var vb2 = i.next(); vb2(); } }; com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "touchstart", function (e) { if (!com.wiris.system.JsDOMUtils.vh3.v04) { com.wiris.system.JsDOMUtils.vh3.v04 = true; vw4(com.wiris.system.JsDOMUtils.vy4); }; vv4 = true; }); var vz4 = function (e) { if (!com.wiris.system.JsDOMUtils.vh3.v04) { com.wiris.system.JsDOMUtils.vh3.v04 = true; vw4(com.wiris.system.JsDOMUtils.vy4); }; vv4 = true; setTimeout(function () { vv4 = false; }, 500); }; com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "touchend", vz4); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "touchleave", vz4); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "touchcancel", vz4); com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "mousemove", function (e) { if (!vv4) { if (com.wiris.system.JsDOMUtils.vh3.v04) { com.wiris.system.JsDOMUtils.vh3.v04 = false; vw4(com.wiris.system.JsDOMUtils.v05); } } }); }; com.wiris.system.JsDOMUtils.addEventListener = function (element, v15, v25) { return com.wiris.system.JsDOMUtils.vl4(element, v15, v25, false); }; com.wiris.system.JsDOMUtils.vl4 = function (element, v15, v25, v35) { if (navigator.vT3 && com.wiris.system.JsDOMUtils.vr4.exists(v15)) { v15 = com.wiris.system.JsDOMUtils.vr4.get(v15); return com.wiris.system.JsDOMUtils.vl4(element, v15, function (e) { if (e.v45 == "touch") { if (v15 == "MSPointerUp") com.wiris.system.JsDOMUtils.vt4.remove("" + e.vu4); else com.wiris.system.JsDOMUtils.vt4.set("" + e.vu4, e); e.touches = new Array(); var i = com.wiris.system.JsDOMUtils.vt4.iterator(); while (i.hasNext()) e.touches.push(i.next()); v25(e); } }, v35); }; if (v15 == "touchhold" && com.wiris.system.JsDOMUtils.vh3.v24()) { var v55 = null; var v65 = -1; var v75 = -1; var v85 = com.wiris.system.JsDOMUtils.vl4(element, "touchstart", function (e) { v95 = true; v65 = e.touches[0].clientX; v75 = e.touches[0].clientY; v55 = setTimeout(function () { v55 = null; v25(e); }, 500); }, v35); v85.vA5.push(com.wiris.system.JsDOMUtils.vl4(element, "touchmove", function (e) { if (v55 != null) { if (Math.abs(e.touches[0].clientX - v65) > com.wiris.system.JsDOMUtils.vB5 || Math.abs(e.touches[0].clientY - v75) > com.wiris.system.JsDOMUtils.vB5) { clearTimeout(v55); v55 = null; } else com.wiris.system.JsDOMUtils.vR3(e); } }, v35)); v85.vA5.push(com.wiris.system.JsDOMUtils.vl4(element, "touchend", function (e) { if (v55 != null) { clearTimeout(v55); v55 = null; } }, v35)); return v85; }; var v85 = {}; v85.element = element; v85.v15 = v15; v85.v25 = v25; v85.v35 = v35; v85.vA5 = new Array(); if (v15 == "dblclick") { var vC5 = null; var v95 = false; var vD5 = null; v85.vA5.push(com.wiris.system.JsDOMUtils.vl4(element, "touchstart", function (e) { v95 = true; vC5 = e; }, v35)); v85.vA5.push(com.wiris.system.JsDOMUtils.vl4(element, "touchmove", function (e) { v95 = false; }, v35)); v85.vA5.push(com.wiris.system.JsDOMUtils.vl4(element, "touchend", function (e) { if (v95) { v95 = false; var vE5 = new Date().getTime(); if (vD5 == null || vE5 > vD5 + 500) vD5 = vE5; else { vC5.vF5 = true; v25(e); } } }, v35)); }; if (element.attachEvent) element.attachEvent("on" + v15, function () { v25(window.event); }); else element.addEventListener(v15, v25, v35); return v85; }; com.wiris.system.JsDOMUtils.removeEventListener = function (v85) { if (com.wiris.system.JsDOMUtils.vh3.isIE() && v85.element.detachEvent) v85.element.detachEvent("on" + Std.string(v85.v15), v85.v25); else v85.element.removeEventListener(v85.v15, v85.v25, v85.v35); var i = vG5(v85.vA5)(); while (i.hasNext()) com.wiris.system.JsDOMUtils.removeEventListener(i.next()); }; com.wiris.system.JsDOMUtils.vR3 = function (e) { if (e.preventDefault) e.preventDefault(); else e.returnValue = false; }; com.wiris.system.JsDOMUtils.vH5 = function (element, v15) { var vC5; if (document.vI5) { vC5 = document.vI5("HTMLEvents"); vC5.vJ5(v15, true, true); vC5.v15 = v15; element.vK5(vC5); } else { vC5 = document.vL5(); vC5.vM5 = v15; vC5.v15 = v15; element.vH5("on" + v15, vC5); } }; com.wiris.system.JsDOMUtils.getComputedStyle = function (element) { if (element.currentStyle) return element.currentStyle; return document.defaultView.getComputedStyle(element, null); }; com.wiris.system.JsDOMUtils.vN5 = function (element, name) { var value; if (document.defaultView && document.defaultView.getComputedStyle) { var vO5 = document.defaultView.getComputedStyle(element, null); value = vO5 == null ? null : vO5.getPropertyValue(name); } else if (com.wiris.system.JsDOMUtils.vh3.isIE() && element.currentStyle) { var vP5 = com.wiris.system.JsDOMUtils.vQ5(name); value = element.currentStyle[vP5]; if (value != null && value.length > 0 && vP5 != "zoom") { var vR5 = HxOverrides.cca(value, 0); if (vR5 >= 48 && vR5 <= 57 && !StringTools.endsWith(value, "px")) { var vS5 = element.style.left; var vT5 = element.runtimeStyle ? element.runtimeStyle.left : null; if (vT5 != null) element.runtimeStyle.left = element.currentStyle.left; element.style.left = vP5 == "fontSize" ? "1em" : value; value = element.style.pixelLeft + "px"; element.style.left = vS5; if (vT5 != null) element.runtimeStyle.left = vT5; } } } else value = element.style[com.wiris.system.JsDOMUtils.vQ5(name)]; return value; }; com.wiris.system.JsDOMUtils.vU5 = function () { var context = document.createElement("canvas").getContext("2d"); var vV5 = window.vW5 || 1; var vX5 = context.vY5 || context.vZ5 || context.va5 || context.vb5 || context.vc5 || 1; return vV5 / vX5; }; com.wiris.system.JsDOMUtils.vQ5 = function (str) { var start = 0; var pos; var vd5 = new StringBuf(); while ((pos = str.indexOf("-", start)) != -1) { vd5.b += Std.string(HxOverrides.substr(str, start, pos - start)); vd5.b += Std.string(str.charAt(pos + 1).toUpperCase()); start = pos + 2; }; vd5.b += Std.string(HxOverrides.substr(str, start, null)); return vd5.b; }; com.wiris.system.JsDOMUtils.ve5 = function (parent, className, recursive) { var returnValue = new Array(); var vM1 = 0, vL1 = parent.childNodes.length; while (vM1 < vL1) { var i = vM1++; if (com.wiris.system.JsDOMUtils.v12(parent.childNodes[i], className)) returnValue.push(parent.childNodes[i]); if (recursive) returnValue = returnValue.concat(com.wiris.system.JsDOMUtils.ve5(parent.childNodes[i], className, true)); }; return returnValue; }; com.wiris.system.JsDOMUtils.vo4 = function (vC5) { if (vC5.srcElement) return vC5.srcElement; return vC5.target; }; com.wiris.system.JsDOMUtils.getLeft = function (element) { return element.getBoundingClientRect().left; }; com.wiris.system.JsDOMUtils.vR4 = function (element, parent) { if (parent == null) return com.wiris.system.JsDOMUtils.getLeft(element); return com.wiris.system.JsDOMUtils.getLeft(element) - com.wiris.system.JsDOMUtils.getLeft(parent); }; com.wiris.system.JsDOMUtils.getTop = function (element) { return element.getBoundingClientRect().top; }; com.wiris.system.JsDOMUtils.vS4 = function (element, parent) { if (parent == null) return com.wiris.system.JsDOMUtils.getTop(element); return com.wiris.system.JsDOMUtils.getTop(element) - com.wiris.system.JsDOMUtils.getTop(parent); }; com.wiris.system.JsDOMUtils.vf5 = function () { var scroll = new Array(); if (js.Lib.window.pageYOffset == undefined) { scroll[0] = js.Lib.document.documentElement.scrollLeft; scroll[1] = js.Lib.document.documentElement.scrollTop; } else { scroll[0] = js.Lib.window.pageXOffset; scroll[1] = js.Lib.window.pageYOffset; }; return scroll; }; com.wiris.system.JsDOMUtils.vg5 = function (scroll) { var x = scroll[0] | 0; var y = scroll[1] | 0; js.Lib.window.scrollTo(x, y); }; com.wiris.system.JsDOMUtils.vh5 = function (keyCode, rtl) { return keyCode == 37 && !rtl || keyCode == 39 && rtl; }; com.wiris.system.JsDOMUtils.vi5 = function (parent) { var vj5 = parent != null ? parent.firstChild : parent; while (vj5 != null) { if (com.wiris.system.JsDOMUtils.vN5(vj5, "display") != "none") return vj5; vj5 = vj5.nextSibling; }; return null; }; com.wiris.system.JsDOMUtils.vp4 = function (parent, vk5) { if (parent == null || vk5 == null) return false; while (vk5.parentNode != null) { if (vk5.parentNode == parent) return true; vk5 = vk5.parentNode; }; return false; }; com.wiris.system.JsDOMUtils.vl5 = function (x) { return x < 0 || x == null ? 0 : x; }; com.wiris.system.JsDOMUtils.vk3 = function (element) { while (element.firstChild != null) element.removeChild(element.firstChild); }; com.wiris.system.JsDOMUtils.v12 = function (element, className) { if (element == null || element.className == null || !(element.className.split)) return false; var vm5 = element.className.split(" "); var i = HxOverrides.iter(vm5); while (i.hasNext()) if (i.next() == className) return true; return false; }; com.wiris.system.JsDOMUtils.v32 = function (element, className) { if (element == null) return; if (element.className == "") element.className = className; else if (!com.wiris.system.JsDOMUtils.v12(element, className)) element.className += " " + className; }; com.wiris.system.JsDOMUtils.v22 = function (element, className) { if (element == null || element.className == null || !(element.className.split)) return; var vm5 = element.className.split(" "); HxOverrides.remove(vm5, className); element.className = vm5.join(" "); }; com.wiris.system.JsDOMUtils.vn5 = function (element, className) { if (com.wiris.system.JsDOMUtils.v12(element, className)) com.wiris.system.JsDOMUtils.v22(element, className); else com.wiris.system.JsDOMUtils.v32(element, className); }; com.wiris.system.JsDOMUtils.vT2 = function (element, className) { if (!com.wiris.system.JsDOMUtils.v12(element, className)) com.wiris.system.JsDOMUtils.v32(element, className); }; com.wiris.system.JsDOMUtils.vo5 = function (element, position, end) { if (element.setSelectionRange) element.setSelectionRange(position, end); else if (element.createTextRange) { var vp5 = element.createTextRange(); vp5.collapse(true); vp5.moveStart("character", position); vp5.moveEnd("character", end); vp5.select(); } }; com.wiris.system.JsDOMUtils.vq5 = function (element) { var vr5 = new Array(); if (element.selectionStart != null) { vr5[0] = element.selectionStart; vr5[1] = element.selectionEnd; return vr5; }; var vp5 = document.selection.createRange(); if (vp5 && vp5.parentElement() == element) { var length = element.value.length; var normalizedValue = element.value.split("\r\n").join("\n"); var vs5 = element.createTextRange(); vs5.moveToBookmark(vp5.getBookmark()); var vt5 = element.createTextRange(); vt5.collapse(false); if (vs5.compareEndPoints("StartToEnd", vt5) > -1) vr5[0] = vr5[1] = length; else { vr5[0] = -vs5.moveStart("character", -length); vr5[0] += normalizedValue.slice(0, vr5[0]).split("\n").length - 1; if (vs5.compareEndPoints("EndToEnd", vt5) > -1) vr5[1] = length; else { vr5[1] = -vs5.moveEnd("character", -length); vr5[1] += normalizedValue.slice(0, vr5[1]).split("\n").length - 1; } }; return vr5; }; return null; }; com.wiris.system.JsDOMUtils.vc3 = function (target, e) { if (e.vF5) return com.wiris.system.JsDOMUtils.vg3(target, e.touches[0]); var vu5 = new Array(); vu5[0] = target.scrollLeft; vu5[1] = target.scrollTop; return com.wiris.system.JsDOMUtils.vv5(target, e, vu5, 0); }; com.wiris.system.JsDOMUtils.vv5 = function (target, e, vu5, border) { var position = new Array(); position[0] = e.clientX - com.wiris.system.JsDOMUtils.getLeft(target) - border + vu5[0]; position[1] = e.clientY - com.wiris.system.JsDOMUtils.getTop(target) - border + vu5[1]; return position; }; com.wiris.system.JsDOMUtils.vw5 = function (target, e) { var vx5 = new Array(); vx5[0] = e.pageX; vx5[1] = e.pageY; return vx5; }; com.wiris.system.JsDOMUtils.vy5 = function (target, e) { var vu5 = new Array(); vu5[0] = target.scrollLeft; vu5[1] = target.scrollTop; return vu5; }; com.wiris.system.JsDOMUtils.vz5 = function (element) { while (element != null) { if (com.wiris.system.JsDOMUtils.vN5(element, "position") == "fixed") return true; element = element.offsetParent; }; return false; }; com.wiris.system.JsDOMUtils.vg3 = function (target, touch) { var vu5 = new Array(); vu5[0] = target.scrollLeft; vu5[1] = target.scrollTop; return com.wiris.system.JsDOMUtils.v06(target, touch, vu5, 0); }; com.wiris.system.JsDOMUtils.v06 = function (target, touch, vu5, border) { var position = new Array(); position[0] = touch.clientX - com.wiris.system.JsDOMUtils.getLeft(target) - border + vu5[0]; position[1] = touch.clientY - com.wiris.system.JsDOMUtils.getTop(target) - border + vu5[1]; return position; }; com.wiris.system.JsDOMUtils.v16 = function (e) { if (e.touches) return 1; if ("button" in e) return e.button + 1; return 0; }; com.wiris.system.JsDOMUtils.v26 = function (v36) { if (navigator.v26) navigator.v26(v36); }; com.wiris.system.JsDOMUtils.v46 = function (vb2) { com.wiris.system.JsDOMUtils.init(); com.wiris.system.JsDOMUtils.vy4.push(vb2); }; com.wiris.system.JsDOMUtils.v56 = function (vb2) { com.wiris.system.JsDOMUtils.init(); com.wiris.system.JsDOMUtils.v05.push(vb2); }; com.wiris.system.JsDOMUtils.v66 = function (v76) { var v86 = js.Lib.document.getElementsByTagName("script"); var n = v86.length; var i = 0; while (i < n) { var src = v86[i].getAttribute("src"); if (v76.match(src)) return v86[i]; ++i; }; return null; }; com.wiris.system.JsDOMUtils.v96 = function (vA6) { if (window.com.wiris.js.defaultServicePath != null && StringTools.startsWith(window.com.wiris.js.defaultServicePath, "http://")) { var protocol = js.Lib.window.location.protocol; var vB6 = window.com.wiris.js.defaultServicePath.substr("http:".length); var v76 = new EReg("(http:|https:)" + vB6 + "/" + vA6, ""); if (com.wiris.system.JsDOMUtils.v66(v76) != null) protocol = v76.matched(1); if (protocol == "https:") { window.com.wiris.js.defaultServicePath = "https:" + vB6; if (window.com.wiris.js.defaultBasePath != null) window.com.wiris.js.defaultBasePath = "https:" + window.com.wiris.js.defaultBasePath.substr("http:".length); } } }; com.wiris.system.JsDOMUtils.vC6 = function (vD6, rules) { var style = js.Lib.document.createElement("style"); style.type = "text/css"; js.Lib.document.getElementsByTagName("head")[0].appendChild(style); if (style.sheet != null && style.sheet.insertRule != null) style.sheet.insertRule(vD6 + "{" + rules + "}", 0); else if (style.styleSheet != null) style.styleSheet.addRule(vD6, rules); else if (style.sheet != null) style.sheet.addRule(vD6, rules); }; com.wiris.system.JsDOMUtils.execCommand = function (command) { return document.execCommand(command); }; com.wiris.system.JsDOMUtils.vE6 = function (vg2) { var vh2 = js.Lib.document.getElementsByTagName("script"); var vi2 = null; var vM1 = 0, vL1 = vh2.length; while (vM1 < vL1) { var i = vM1++; var src = vh2[i].src; var j = src.lastIndexOf("/" + vg2); if (j >= 0) vi2 = HxOverrides.substr(src, 0, j); else if (src == vg2) vi2 = ""; }; if (vi2 != null && StringTools.startsWith(vi2, "http://") && js.Lib.window.location.protocol == "https:") vi2 = "https://" + HxOverrides.substr(vi2, "http://".length, null); return vi2; }; com.wiris.system.JsDOMUtils.vF6 = function (vG6, vF1) { var w = js.Lib.window; if (w.File && w.vH6 && w.vI6 && w.vJ6) { var d = vG6.vK6; var vL6 = d.createElement("input"); vL6.setAttribute("name", "data"); vL6.setAttribute("type", "file"); vG6.appendChild(vL6); com.wiris.system.JsDOMUtils.init(); com.wiris.system.JsDOMUtils.addEventListener(vL6, "change", function (e) { if (vL6.vM6.length) { var file = vL6.vM6[0]; var vN6 = new vH6(); vN6.onload = function (vO6) { vF1(vO6.target.result); }; vN6.vP6(file); }; vG6.removeChild(vL6); }); vL6.click(); } else throw "Browser incompatible with JavaScript File API."; }; com.wiris.system.JsDOMUtils.vQ6 = function (vG6, filename, vR6, vS6) { var d = vG6.vK6; var w = js.Lib.window; if (w.vJ6) { var blob = new vJ6([vS6], { 'type': vR6 }); var a = d.createElement("a"); if ('download' in a && w.URL) { a.href = w.URL.createObjectURL(blob); a.download = filename; vG6.appendChild(a); a.click(); vG6.removeChild(a); return; } }; throw "Browser incompatible with HTML object download anchors."; }; com.wiris.system.JsDOMUtils.vb4 = function (vT6, vU6) { var vV6 = com.wiris.system.JsDOMUtils.vf5(); var vW6 = vU6; var v85 = com.wiris.system.JsDOMUtils.addEventListener(js.Lib.document, "focusin", function (e) { vW6 = com.wiris.system.JsDOMUtils.vo4(e); }); v85.vA5.push(com.wiris.system.JsDOMUtils.addEventListener(vT6, "focusin", function (e) { var vX6 = com.wiris.system.JsDOMUtils.vo4(e); if (!com.wiris.system.JsDOMUtils.vp4(vU6, vX6)) { com.wiris.system.JsDOMUtils.vg5(vV6); var vY6 = com.wiris.system.JsDOMUtils.vZ6(js.Lib.document.body); var va6 = 0; while (va6 < vY6.length) { if (vY6[va6] == vX6) break; ++va6; }; var direction = vW6 == vX6 || com.wiris.system.JsDOMUtils.vb6(vW6, vX6) ? 1 : -1; var vc6 = com.wiris.system.JsDOMUtils.vd6(vY6, vT6, vU6, va6, direction); if (vc6 != null) vc6.focus(); e.stopPropagation(); } else vV6 = com.wiris.system.JsDOMUtils.vf5(); })); var vX6 = js.Lib.document.ve6; if (!com.wiris.system.JsDOMUtils.vp4(vU6, vX6)) { com.wiris.system.JsDOMUtils.vg5(vV6); var vY6 = com.wiris.system.JsDOMUtils.vZ6(js.Lib.document.body); var va6 = 0; while (va6 < vY6.length) { if (vY6[va6] == vX6) break; ++va6; }; var vc6 = com.wiris.system.JsDOMUtils.vd6(vY6, vT6, vU6, va6, 1); if (vc6 != null) vc6.focus(); }; return v85; }; com.wiris.system.JsDOMUtils.vd6 = function (vY6, vT6, vU6, va6, direction, vf6) { if (vf6 == null) vf6 = -100; if (va6 == 0 && vf6 == -100 && direction == -1) return com.wiris.system.JsDOMUtils.vd6(vY6, vT6, vU6, 0, 1, vY6.length - 1); var vg6 = va6; va6 += direction; while (va6 >= 0 && va6 < vY6.length && com.wiris.system.JsDOMUtils.vp4(vT6, vY6[va6]) && (!com.wiris.system.JsDOMUtils.vp4(vU6, vY6[va6]) || vY6[va6].offsetParent == null)) { va6 += direction; if (va6 == vf6) return null; }; if (va6 < 0) return com.wiris.system.JsDOMUtils.vd6(vY6, vT6, vU6, vY6.length - 1, -1, vg6); if (va6 >= vY6.length) return com.wiris.system.JsDOMUtils.vd6(vY6, vT6, vU6, 0, 1, vg6); return vY6[va6]; }; com.wiris.system.JsDOMUtils.vq4 = function (v85) { com.wiris.system.JsDOMUtils.removeEventListener(v85); }; com.wiris.system.JsDOMUtils.vZ6 = function (vE4) { var elements = vE4.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])"); var vY6 = new Array(); var i = 0; while (i < elements.length) { if (com.wiris.system.JsDOMUtils.vN5(elements[i], "display") != "none" && com.wiris.system.JsDOMUtils.vN5(elements[i], "visibility") != "hidden") vY6.push(elements[i]); ++i; }; return vY6; }; com.wiris.system.JsDOMUtils.vb6 = function (vh6, vi6) { if (vh6 == vi6) throw "Trying to compare the same element."; var vj6 = com.wiris.system.JsDOMUtils.vk6(vh6); var vl6 = com.wiris.system.JsDOMUtils.vk6(vi6); var i = 1; var n = Math.min(vj6.length, vl6.length) | 0; while (i < n) { if (vj6[i] != vl6[i]) return com.wiris.system.JsDOMUtils.vm6(vj6[i]) < com.wiris.system.JsDOMUtils.vm6(vl6[i]); ++i; }; return false; }; com.wiris.system.JsDOMUtils.vn6 = function (element) { return !!(element.offsetWidth || element.offsetHeight || element.vo6().length); }; com.wiris.system.JsDOMUtils.vk6 = function (element) { var path = new Array(); while (element != null) { path.splice(0, 0, element); element = element.parentNode; }; return path; }; com.wiris.system.JsDOMUtils.vm6 = function (element) { if (element.parentNode == null) return -1; var i = 0; while (i < element.parentNode.childNodes.length) { if (element.parentNode.childNodes[i] == element) return i; ++i; }; return -1; }; com.wiris.e1_7 = vp["com.wiris.e1_7"] = function (parent) { this.vE4 = js.Lib.document.createElement("div"); this.vE4.className = "wrs_snackbar wrs_hidden"; this.insertInto(parent); this.hidden = true; }; com.wiris.e1_7.__name__ = ["com", "wiris", "e1_7"]; com.wiris.e1_7.prototype = { hide: function () { if (!this.hidden) { this.hidden = true; com.wiris.system.JsDOMUtils.v32(this.vE4, "wrs_hidden"); } }, show: function (v42, vp6, vq6) { this.hide(); com.wiris.system.JsDOMUtils.vk3(this.vE4); var vr6 = null; if (vp6 != null && vq6 != null) { vr6 = js.Lib.document.createElement("span"); vr6.className = "wrs_snackbarActionButton"; vr6.appendChild(js.Lib.document.createTextNode(vp6)); com.wiris.system.JsDOMUtils.addEventListener(vr6, "click", vq6); this.vE4.appendChild(vr6); }; var vs6 = js.Lib.document.createElement("span"); vs6.className = "wrs_snackbarMessage"; vs6.appendChild(js.Lib.document.createTextNode(v42)); this.vE4.appendChild(vs6); this.vE4.setAttribute("title", v42); com.wiris.system.JsDOMUtils.v22(this.vE4, "wrs_hidden"); this.hidden = false; if (vr6 != null) vs6.style.marginRight = vr6.offsetWidth + "px"; }, insertInto: function (parent) { if (this.vE4.parentNode != null) this.vE4.parentNode.removeChild(this.vE4); if (parent != null) parent.appendChild(this.vE4); }, hidden: null, vE4: null, __class__: com.wiris.e1_7 }; com.wiris.system.ResourceLoader = vp["com.wiris.system.ResourceLoader"] = function () { com.wiris.system.ResourceLoader.initialize(); this.basePath = ""; }; com.wiris.system.ResourceLoader.__name__ = ["com", "wiris", "system", "ResourceLoader"]; com.wiris.system.ResourceLoader.resourcesCache = null; com.wiris.system.ResourceLoader.initialize = function () { if (com.wiris.system.ResourceLoader.resourcesCache == null) com.wiris.system.ResourceLoader.resourcesCache = new HaxeHash(); com.wiris.system.ResourceLoader.createObject(window, "com.wiris.system.ResourceLoader.translations".split(".")); }; com.wiris.system.ResourceLoader.createObject = function (parent, vt6) { if (vt6.length == 0) return; var next = vt6.shift(); if (!parent[next]) parent[next] = {}; com.wiris.system.ResourceLoader.createObject(parent[next], vt6); }; com.wiris.system.ResourceLoader.newInstance = function (basePath) { var resourceLoader = new com.wiris.system.ResourceLoader(); if (basePath.length > 0 && !StringTools.endsWith(basePath, "/")) basePath += "/"; resourceLoader.basePath = basePath; return resourceLoader; }; com.wiris.system.ResourceLoader.prototype = { getPath: function (path) { path += (path.indexOf("?") >= 0 ? "&" : "?") + "v=" + this.loadResource("version.txt"); if (StringTools.startsWith(path, "http://") || StringTools.startsWith(path, "https://")) return path; return this.basePath + path; }, loadStaticResource: function (path) { if (path == "editor_definition.xml") return com.wiris.system.ResourceLoader.editorDefinition; if (path == "image_definition.xml") return com.wiris.system.ResourceLoader.imageDefinition; if (path == "image_definition_1_5.xml") return com.wiris.system.ResourceLoader.imageDefinition1_5; if (path == "image_definition_2.xml") return com.wiris.system.ResourceLoader.imageDefinition2; if (path == "characters.xml") return com.wiris.system.ResourceLoader.charactersDefinition; if (path == "version.txt") { if (com.wiris.system.ResourceLoader.version == null) { }; return com.wiris.system.ResourceLoader.version; }; if (path == "font_adjust.xml") return com.wiris.system.ResourceLoader.fontAdjust; if (StringTools.startsWith(path, "lang/")) { var lang = HxOverrides.substr(path, 5, path.lastIndexOf(".") - 5); if (com.wiris.system.ResourceLoader.translations[lang]) return com.wiris.system.ResourceLoader.translations[lang]; lang = lang.toLowerCase(); lang = lang.split("-").join("_"); if (com.wiris.system.ResourceLoader.translations[lang]) return com.wiris.system.ResourceLoader.translations[lang]; lang = HxOverrides.substr(lang, 0, 2); if (com.wiris.system.ResourceLoader.translations[lang]) return com.wiris.system.ResourceLoader.translations[lang]; }; return null; }, loadResource: function (path) { var vu6 = this.loadStaticResource(path); if (vu6 != null) return vu6; vu6 = haxe.Resource.vv6(path); if (vu6 != null) return vu6; return null; }, basePath: null, __class__: com.wiris.system.ResourceLoader }; com.wiris.system.ServiceProvider = vp["com.wiris.system.ServiceProvider"] = function () { }; com.wiris.system.ServiceProvider.__name__ = ["com", "wiris", "system", "ServiceProvider"]; com.wiris.system.ServiceProvider.vS3 = null; com.wiris.system.ServiceProvider.vd2 = function (serviceName, parameters, vn3, listener) { var servicesPackage = eval("c" + "om.wiris.editor") ? eval("c" + "om.wiris.editor.formula.services") : null; if (serviceName == "mathml2internal" && servicesPackage && eval("servicesPackage.MathMLToInternalService")) { var vw6 = eval("new servicesPackage.MathMLToInternalService()"); var vx6 = Std.string(vw6.toInternal(parameters.get("mml"))) + ""; listener.serviceAnswerReceived(serviceName, parameters, 200, vx6); } else if (serviceName == "content2mathml" && servicesPackage) listener.serviceAnswerReceived(serviceName, parameters, 200, parameters.get("mml")); else if (serviceName == "tick" && servicesPackage && eval("servicesPackage.TickService")) { var vw6 = eval("new servicesPackage.TickService()"); var vy6 = Std.string(vw6.vz6()) + ""; listener.serviceAnswerReceived(serviceName, parameters, 200, vy6); } else com.wiris.system.ServiceProvider.v07(serviceName, true, parameters, vn3, listener); }; com.wiris.system.ServiceProvider.vc2 = function (url, parameters, vn3, listener) { com.wiris.system.ServiceProvider.v07(url, false, parameters, vn3, listener); }; com.wiris.system.ServiceProvider.v07 = function (target, v17, parameters, vn3, listener) { if (com.wiris.system.ServiceProvider.v27 == com.wiris.system.ServiceProvider.v37) com.wiris.system.ServiceProvider.v47(target, v17, parameters, listener); else if (com.wiris.system.ServiceProvider.v27 == com.wiris.system.ServiceProvider.vn1) com.wiris.system.ServiceProvider.v57(target, v17, parameters, vn3, listener); }; com.wiris.system.ServiceProvider.v47 = function (target, v17, parameters, listener) { var url = v17 || !(StringTools.startsWith(target, "http://") || StringTools.startsWith(target, "https://")) ? com.wiris.system.ServiceProvider.getURL(target) : target; var v67 = (url.indexOf("?") == -1 ? "?" : "&") + "jsonp=" + Type.getClassName(com.wiris.system.ServiceProvider) + ".answer_" + com.wiris.system.ServiceProvider.v77 + "&httpstatus=true"; if (parameters != null) { var i = parameters.keys(); while (i.hasNext()) { var key = i.next(); v67 += "&" + StringTools.urlEncode(key) + "=" + StringTools.urlEncode(parameters.get(key)); } }; if ((url + v67).length > com.wiris.system.ServiceProvider.v87) { var sessionVarName = "wirisAnswer_" + haxe.Md5.encode(v67); parameters.set("sessionVarName", sessionVarName); var iframe = js.Lib.document.createElement("iframe"); js.Lib.document.body.appendChild(iframe); iframe.src = "about:blank"; iframe.className = "wrs_hiddenButDisplayed"; var v97 = 0; com.wiris.system.JsDOMUtils.addEventListener(iframe, "load", function (e) { if (v97 == 0) { var form = iframe.contentWindow.document.createElement("form"); form.action = url; form.method = "POST"; iframe.contentWindow.document.body.appendChild(form); var i = parameters.keys(); while (i.hasNext()) { var key = i.next(); var input = iframe.contentWindow.document.createElement("input"); input.type = "hidden"; input.name = key; input.value = parameters.get(key); form.appendChild(input); }; form.submit(); } else if (v97 == 1) { iframe.parentNode.removeChild(iframe); var vA7 = new HaxeHash(); vA7.set("sessionVarName", sessionVarName); if (v17) com.wiris.system.ServiceProvider.vd2("computedAnswer", vA7, null, listener); else com.wiris.system.ServiceProvider.vc2(com.wiris.system.ServiceProvider.getURL("computedAnswer"), vA7, null, listener); }; ++v97; }); } else { var vB7 = new HaxeHash(); vB7.set("id", com.wiris.system.ServiceProvider.v77); if (v17) vB7.set("serviceName", target); else vB7.set("url", target); vB7.set("parameters", parameters); vB7.set("listener", listener); vB7.set("created", new Date().getTime()); com.wiris.system.ServiceProvider.vC7.push(vB7); if (com.wiris.system.ServiceProvider.vS3 == null) { com.wiris.system.ServiceProvider.vS3 = new haxe.Timer(100); com.wiris.system.ServiceProvider.vS3.run = com.wiris.system.ServiceProvider.tick; }; var script = js.Lib.document.createElement("script"); script.setAttribute("src", url + v67); js.Lib.document.body.appendChild(script); ++com.wiris.system.ServiceProvider.v77; } }; com.wiris.system.ServiceProvider.v57 = function (target, v17, parameters, vn3, listener) { var url = v17 || !(StringTools.startsWith(target, "http://") || StringTools.startsWith(target, "https://")) ? com.wiris.system.ServiceProvider.getURL(target) : target; var v67 = (url.indexOf("?") == -1 ? "?" : "&") + "httpstatus=true"; var vD7 = com.wiris.system.ServiceProvider.vE7(); vD7.onreadystatechange = function () { if (vD7.readyState != 4) return; if (v17) listener.serviceAnswerReceived(target, parameters, vD7.status, vD7.responseText); else listener.urlAnswerReceived(target, parameters, vD7.status, vD7.responseText); }; var postData = null; var method = "POST"; vD7.open(method, url + v67, true); vD7.vF7 = com.wiris.system.ServiceProvider.vG7; vD7.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8"); if (parameters == null) parameters = new HaxeHash(); com.wiris.system.ServiceProvider.vH7(parameters, vn3); var i = parameters.keys(); var vI7 = new Array(); while (i.hasNext()) { var key = i.next(); vI7.push(StringTools.urlEncode(key) + "=" + StringTools.urlEncode(parameters.get(key))); }; postData = vI7.join("&"); vD7.send(postData); }; com.wiris.system.ServiceProvider.vH7 = function (parameters, vn3) { if (com.wiris.system.ServiceProvider.vJ7 == null) throw "Error: deploymentId is not set."; parameters.set("wrs-license", com.wiris.system.ServiceProvider.vK7); parameters.set("wrs-deployment", com.wiris.system.ServiceProvider.vJ7); parameters.set("wrs-cause", vn3); }; com.wiris.system.ServiceProvider.vZ3 = function (vn3) { if (com.wiris.system.ServiceProvider.vJ7 == null) throw "Error: deploymentId is not set."; var params = "wrs-license=" + com.wiris.system.ServiceProvider.vK7; params += "&wrs-deployment=" + com.wiris.system.ServiceProvider.vJ7; params += "&wrs-cause=" + vn3; return params; }; com.wiris.system.ServiceProvider.vE7 = function () { var i = HxOverrides.iter(com.wiris.system.ServiceProvider.vL7); while (i.hasNext()) { var vM7 = i.next(); try { return vM7(); } catch (e) { } }; throw "Unable to create XMLHttpRequest object."; }; com.wiris.system.ServiceProvider.getURL = function (serviceName) { var basePath = null; if (com.wiris.system.ServiceProvider.vi2 != null) basePath = com.wiris.system.ServiceProvider.vi2; else if (window.com.wiris.js.defaultServicePath) basePath = window.com.wiris.js.defaultServicePath; else if (window.com.wiris.js.defaultBasePath) { var defaultBasePath = window.com.wiris.js.defaultBasePath; var vN7 = defaultBasePath.split("/"); vN7.pop(); basePath = vN7.join("/"); }; var baseUrl = ""; if (basePath != null) baseUrl = basePath + "/"; else haxe.Log.trace("trying to call a service with a null basePath", { fileName: "ServiceProvider.hx", lineNumber: 328, className: "com.wiris.system.ServiceProvider", methodName: "getURL" }); return baseUrl + serviceName; }; com.wiris.system.ServiceProvider.tick = function () { var i = 0; while (i < com.wiris.system.ServiceProvider.vC7.length) { var vO7 = com.wiris.system.ServiceProvider.vC7[i].get("id"); if (("answer_" + vO7) in com.wiris.system.ServiceProvider) { var target = com.wiris.system.ServiceProvider.vC7[i].get("serviceName"); var parameters = com.wiris.system.ServiceProvider.vC7[i].get("parameters"); var listener = com.wiris.system.ServiceProvider.vC7[i].get("listener"); var status = 200; var vZ2 = com.wiris.system.ServiceProvider["answer_" + vO7]; if (("answer_" + vO7 + "_full") in com.wiris.system.ServiceProvider) status = com.wiris.system.ServiceProvider["answer_" + vO7 + "_full"].status; if (target == null) { target = com.wiris.system.ServiceProvider.vC7[i].get("url"); com.wiris.system.ServiceProvider.vC7.splice(i, 1); listener.urlAnswerReceived(target, parameters, status, vZ2); } else { com.wiris.system.ServiceProvider.vC7.splice(i, 1); listener.serviceAnswerReceived(target, parameters, status, vZ2); } } else if (com.wiris.system.ServiceProvider.vC7[i].get("created") + com.wiris.system.ServiceProvider.TIMEOUT < new Date().getTime()) { com.wiris.system.ServiceProvider["answer_" + vO7 + "_full"] = { status: 0, data: "Error: timeout waiting for response." }; com.wiris.system.ServiceProvider["answer_" + vO7] = com.wiris.system.ServiceProvider["answer_" + vO7 + "_full"].data; } else ++i; }; if (com.wiris.system.ServiceProvider.vC7.length == 0) { com.wiris.system.ServiceProvider.vS3.stop(); com.wiris.system.ServiceProvider.vS3 = null; } }; com.wiris.system.ServiceProvider.addObject = function (d) { }; com.wiris.system.ServiceProvider.i = function (str) { return eval(str); }; com.wiris.system.ServiceProvider.vP7 = function () { return com.wiris.system.ServiceProvider.vG7; }; com.wiris.system.ServiceProvider.vm1 = function (v27) { com.wiris.system.ServiceProvider.v27 = v27; }; com.wiris.system.ServiceProvider.vq1 = function (vi2) { com.wiris.system.ServiceProvider.vi2 = vi2; }; com.wiris.system.ServiceProvider.vX2 = function (vQ7) { com.wiris.system.ServiceProvider.vG7 = vQ7; }; com.wiris.system.ServiceProvider.vY2 = function (license) { com.wiris.system.ServiceProvider.vK7 = license; }; com.wiris.system.ServiceProvider.vo1 = function (vR7) { com.wiris.system.ServiceProvider.vJ7 = vR7; }; com.wiris.system.StringEx = vp["com.wiris.system.StringEx"] = function () { }; com.wiris.system.StringEx.__name__ = ["com", "wiris", "system", "StringEx"]; com.wiris.system.StringEx.substring = function (s, start, end) { if (end == null) return HxOverrides.substr(s, start, null); return HxOverrides.substr(s, start, end - start); }; com.wiris.system.StringEx.vS7 = function (vT7, vU7) { if (vT7 > vU7) return 1; if (vT7 < vU7) return -1; return 0; }; com.wiris.system.System = vp["com.wiris.system.System"] = function () { }; com.wiris.system.System.__name__ = ["com", "wiris", "system", "System"]; com.wiris.system.System.vV7 = function (src, vW7, vX7, vY7, n) { var vL1 = 0; while (vL1 < n) { var i = vL1++; vX7[vY7 + i] = src[vW7 + i]; } }; com.wiris.system.TypeTools = vp["com.wiris.system.TypeTools"] = function () { }; com.wiris.system.TypeTools.__name__ = ["com", "wiris", "system", "TypeTools"]; com.wiris.system.TypeTools.vZ7 = function (value) { return "" + value; }; com.wiris.system.TypeTools.va7 = function (str) { var vb7 = new EReg("^[+-]?\\d*\\.?\\d+([eE][+-]?\\d+)?$", ""); return vb7.match(str); }; com.wiris.system.TypeTools.vl1 = function (str) { var vb7 = new EReg("^[+-]?\\d+$", ""); return vb7.match(str); }; com.wiris.system.TypeTools.vc7 = function (c) { var vd7 = new EReg("[a-z]", "i"); var ve7 = new EReg("[0-9]", ""); var str = String.fromCharCode(c); return vd7.match(str) || ve7.match(str) || str == "_"; }; com.wiris.system.TypeTools.vf7 = function (c) { var vd7 = new EReg("[a-z]", "i"); var str = String.fromCharCode(c); return vd7.match(str) || str == "_"; }; com.wiris.system.TypeTools.vg7 = function (o) { return js.Boot.__instanceof(o, Array); }; com.wiris.system.TypeTools.vh7 = function (o) { return js.Boot.__instanceof(o, HaxeHash); }; com.wiris.system.TypeTools.vi7 = function (str) { var data = new Array(); var vM1 = 0, vL1 = str.length; while (vM1 < vL1) { var i = vM1++; data.push(HxOverrides.cca(str, i)); }; var bytes = haxe.io.Bytes.ofData(data); return bytes; }; com.wiris.system.TypeTools.vj7 = function (params) { if (params == null) return null; var vk7 = {}; var i = params.keys(); while (i.hasNext()) { var key = i.next(); var value = params.get(key); vk7[key] = value; }; return vk7; }; com.wiris.system.TypeTools.vl7 = function (vm7, vn7, vo7) { var vp7 = new haxe.Int64(vn7, vo7); var vq7 = 0 | 0; var vr7 = 2047 | 0; var vs7 = new haxe.Int64(vq7, vr7); var vt7 = 1048575 | 0; var vu7 = -1 | 0; var vv7 = new haxe.Int64(vt7, vu7); var vw7 = 1048576 | 0; var vx7 = 0 | 0; var vy7 = new haxe.Int64(vw7, vx7); var vz7 = new haxe.Int64(vp7.v08 >> 31, vp7.v08 >> 31); var s = (vz7.v08 | vz7.v18) == 0 ? 1 : -1; var v28 = new haxe.Int64(vp7.v08 >> 31, vp7.v08 >> 20); var v38 = new haxe.Int64(v28.v08 & vs7.v08, v28.v18 & vs7.v18); var v48 = v38; var v58 = new haxe.Int64(vp7.v08 & vv7.v08, vp7.v18 & vv7.v18); var v68 = new haxe.Int64(v58.v08 << 1 | v58.v18 >>> 31, v58.v18 << 1); var v78 = new haxe.Int64(v58.v08 | vy7.v08, v58.v18 | vy7.v18); var v88 = (v48.v08 | v48.v18) == 0 ? v68 : v78; var v98 = v48.toString(); var e = Std.parseFloat(v98); var vA8 = v88.toString(); var m = Std.parseFloat(vA8); var vB8 = s * Math.pow(2, e - 1075) * m; return vB8; }; com.wiris.system.TypeTools.vC8 = function (vD8) { var s = vD8 >> 31 == 0 ? 1 : -1; var e = vD8 >> 23 & 255; var m = e == 0 ? (vD8 & 8388607) << 1 : vD8 & 8388607 | 8388608; return s * m * Math.pow(2, e - 150); }; com.wiris.e1_8 = vp["com.wiris.e1_8"] = function () { }; com.wiris.e1_8.__name__ = ["com", "wiris", "e1_8"]; com.wiris.e1_8.vE8 = function (s, position, vF8, vG8) { if (vG8 == null) vG8 = 0; if (vF8 == null) vF8 = 0; var vH8 = vF8; var vI8 = vG8; var vJ8 = s.length; while (vH8 < vJ8 && vI8 < position) { var charCode = HxOverrides.cca(s, vH8); if (charCode < 55296 || charCode > 56319) ++vI8; ++vH8; }; return vH8; }; com.wiris.e1_8.vK8 = function (s) { var vH8 = 0; var vJ8 = s.length; var vL8 = 0; while (vH8 < vJ8) { var charCode = HxOverrides.cca(s, vH8); if (charCode < 55296 || charCode > 56319) ++vL8; ++vH8; }; return vL8; }; com.wiris.e1_8.charCodeAt = function (s, i) { var vH8 = com.wiris.e1_8.vE8(s, i, null, null); var charCode = HxOverrides.cca(s, vH8); return charCode < 55296 || charCode > 56319 ? charCode : (charCode - 55296) * 1024 + HxOverrides.cca(s, vH8 + 1) - 56320 + 65536; }; com.wiris.e1_8.charAt = function (s, i) { return com.wiris.e1_8.vj1(com.wiris.e1_8.charCodeAt(s, i)); }; com.wiris.e1_8.vj1 = function (i) { var s = new haxe.Utf8(); if (i < 65536) s.vM8 += String.fromCharCode(i); else if (i <= 1114111) { s.vM8 += String.fromCharCode((i >> 10) + 55232); s.vM8 += String.fromCharCode((i & 1023) + 56320); } else throw "Invalid code point."; return s.vM8; }; com.wiris.e1_8.sub = function (s, pos, len) { var start = com.wiris.e1_8.vE8(s, pos, null, null); var end = com.wiris.e1_8.vE8(s, pos + len, start, pos); return HxOverrides.substr(s, start, end - start); }; com.wiris.e1_8.vN8 = function (s) { return haxe.io.Bytes.ofString(s).b; }; com.wiris.e1_8.vO8 = function (s) { var vP8 = haxe.io.Bytes.ofData(s); return vP8.toString(); }; com.wiris.e1_8.vQ8 = function (s) { return new com.wiris.e1_9(s); }; com.wiris.e1_8.prototype = { __class__: com.wiris.e1_8 }; if (!com.wiris.system._Utf8) com.wiris.system._Utf8 = {}; com.wiris.e1_9 = vp["com.wiris.e1_9"] = function (s) { this.vR2 = s; this.n = this.vR2.length; this.vR8 = 0; }; com.wiris.e1_9.__name__ = ["com", "wiris", "e1_9"]; com.wiris.e1_9.prototype = { next: function () { var c = HxOverrides.cca(this.vR2, this.vR8++); if (c >= 55296 && c < 57344) { var vS8 = HxOverrides.cca(this.vR2, this.vR8++); c = ((c & 1023) << 10 | vS8 & 1023) + 65536; }; return c; }, vT8: function () { return HxOverrides.cca(this.vR2, this.vR8++); }, hasNext: function () { return this.vR8 < this.n; }, vR2: null, n: null, vR8: null, __class__: com.wiris.e1_9 }; if (!com.wiris.util) com.wiris.util = {}; if (!com.wiris.util.graphics) com.wiris.util.graphics = {}; com.wiris.e1_A = vp["com.wiris.e1_A"] = function () { com.wiris.e1_A.init(); this.vU8 = [0, 0, 0]; this.vV8 = 255; }; com.wiris.e1_A.__name__ = ["com", "wiris", "e1_A"]; com.wiris.e1_A.vW8 = null; com.wiris.e1_A.init = function () { if (com.wiris.e1_A.vW8 == null) { com.wiris.e1_A.vW8 = new HaxeHash(); com.wiris.e1_A.vW8.set("white", [255, 255, 255]); com.wiris.e1_A.vW8.set("black", [0, 0, 0]); com.wiris.e1_A.vW8.set("red", [255, 0, 0]); com.wiris.e1_A.vW8.set("green", [0, 255, 0]); com.wiris.e1_A.vW8.set("blue", [0, 0, 255]); com.wiris.e1_A.vW8.set("cyan", [0, 255, 255]); com.wiris.e1_A.vW8.set("magenta", [255, 0, 255]); com.wiris.e1_A.vW8.set("yellow", [255, 255, 0]); com.wiris.e1_A.vW8.set("brown", [180, 60, 0]); com.wiris.e1_A.vW8.set("orange", [255, 200, 0]); com.wiris.e1_A.vW8.set("pink", [255, 192, 203]); com.wiris.e1_A.vW8.set("grey", [128, 128, 128]); com.wiris.e1_A.vW8.set("light_grey", [192, 192, 192]); com.wiris.e1_A.vW8.set("dark_grey", [64, 64, 64]); } }; com.wiris.e1_A.vX8 = function (text) { var color = new com.wiris.e1_A(); color.vY8(text); return color; }; com.wiris.e1_A.vZ8 = function (vU8) { var color = new com.wiris.e1_A(); color.va8(vU8); return color; }; com.wiris.e1_A.vb8 = function (vc8) { var color = new com.wiris.e1_A(); color.vd8(vc8); return color; }; com.wiris.e1_A.ve8 = function (vU8) { var color = new com.wiris.e1_A(); color.vf8(vU8); return color; }; com.wiris.e1_A.vg8 = function (vc8) { var color = new com.wiris.e1_A(); color.vh8(vc8); return color; }; com.wiris.e1_A.vi8 = function (text) { if (com.wiris.e1_A.vW8 == null) com.wiris.e1_A.vW8 = new HaxeHash(); if (com.wiris.e1_A.vW8.exists(text)) return true; if (HxOverrides.cca(text, 0) == 35 && (text.length == 7 || text.length == 9)) return true; if (HxOverrides.cca(text, 0) == 123) return true; return false; }; com.wiris.e1_A.prototype = { vj8: function () { if (this.vk8() < 128) return com.wiris.e1_A.ve8(16777215); return com.wiris.e1_A.ve8(0); }, vk8: function () { return 0.299 * this.vU8[0] + 0.587 * this.vU8[1] + 0.114 * this.vU8[2]; }, vl8: function (b) { if (b == null) return false; return this.vU8[0] == b.vU8[0] && this.vU8[1] == b.vU8[1] && this.vU8[2] == b.vU8[2] && this.vV8 == b.vV8; }, vh8: function (vc8) { this.vV8 = vc8 >> 24 & 255; this.vf8(vc8); }, vf8: function (vU8) { this.vU8[0] = vU8 >> 16 & 255; this.vU8[1] = vU8 >> 8 & 255; this.vU8[2] = vU8 & 255; }, vY8: function (text) { if (com.wiris.e1_A.vW8.exists(text)) this.vU8 = com.wiris.e1_A.vW8.get(text); else if (HxOverrides.cca(text, 0) == 35 && (text.length == 7 || text.length == 9)) { this.vU8 = new Array(); this.vU8[0] = Std.parseInt("0x" + HxOverrides.substr(text, 1, 2)); this.vU8[1] = Std.parseInt("0x" + HxOverrides.substr(text, 3, 2)); this.vU8[2] = Std.parseInt("0x" + HxOverrides.substr(text, 5, 2)); if (text.length == 9) this.vV8 = Std.parseInt("0x" + HxOverrides.substr(text, 7, 2)); else this.vV8 = 255; } else if (HxOverrides.cca(text, 0) == 123) { var i; var d = 0; this.vU8 = new Array(); var vd5 = new StringBuf(); i = 1; while (i < text.length && d < 4) { var c = HxOverrides.substr(text, i, 1); if (com.wiris.system.TypeTools.vl1(c)) vd5.b += Std.string(c); else if (vd5.b.length > 0) { if (d < 3) this.vU8[d++] = Std.parseInt(vd5.b); else this.vm8(255 * Std.parseFloat(vd5.b)); vd5 = new StringBuf(); }; ++i; } } else throw "Unrecognized color string: " + text; }, vn8: function () { return this.vV8 / 255.0; }, vm8: function (d) { var a = 255 * d & 255; if (a >= 0 || a <= 255) this.vV8 = a; else throw "Invalid alpha value: " + d; }, vd8: function (vc8) { this.vU8 = [vc8[0], vc8[1], vc8[2]]; this.vV8 = vc8[3]; }, va8: function (vU8) { this.vU8 = vU8; this.vV8 = 255; }, vo8: function () { var value = this.vp8(); if (value != null) return value; return this.vq8(); }, vr8: function () { return (this.vV8 & 255) << 24 | this.toInt() & 16777215; }, toInt: function () { return (this.vU8[0] & 255) << 16 | (this.vU8[1] & 255) << 8 | this.vU8[2] & 255; }, vp8: function () { if (this.vV8 != 255) return null; var v11 = com.wiris.e1_A.vW8.keys(); while (v11.hasNext()) { var name = v11.next(); var color = com.wiris.e1_A.vW8.get(name); if (this.vU8[0] == color[0] && this.vU8[1] == color[1] && this.vU8[2] == color[2]) return name; }; return null; }, vs8: function () { var vt8 = this.vp8(); if (vt8 != null) return vt8; return "{" + this.vU8[0] + "," + this.vU8[1] + "," + this.vU8[2] + "}"; }, vq8: function () { if (this.vV8 == 255) return "#" + StringTools.hex(this.vU8[0], 2) + StringTools.hex(this.vU8[1], 2) + StringTools.hex(this.vU8[2], 2); else return "#" + StringTools.hex(this.vU8[0], 2) + StringTools.hex(this.vU8[1], 2) + StringTools.hex(this.vU8[2], 2) + StringTools.hex(this.vV8, 2); }, vu8: function () { return [this.vU8[0], this.vU8[1], this.vU8[2], this.vV8]; }, vv8: function () { return [this.vU8[0], this.vU8[1], this.vU8[2]]; }, vV8: null, vU8: null, __class__: com.wiris.e1_A }; if (!com.wiris.util.json) com.wiris.util.json = {}; com.wiris.e1_B = vp["com.wiris.e1_B"] = function () { }; com.wiris.e1_B.__name__ = ["com", "wiris", "e1_B"]; com.wiris.e1_B.isBlank = function (c) { return c == 32 || c == 10 || c == 13 || c == 9 || c == 160; }; com.wiris.e1_B.prototype = { vw8: function (c) { if (c >= 48 && c <= 58) return true; if (c >= 97 && c <= 102) return true; if (c >= 65 && c <= 70) return true; return false; }, vx8: function () { var vy8 = com.wiris.common.WInteger.min(this.i, this.n); var vz8 = com.wiris.common.WInteger.max(0, this.i - 20); var v09 = com.wiris.common.WInteger.min(this.n, this.i + 20); return "..." + HxOverrides.substr(this.str, vz8, vy8 - vz8) + " >>> . <<<" + HxOverrides.substr(this.str, vy8, v09); }, v19: function () { if (this.i < this.n) { this.c = com.wiris.e1_8.charCodeAt(HxOverrides.substr(this.str, this.i, null), 0); this.i += com.wiris.e1_8.vj1(this.c).length; } else this.c = -1; }, v29: function () { if (this.c == -1) throw "End of string"; this.v19(); }, v39: function () { while (this.i < this.n && com.wiris.e1_B.isBlank(this.c)) this.v29(); }, init: function (str) { this.str = str; this.i = 0; this.n = str.length; this.v29(); }, str: null, c: null, n: null, i: null, __class__: com.wiris.e1_B }; com.wiris.e1_C = vp["com.wiris.e1_C"] = function () { com.wiris.e1_B.call(this); }; com.wiris.e1_C.__name__ = ["com", "wiris", "e1_C"]; com.wiris.e1_C.vd5 = null; com.wiris.e1_C.encode = function (o) { var js = new com.wiris.e1_C(); return js.v49(o); }; com.wiris.e1_C.decode = function (str) { var json = new com.wiris.e1_C(); return json.v59(str); }; com.wiris.e1_C.v69 = function (o) { if (com.wiris.system.TypeTools.vh7(o)) { var h = o; var m = 0; if (h.exists("_left_") || h.exists("_right_")) { if (h.exists("_left_")) m = com.wiris.common.WInteger.max(com.wiris.e1_C.v69(h.get("_left_")), m); if (h.exists("_right_")) m = com.wiris.common.WInteger.max(com.wiris.e1_C.v69(h.get("_right_")), m); return m; }; var iter = h.keys(); while (iter.hasNext()) { var key = iter.next(); m = com.wiris.common.WInteger.max(com.wiris.e1_C.v69(h.get(key)), m); }; return m + 2; } else if (com.wiris.system.TypeTools.vg7(o)) { var a = o; var i; var m = 0; var vM1 = 0, vL1 = a.length; while (vM1 < vL1) { var vy1 = vM1++; m = com.wiris.common.WInteger.max(com.wiris.e1_C.v69(a[vy1]), m); }; return m + 1; } else return 1; }; com.wiris.e1_C.vv6 = function (o) { return o; }; com.wiris.e1_C.v79 = function (n) { if (js.Boot.__instanceof(n, Float)) return n; else if (js.Boot.__instanceof(n, Int)) return n; else return 0.0; }; com.wiris.e1_C.v89 = function (n) { if (js.Boot.__instanceof(n, Float)) return Math.round(n); else if (js.Boot.__instanceof(n, Int)) return n; else return 0; }; com.wiris.e1_C.v99 = function (b) { return b; }; com.wiris.e1_C.vA9 = function (a) { return a; }; com.wiris.e1_C.vB9 = function (a) { return a; }; com.wiris.e1_C.vC9 = function (a) { return a; }; com.wiris.e1_C.__super__ = com.wiris.e1_B; com.wiris.e1_C.prototype = vr(com.wiris.e1_B.prototype, { vD9: function (vE9, vd5) { vd5.b += Std.string("\r\n"); var i; var vL1 = 0; while (vL1 < vE9) { var vy1 = vL1++; vd5.b += Std.string("  "); }; this.vF9 = vE9; }, vG9: function (vH9) { this.vH9 = vH9; }, vI9: function () { var v = new Array(); this.v29(); this.v39(); if (this.c == 93) { this.v29(); return v; }; while (this.c != 93) { var o = this.vJ9(); v.push(o); this.v39(); if (this.c == 44) { this.v29(); this.v39(); } else if (this.c != 93) throw "Expected ',' or ']'."; }; this.v29(); return v; }, vK9: function () { var h = new HaxeHash(); this.v29(); this.v39(); if (this.c == 125) { this.v29(); return h; }; while (this.c != 125) { var key = this.decodeString(); this.v39(); if (this.c != 58) throw "Expected ':'."; this.v29(); this.v39(); var o = this.vJ9(); h.set(key, o); this.v39(); if (this.c == 44) { this.v29(); this.v39(); } else if (this.c != 125) throw "Expected ',' or '}'. " + this.vx8(); }; this.v29(); return h; }, vL9: function () { var vd5 = new StringBuf(); var hex = false; var vM9 = false; do { vd5.b += Std.string(com.wiris.e1_8.vj1(this.c)); this.v29(); if (this.c == 120) { hex = true; vd5.b += Std.string(com.wiris.e1_8.vj1(this.c)); this.v29(); }; if (this.c == 46 || this.c == 69 || this.c == 101) vM9 = true; } while (this.c >= 48 && this.c <= 58 || hex && this.vw8(this.c) || vM9 && (this.c == 46 || this.c == 69 || this.c == 101 || this.c == 45)); if (vM9) return Std.parseFloat(vd5.b); else return Std.parseInt(vd5.b); }, decodeString: function () { var vd5 = new StringBuf(); var d = this.c; this.v29(); while (this.c != d) { if (this.c == 92) { this.v29(); if (this.c == 110) vd5.b += Std.string("\n"); else if (this.c == 114) vd5.b += Std.string("\r"); else if (this.c == 34) vd5.b += Std.string("\""); else if (this.c == 39) vd5.b += Std.string("'"); else if (this.c == 116) vd5.b += Std.string("\t"); else if (this.c == 92) vd5.b += Std.string("\\"); else if (this.c == 117) { this.v29(); var vN9 = com.wiris.e1_8.vj1(this.c); this.v29(); vN9 += com.wiris.e1_8.vj1(this.c); this.v29(); vN9 += com.wiris.e1_8.vj1(this.c); this.v29(); vN9 += com.wiris.e1_8.vj1(this.c); var vO9 = Std.parseInt("0x" + vN9); vd5.b += Std.string(com.wiris.e1_8.vj1(vO9)); } else throw "Unknown scape sequence '\\" + com.wiris.e1_8.vj1(this.c) + "'"; } else vd5.b += Std.string(com.wiris.e1_8.vj1(this.c)); this.v29(); }; this.v29(); return vd5.b; }, vP9: function () { var vd5 = new StringBuf(); while (com.wiris.util.xml.WCharacterBase.vQ9(this.c)) { vd5.b += String.fromCharCode(this.c); this.v29(); }; var word = vd5.b; if (word == "true") return true; else if (word == "false") return false; else if (word == "null") return null; else throw "Unrecognized keyword \"" + word + "\"."; }, vJ9: function () { this.v39(); if (this.c == 123) return this.vK9(); else if (this.c == 91) return this.vI9(); else if (this.c == 34) return this.decodeString(); else if (this.c == 39) return this.decodeString(); else if (this.c == 45 || this.c >= 48 && this.c <= 58) return this.vL9(); else if (this.c == 116 || this.c == 102 || this.c == 110) return this.vP9(); else throw "Unrecognized char " + this.c; }, v59: function (str) { this.init(str); return this.vJ9(); }, vR9: function (vd5, i) { vd5.b += Std.string(i.toString()); }, vS9: function (vd5, i) { vd5.b += Std.string("" + Std.string(i)); }, vT9: function (vd5, d) { vd5.b += Std.string(com.wiris.system.TypeTools.vZ7(d)); }, vU9: function (vd5, b) { vd5.b += Std.string(b ? "true" : "false"); }, vV9: function (vd5, i) { vd5.b += Std.string("" + i); }, encodeString: function (vd5, s) { s = StringTools.replace(s, "\\", "\\\\"); s = StringTools.replace(s, "\"", "\\\""); s = StringTools.replace(s, "\r", "\\r"); s = StringTools.replace(s, "\n", "\\n"); s = StringTools.replace(s, "\t", "\\t"); vd5.b += Std.string("\""); vd5.b += Std.string(s); vd5.b += Std.string("\""); }, vW9: function (vd5, v) { var vX9 = new Array(); var vL1 = 0; while (vL1 < v.length) { var s = v[vL1]; ++vL1; vX9.push(s); }; this.vY9(vd5, vX9); }, vZ9: function (vd5, v) { var va9 = new Array(); var i = 0; while (i < v.length) { va9.push(v[i]); ++i; }; this.vY9(vd5, va9); }, vb9: function (vd5, v) { var va9 = new Array(); var i = 0; while (i < v.length) { va9.push(v[i]); ++i; }; this.vY9(vd5, va9); }, vc9: function (vd5, v) { var va9 = new Array(); var i = 0; while (i < v.length) { va9.push(v[i]); ++i; }; this.vY9(vd5, va9); }, vY9: function (vd5, v) { var vd9 = this.vH9 && com.wiris.e1_C.v69(v) > 2; this.vE9++; var ve9 = this.vF9; vd5.b += Std.string("["); if (vd9) this.vD9(this.vE9, vd5); var i; var vM1 = 0, vL1 = v.length; while (vM1 < vL1) { var vy1 = vM1++; var o = v[vy1]; if (vy1 > 0) { vd5.b += Std.string(","); if (vd9) this.vD9(this.vE9, vd5); }; this.vf9(vd5, o); }; if (vd9) this.vD9(ve9, vd5); vd5.b += Std.string("]"); this.vE9--; }, vg9: function (vd5, h) { var vd9 = this.vH9 && com.wiris.e1_C.v69(h) > 2; this.vE9++; var ve9 = this.vF9; vd5.b += Std.string("{"); if (vd9) this.vD9(this.vE9, vd5); var e = h.keys(); var first = true; while (e.hasNext()) { if (first) first = false; else { vd5.b += Std.string(","); if (vd9) this.vD9(this.vE9, vd5); }; var key = e.next(); this.encodeString(vd5, key); vd5.b += Std.string(":"); this.vf9(vd5, h.get(key)); }; if (vd9) this.vD9(ve9, vd5); vd5.b += Std.string("}"); this.vE9--; }, vf9: function (vd5, o) { if (com.wiris.system.TypeTools.vh7(o)) this.vg9(vd5, o); else if (com.wiris.system.TypeTools.vg7(o)) this.vY9(vd5, o); else if (js.Boot.__instanceof(o, Array)) this.vc9(vd5, o); else if (js.Boot.__instanceof(o, Array)) this.vb9(vd5, o); else if (js.Boot.__instanceof(o, Array)) this.vZ9(vd5, o); else if (js.Boot.__instanceof(o, Array)) this.vW9(vd5, o); else if (js.Boot.__instanceof(o, String)) this.encodeString(vd5, o); else if (js.Boot.__instanceof(o, Int)) this.vV9(vd5, o); else if (js.Boot.__instanceof(o, haxe.Int64)) this.vS9(vd5, o); else if (js.Boot.__instanceof(o, com.wiris.e1_D)) this.vR9(vd5, o); else if (js.Boot.__instanceof(o, Bool)) this.vU9(vd5, o); else if (js.Boot.__instanceof(o, Float)) this.vT9(vd5, o); else throw "Impossible to convert to json object of type " + Std.string(Type.getClass(o)); }, v49: function (o) { var vd5 = new StringBuf(); this.vE9 = 0; this.vf9(vd5, o); return vd5.b; }, vF9: null, vE9: null, vH9: null, __class__: com.wiris.e1_C }); com.wiris.e1_D = vp["com.wiris.e1_D"] = function (n, format) { this.n = n; this.format = format; }; com.wiris.e1_D.__name__ = ["com", "wiris", "e1_D"]; com.wiris.e1_D.prototype = { toString: function () { if (this.format == com.wiris.e1_D.vh9) return "0x" + StringTools.hex(this.n, 0); return "" + this.n; }, format: null, n: null, __class__: com.wiris.e1_D }; if (!com.wiris.util.type) com.wiris.util.type = {}; com.wiris.e1_E = vp["com.wiris.e1_E"] = function () { }; com.wiris.e1_E.__name__ = ["com", "wiris", "e1_E"]; com.wiris.e1_E.vi9 = function (length, vj9) { var data = new Array(); --length; while (length >= 0) { data[length] = vj9; --length; }; return data; }; com.wiris.e1_E.vk9 = function (array) { return array != null && array.length > 0; }; com.wiris.e1_E.vl9 = function (array, index, defaultValue) { if (array != null && index >= 0 && index < array.length) return array[index]; else return defaultValue; }; com.wiris.e1_E.vm9 = function (array, element) { var i = 0; var n = array.length; while (i < n) { if (array[i] != null && array[i] == element) return i; ++i; }; return -1; }; com.wiris.e1_E.vn9 = function (iterator) { var array = new Array(); while (iterator.hasNext()) array.push(iterator.next()); return array; }; com.wiris.e1_E.vo9 = function (s) { var vp9 = s.split(","); var i = 0; while (i < vp9.length) { var w = StringTools.trim(vp9[i]); if (w.length > 0) { vp9[i] = w; ++i; } else vp9.splice(i, 1); }; return vp9; }; com.wiris.e1_E.vq9 = function (array) { var result = new Array(); var v11 = HxOverrides.iter(array); while (v11.hasNext()) { var value = Std.parseInt(v11.next()); result.push(value); }; return result; }; com.wiris.e1_E.vl3 = function (array, element) { return com.wiris.e1_E.vm9(array, element) >= 0; }; com.wiris.e1_E.vr9 = function (array, element) { var i; var vM1 = 0, vL1 = array.length; while (vM1 < vL1) { var vy1 = vM1++; if (array[vy1] != null && array[vy1] == element) return vy1; }; return -1; }; com.wiris.e1_E.vs9 = function (array, element) { var i; var vM1 = 0, vL1 = array.length; while (vM1 < vL1) { var vy1 = vM1++; if (array[vy1] == element) return vy1; }; return -1; }; com.wiris.e1_E.vt9 = function (array, element) { return com.wiris.e1_E.vr9(array, element) >= 0; }; com.wiris.e1_E.vu9 = function (array, element) { return com.wiris.e1_E.vs9(array, element) >= 0; }; com.wiris.e1_E.clear = function (a) { var i = a.length - 1; while (i >= 0) { HxOverrides.remove(a, a[i]); i--; } }; com.wiris.e1_E.sort = function (elements, vv9) { com.wiris.e1_E.vw9(elements, 0, elements.length - 1, vv9); }; com.wiris.e1_E.vx9 = function (a, e) { com.wiris.e1_E.vy9(a, e, false); }; com.wiris.e1_E.vz9 = function (a, e) { com.wiris.e1_E.vy9(a, e, true); }; com.wiris.e1_E.vy9 = function (a, e, set) { var v0A = 0; var v1A = a.length; while (v0A < v1A) { var v2A = (v1A + v0A) / 2 | 0; var v3A = Reflect.compare(a[v2A], e); if (v3A == 0) { if (set) return; else { v0A = v2A; v1A = v2A; } } else if (v3A < 0) v0A = v2A + 1; else v1A = v2A; }; a.splice(v0A, 0, e); }; com.wiris.e1_E.v4A = function (array, key) { var v0A = 0; var v1A = array.length; while (v0A < v1A) { var v2A = (v0A + v1A) / 2 | 0; var v3A = Reflect.compare(array[v2A], key); if (v3A == 0) return v2A; else if (v3A < 0) v0A = v2A + 1; else v1A = v2A; }; return -1; }; com.wiris.e1_E.v5A = function (a) { var b = new Array(); var i = HxOverrides.iter(a); while (i.hasNext()) b.push(i.next()); return b; }; com.wiris.e1_E.v6A = function (v7A, v8A) { var i = HxOverrides.iter(v8A); while (i.hasNext()) v7A.push(i.next()); }; com.wiris.e1_E.vw9 = function (elements, v9A, vAA, vv9) { if (v9A < vAA) { var p = com.wiris.e1_E.vBA(elements, v9A, vAA, vv9); com.wiris.e1_E.vw9(elements, v9A, p - 1, vv9); com.wiris.e1_E.vw9(elements, p + 1, vAA, vv9); } }; com.wiris.e1_E.vBA = function (elements, v9A, vAA, vv9) { var vCA = elements[vAA]; var i = v9A - 1; var j = v9A; while (j < vAA) { if (vv9.compare(vCA, elements[j]) > 0) { i++; if (i != j) { var vDA = elements[i]; elements[i] = elements[j]; elements[j] = vDA; } }; j++; }; if (vv9.compare(elements[i + 1], elements[vAA]) > 0) { var vEA = elements[i + 1]; elements[i + 1] = elements[vAA]; elements[vAA] = vEA; }; return i + 1; }; com.wiris.e1_E.firstElement = function (elements) { return elements[0]; }; com.wiris.e1_E.vFA = function (elements) { return elements[elements.length - 1]; }; com.wiris.e1_E.vGA = function (a, b) { if (a == null) return b == null ? null : com.wiris.e1_E.v5A(b); else if (b == null) return com.wiris.e1_E.v5A(a); else { var v = new Array(); var i = 0; var j = 0; while (i < a.length && j < b.length) { var v3A = Reflect.compare(a[i], b[j]); if (v3A == 0) { v.push(a[i]); i++; j++; } else if (v3A < 0) i++; else j++; }; return v; } }; com.wiris.e1_E.vHA = function (a, b) { var v = new Array(); if (a == null) return v; else if (b == null) return com.wiris.e1_E.v5A(a); var v11 = HxOverrides.iter(a); while (v11.hasNext()) { var e = v11.next(); if (com.wiris.e1_E.vm9(b, e) < 0) v.push(e); }; return v; }; com.wiris.e1_E.vIA = function (v7A, vJA) { var v11 = HxOverrides.iter(vJA); while (v11.hasNext()) { var n = v11.next(); if (!com.wiris.system.ArrayEx.vl3(v7A, n)) v7A.push(n); } }; com.wiris.e1_E.vKA = function (a, b) { if (a == null || b == null) return a == b; if (a.length == b.length) { var v11 = HxOverrides.iter(b); while (v11.hasNext()) { var t = v11.next(); if (!com.wiris.system.ArrayEx.vl3(a, t)) return false; }; return true; }; return false; }; com.wiris.e1_E.prototype = { __class__: com.wiris.e1_E }; com.wiris.e1_F = vp["com.wiris.e1_F"] = function () { }; com.wiris.e1_F.__name__ = ["com", "wiris", "e1_F"]; com.wiris.e1_F.prototype = { compare: null, __class__: com.wiris.e1_F }; if (!com.wiris.util.ui) com.wiris.util.ui = {}; com.wiris.e1_G = vp["com.wiris.e1_G"] = function (id, command) { this.id = id; this.command = command; this.parameters = new HaxeHash(); }; com.wiris.e1_G.__name__ = ["com", "wiris", "e1_G"]; com.wiris.e1_G.prototype = { setParameter: function (key, value) { this.parameters.set(key, value); }, vLA: function (key) { return this.parameters.get(key); }, vMA: function (command) { if (command == null) this.command = ""; else this.command = command; }, vNA: function () { return this.parameters; }, vOA: function () { return this.command; }, vPA: function (id) { this.id = id; }, vQA: function () { return this.id; }, parameters: null, command: null, id: null, __class__: com.wiris.e1_G }; com.wiris.e1_H = vp["com.wiris.e1_H"] = function (component) { this.component = component; this.margin = com.wiris.e1_E.vi9(4, com.wiris.e1_H.vRA); this.padding = com.wiris.e1_E.vi9(4, com.wiris.e1_H.vRA); this.vSA = com.wiris.e1_E.vi9(4, com.wiris.e1_H.vRA); this.borderColor = new Array(); this.borderColor.push(null); this.borderColor.push(null); this.borderColor.push(null); this.borderColor.push(null); this.width = com.wiris.e1_H.vRA; this.height = com.wiris.e1_H.vRA; this.vTA = com.wiris.e1_H.vUA; this.vVA = com.wiris.e1_H.vUA; this.minWidth = com.wiris.e1_H.vRA; this.minHeight = com.wiris.e1_H.vRA; this.vWA = com.wiris.e1_H.vUA; this.vXA = com.wiris.e1_H.vUA; this.maxWidth = com.wiris.e1_H.vRA; this.maxHeight = com.wiris.e1_H.vRA; this.vYA = com.wiris.e1_H.vUA; this.vZA = com.wiris.e1_H.vUA; this.backgroundColor = null; this.vaA = null; this.vbA = com.wiris.e1_H.vcA; this.vdA = com.wiris.e1_H.veA; this.zIndex = 0; }; com.wiris.e1_H.__name__ = ["com", "wiris", "e1_H"]; com.wiris.e1_H.prototype = { vfA: function (zIndex) { this.zIndex = zIndex; this.component.vgA(); return this; }, vhA: function () { return this.zIndex; }, viA: function (vdA) { this.vdA = vdA; return this; }, vjA: function () { return this.vdA; }, vkA: function (vbA) { this.vbA = vbA; return this; }, vlA: function () { return this.vbA; }, vmA: function (vaA) { this.vaA = vaA; this.component.vgA(); return this; }, vnA: function () { return this.vaA; }, voA: function (backgroundColor) { this.backgroundColor = backgroundColor; this.component.vgA(); return this; }, vpA: function () { return this.backgroundColor; }, vqA: function (maxHeight, vZA) { this.maxHeight = maxHeight; this.vZA = vZA; this.component.vgA(); return this; }, vrA: function (maxHeight) { return this.vqA(maxHeight, com.wiris.e1_H.vUA); }, vsA: function () { return this.vZA; }, vtA: function () { return this.maxHeight; }, vuA: function (maxWidth, vYA) { this.maxWidth = maxWidth; this.vYA = vYA; this.component.vgA(); return this; }, vvA: function () { return this.vYA; }, vwA: function (maxWidth) { return this.vuA(maxWidth, com.wiris.e1_H.vUA); }, vxA: function () { return this.maxWidth; }, vyA: function (minHeight, vXA) { this.minHeight = minHeight; this.vXA = vXA; this.component.vgA(); return this; }, vzA: function () { return this.vXA; }, v0B: function (minHeight) { return this.vyA(minHeight, com.wiris.e1_H.vUA); }, v1B: function () { return this.minHeight; }, v2B: function (minWidth, vWA) { this.minWidth = minWidth; this.vWA = vWA; this.component.vgA(); return this; }, v3B: function () { return this.vWA; }, v4B: function (minWidth) { return this.v2B(minWidth, com.wiris.e1_H.vUA); }, v5B: function () { return this.minWidth; }, v6B: function (height, vVA) { this.height = height; this.vVA = vVA; this.component.vgA(); return this; }, v7B: function () { return this.vVA; }, v8B: function (height) { return this.v6B(height, com.wiris.e1_H.vUA); }, v9B: function () { return this.height; }, vAB: function (width, vTA) { this.width = width; this.vTA = vTA; this.component.vgA(); return this; }, vBB: function () { return this.vTA; }, vCB: function (width) { return this.vAB(width, com.wiris.e1_H.vUA); }, vDB: function () { return this.width; }, vEB: function (top, right, bottom, left) { this.borderColor[0] = top; this.borderColor[1] = right; this.borderColor[2] = bottom; this.borderColor[3] = left; this.component.vgA(); return this; }, vFB: function () { return this.borderColor; }, vGB: function (top, right, bottom, left) { this.padding[0] = top; this.padding[1] = right; this.padding[2] = bottom; this.padding[3] = left; this.component.vgA(); return this; }, vHB: function (top, right, bottom, left) { this.margin[0] = top; this.margin[1] = right; this.margin[2] = bottom; this.margin[3] = left; this.component.vgA(); return this; }, vIB: function (top, right, bottom, left) { this.vSA[0] = top; this.vSA[1] = right; this.vSA[2] = bottom; this.vSA[3] = left; this.component.vgA(); return this; }, vJB: function (vKB) { if (this.vLB != null) this.vLB.remove(vKB); }, vMB: function () { if (this.vLB != null) return this.vLB.keys(); return null; }, vNB: function (vKB) { if (this.vLB != null && this.vLB.exists(vKB)) return this.vLB.get(vKB); return null; }, vOB: function (vKB, vPB) { if (this.vLB == null) this.vLB = new HaxeHash(); this.vLB.set(vKB, vPB); this.component.vgA(); return this; }, vQB: function () { return this.padding; }, vRB: function () { return this.margin; }, vSB: function () { return this.vSA; }, vLB: null, zIndex: null, vdA: null, vbA: null, vaA: null, backgroundColor: null, vZA: null, vYA: null, maxHeight: null, maxWidth: null, vXA: null, vWA: null, minHeight: null, minWidth: null, vVA: null, vTA: null, height: null, width: null, borderColor: null, vSA: null, padding: null, margin: null, component: null, __class__: com.wiris.e1_H }; com.wiris.e1_I = vp["com.wiris.e1_I"] = function () { }; com.wiris.e1_I.__name__ = ["com", "wiris", "e1_I"]; com.wiris.e1_I.prototype = { vhA: null, vjA: null, vlA: null, vnA: null, vpA: null, v1B: null, v5B: null, vTB: null, vUB: null, vVB: null, vWB: null, v9B: null, vDB: null, vFB: null, vRB: null, vSB: null, __class__: com.wiris.e1_I }; if (!com.wiris.util.ui.component) com.wiris.util.ui.component = {}; com.wiris.e1_J = vp["com.wiris.e1_J"] = function () { this.element = null; this.id = ""; this.vXB = null; this.vYB = null; this.vZB = true; this.vaB = true; this.vbB = false; this.parent = null; this.vcB = -1; this.vm5 = new Array(); this.vm5.push(com.wiris.e1_J.vdB); this.style = new com.wiris.e1_H(this); this.veB = new com.wiris.e1_P(this); this.vfB = new Array(); this.vgB = new Array(); this.vhB = new Array(); this.viB = new Array(); this.vjB = new Array(); this.vkB = new Array(); this.vlB = new Array(); this.vmB = new Array(); this.vnB = new Array(); this.voB = new Array(); this.vpB = new Array(); this.vqB = new Array(); this.vrB = new Array(); this.vsB = new Array(); this.vtB = new Array(); this.vuB = new Array(); this.vvB = new Array(); this.vwB = new Array(); this.vxB = new Array(); this.vyB = new Array(); this.vzB(this.veB); this.v0C(this.veB); this.v1C(this.veB); this.v2C(this.veB); }; com.wiris.e1_J.__name__ = ["com", "wiris", "e1_J"]; com.wiris.e1_J.prototype = { v3C: function (listener, e, v4C) { if (listener == null) return; if (com.wiris.util.ui.interaction.EventType.v5C == v4C) listener.v6C(e); else if (com.wiris.util.ui.interaction.EventType.v7C == v4C) listener.v8C(e); else if (com.wiris.util.ui.interaction.EventType.v9C == v4C) listener.vAC(e); }, vBC: function (listener, e) { if (listener == null) return; listener.vCC(e); }, vDC: function (listener, e) { if (listener == null) return; listener.vEC(e); }, vFC: function (listener, e, vGC) { if (listener == null) return; if (com.wiris.util.ui.interaction.EventType.vHC == vGC) listener.vIC(e); else if (com.wiris.util.ui.interaction.EventType.vJC == vGC) listener.vKC(e); else if (com.wiris.util.ui.interaction.EventType.vLC == vGC) listener.vMC(e); else if (com.wiris.util.ui.interaction.EventType.vNC == vGC) listener.vOC(e); else if (com.wiris.util.ui.interaction.EventType.vPC == vGC) listener.vQC(e); else if (com.wiris.util.ui.interaction.EventType.vRC == vGC) listener.vSC(e); }, vTC: function (listener, e, vUC) { if (listener == null) return; if (com.wiris.util.ui.interaction.EventType.vVC == vUC) listener.keyPress(e); else if (com.wiris.util.ui.interaction.EventType.vWC == vUC) listener.keyRelease(e); else if (com.wiris.util.ui.interaction.EventType.vXC == vUC) listener.keyType(e); }, vYC: function (listener, e, vZC) { if (listener == null) return; if (com.wiris.util.ui.interaction.EventType.vaC == vZC) listener.focusGained(e); else if (com.wiris.util.ui.interaction.EventType.vbC == vZC) listener.vcC(e); }, vdC: function (listener, e, veC) { if (listener == null) return; if (com.wiris.util.ui.interaction.EventType.vfC == veC) listener.vgC(e); else if (com.wiris.util.ui.interaction.EventType.vhC == veC) listener.dragEnter(e); else if (com.wiris.util.ui.interaction.EventType.viC == veC) listener.dragStart(e); else if (com.wiris.util.ui.interaction.EventType.vjC == veC) listener.vkC(e); else if (com.wiris.util.ui.interaction.EventType.vlC == veC) listener.dragOver(e); else if (com.wiris.util.ui.interaction.EventType.vmC == veC) listener.dragEnd(e); }, vnC: function (listener, e, voC) { if (listener == null) return; if (com.wiris.util.ui.interaction.EventType.vpC == voC) listener.draggableChanged(e); else if (com.wiris.util.ui.interaction.EventType.vqC == voC) listener.enabledChanged(e); else if (com.wiris.util.ui.interaction.EventType.vrC == voC) listener.blurRequested(e); else if (com.wiris.util.ui.interaction.EventType.vsC == voC) listener.focusRequested(e); else if (com.wiris.util.ui.interaction.EventType.vtC == voC) listener.styleChanged(e); else if (com.wiris.util.ui.interaction.EventType.vuC == voC) listener.visibilityChanged(e); }, vvC: function (listener, e) { if (listener == null) return; listener.stateChanged(e); }, vwC: function (listener, e) { if (listener == null) return; listener.actionPerformed(e); }, vH5: function (e) { var vM5 = e.vxC(); if (com.wiris.util.ui.interaction.EventType.vyC == vM5) { var vzC = e; var i = HxOverrides.iter(this.vgB); while (i.hasNext() && e.v0D()) this.vwC(i.next(), vzC); i = HxOverrides.iter(this.vqB); while (i.hasNext() && !e.v1D()) this.vwC(i.next(), vzC); } else if (com.wiris.util.ui.interaction.EventType.v2D == vM5) { var v3D = e; var i = HxOverrides.iter(this.vhB); while (i.hasNext() && e.v0D()) this.vvC(i.next(), v3D); i = HxOverrides.iter(this.vrB); while (i.hasNext() && !e.v1D()) this.vvC(i.next(), v3D); } else if (com.wiris.util.ui.interaction.EventType.v4D == vM5) { var v5D = e; var voC = v5D.v6D(); var i = HxOverrides.iter(this.vfB); while (i.hasNext() && e.v0D()) this.vnC(i.next(), v5D, voC); i = HxOverrides.iter(this.vpB); while (i.hasNext() && !e.v1D()) this.vnC(i.next(), v5D, voC); } else if (com.wiris.util.ui.interaction.EventType.v7D == vM5) { var v8D = e; var veC = v8D.v9D(); var i = HxOverrides.iter(this.vnB); while (i.hasNext() && e.v0D()) this.vdC(i.next(), v8D, veC); i = HxOverrides.iter(this.vxB); while (i.hasNext() && !e.v1D()) this.vdC(i.next(), v8D, veC); } else if (com.wiris.util.ui.interaction.EventType.vAD == vM5) { var vBD = e; var vZC = vBD.vCD(); var i = HxOverrides.iter(this.vlB); while (i.hasNext() && e.v0D()) this.vYC(i.next(), vBD, vZC); i = HxOverrides.iter(this.vvB); while (i.hasNext() && !e.v1D()) this.vYC(i.next(), vBD, vZC); } else if (com.wiris.util.ui.interaction.EventType.vDD == vM5) { var vED = e; var vUC = vED.vFD(); var i = HxOverrides.iter(this.vmB); while (i.hasNext() && e.v0D()) this.vTC(i.next(), vED, vUC); i = HxOverrides.iter(this.vwB); while (i.hasNext() && !e.v1D()) this.vTC(i.next(), vED, vUC); } else if (com.wiris.util.ui.interaction.EventType.vGD == vM5) { var vHD = e; var vGC = vHD.vID(); var i = HxOverrides.iter(this.viB); while (i.hasNext() && e.v0D()) this.vFC(i.next(), vHD, vGC); i = HxOverrides.iter(this.vsB); while (i.hasNext() && !e.v1D()) this.vFC(i.next(), vHD, vGC); } else if (com.wiris.util.ui.interaction.EventType.vJD == vM5) { var vKD = e; var i = HxOverrides.iter(this.vjB); while (i.hasNext() && e.v0D()) this.vDC(i.next(), vKD); i = HxOverrides.iter(this.vtB); while (i.hasNext() && !e.v1D()) this.vDC(i.next(), vKD); } else if (com.wiris.util.ui.interaction.EventType.vLD == vM5) { var vMD = e; var i = HxOverrides.iter(this.voB); while (i.hasNext() && e.v0D()) this.vBC(i.next(), vMD); i = HxOverrides.iter(this.vyB); while (i.hasNext() && !e.v1D()) this.vBC(i.next(), vMD); } else if (com.wiris.util.ui.interaction.EventType.vND == vM5) { var vOD = e; var v4C = vOD.vPD(); var i = HxOverrides.iter(this.vkB); while (i.hasNext() && e.v0D()) this.v3C(i.next(), vOD, v4C); i = HxOverrides.iter(this.vuB); while (i.hasNext() && !e.v1D()) this.v3C(i.next(), vOD, v4C); } }, vgA: function () { this.vH5(com.wiris.e1_m.vQD(this, com.wiris.util.ui.interaction.EventType.vtC)); }, vRD: function () { this.vH5(com.wiris.e1_m.vSD(this)); }, vTD: function (action) { this.vH5(com.wiris.e1_m.vUD(this, action)); }, vVD: function (listener) { this.vyB.push(listener); return this; }, vWD: function (listener) { this.vxB.push(listener); return this; }, vXD: function (listener) { this.vwB.push(listener); return this; }, vYD: function (listener) { this.vvB.push(listener); return this; }, vZD: function (listener) { this.vuB.push(listener); return this; }, vaD: function (listener) { this.vtB.push(listener); return this; }, vbD: function (listener) { this.vsB.push(listener); return this; }, vcD: function (listener) { this.vrB.push(listener); return this; }, vdD: function (listener) { this.vqB.push(listener); return this; }, veD: function (listener) { HxOverrides.remove(this.vpB, listener); return this; }, vfD: function (listener) { this.vpB.push(listener); return this; }, vgD: function (listener) { HxOverrides.remove(this.vnB, listener); return this; }, vhD: function (listener) { this.vnB.push(listener); return this; }, viD: function (listener) { HxOverrides.remove(this.vmB, listener); return this; }, v0C: function (listener) { this.vmB.push(listener); return this; }, vjD: function (listener) { HxOverrides.remove(this.vlB, listener); return this; }, vzB: function (listener) { this.vlB.push(listener); return this; }, vkD: function (listener) { HxOverrides.remove(this.vkB, listener); return this; }, v2C: function (listener) { this.vkB.push(listener); return this; }, vlD: function (listener) { HxOverrides.remove(this.voB, listener); return this; }, vmD: function (listener) { this.voB.push(listener); return this; }, vnD: function (listener) { HxOverrides.remove(this.vjB, listener); return this; }, voD: function (listener) { this.vjB.push(listener); return this; }, vpD: function (listener) { HxOverrides.remove(this.viB, listener); return this; }, v1C: function (listener) { this.viB.push(listener); return this; }, vqD: function (listener) { HxOverrides.remove(this.vhB, listener); return this; }, vrD: function (listener) { this.vhB.push(listener); return this; }, vsD: function (listener) { HxOverrides.remove(this.vgB, listener); return this; }, vtD: function (listener) { this.vgB.push(listener); return this; }, vuD: function (listener) { HxOverrides.remove(this.vfB, listener); return this; }, vvD: function (listener) { this.vfB.push(listener); return this; }, vwD: function (vxD) { this.vxD = vxD; }, vyD: function () { return this.vxD; }, vzD: function () { return this.tabindex; }, v0E: function (index) { this.tabindex = index; }, getComputedStyle: function () { return this.vO5; }, v1E: function (vO5) { this.vO5 = vO5; return this; }, v2E: function () { return this.style; }, v3E: function (style) { this.style = style; this.vgA(); return this; }, v4E: function (className) { if (this.vXB != null) this.v22(this.vXB); this.vXB = className; this.v32(com.wiris.e1_J.v5E); return this.v32(className); }, v22: function (className) { if (this.v12(className)) { HxOverrides.remove(this.vm5, className); this.vgA(); }; return this; }, v32: function (className) { if (!this.v12(className)) { this.vm5.push(className); this.vgA(); }; return this; }, v12: function (className) { return com.wiris.system.ArrayEx.vl3(this.vm5, className); }, v6E: function () { if (this.vXB == null) { if (this.getParent() != null) return this.getParent().v6E(); }; return this.vXB; }, v7E: function () { if (this.vXB == null) { if (this.getParent() != null) return this.getParent().v7E(); }; return this; }, v8E: function () { return this.vm5; }, v9E: function () { }, vAE: function () { this.vH5(com.wiris.e1_m.vQD(this, com.wiris.util.ui.interaction.EventType.vrC)); return this; }, vBE: function () { this.vH5(com.wiris.e1_m.vQD(this, com.wiris.util.ui.interaction.EventType.vsC)); return this; }, vCE: function (vbB) { if (this.vbB == vbB) return this; this.vbB = vbB; this.vH5(com.wiris.e1_m.vQD(this, com.wiris.util.ui.interaction.EventType.vpC)); return this; }, vDE: function (vaB) { if (this.vaB == vaB) return this; this.vaB = vaB; this.vH5(com.wiris.e1_m.vQD(this, com.wiris.util.ui.interaction.EventType.vqC)); return this; }, vEE: function (vZB) { if (this.vZB == vZB) return this; this.vZB = vZB; if (vZB) this.v22(com.wiris.e1_J.vFE); else this.v32(com.wiris.e1_J.vFE); this.vH5(com.wiris.e1_m.vQD(this, com.wiris.util.ui.interaction.EventType.vuC)); return this; }, vGE: function () { return this.veB.vGE(); }, vHE: function () { return this.veB.vHE(); }, vIE: function () { return this.vbB; }, vJE: function () { return this.vaB; }, vKE: function () { return this.vZB; }, vLE: function (vME) { this.vYB = vME; }, vNE: function () { return this.vYB; }, vOE: function (element) { this.element = element; }, getElement: function () { return this.element; }, vPE: function (index) { this.vcB = index; }, vQE: function () { return this.vcB; }, vRE: function () { if (this.getParent() != null && js.Boot.__instanceof(this.getParent(), com.wiris.e1_R)) { var parent = this.getParent(); parent.vSE(this.vQE()); }; return this; }, vTE: function (parent) { this.parent = parent; }, getParent: function () { return this.parent; }, vUE: function (component) { return false; }, vVE: function (className) { var result = new Array(); if (this.v12(className)) result.push(this); return result; }, vWE: function (id) { if (this.id == id) return this; return null; }, vXE: function () { if (this.vHE()) return this; return null; }, vYE: function () { return null; }, vPA: function (id) { this.id = id; return this; }, vQA: function () { return this.id; }, vyB: null, vxB: null, vwB: null, vvB: null, vuB: null, vtB: null, vsB: null, vrB: null, vqB: null, vpB: null, voB: null, vnB: null, vmB: null, vlB: null, vkB: null, vjB: null, viB: null, vhB: null, vgB: null, vfB: null, veB: null, vxD: null, vO5: null, style: null, vm5: null, vcB: null, parent: null, tabindex: null, vbB: null, vaB: null, vZB: null, vYB: null, vXB: null, id: null, element: null, __class__: com.wiris.e1_J }; com.wiris.e1_K = vp["com.wiris.e1_K"] = function () { }; com.wiris.e1_K.__name__ = ["com", "wiris", "e1_K"]; com.wiris.e1_K.prototype = { vZE: null, vaE: null, __class__: com.wiris.e1_K }; if (!com.wiris.util.ui.interaction) com.wiris.util.ui.interaction = {}; com.wiris.e1_L = vp["com.wiris.e1_L"] = function () { }; com.wiris.e1_L.__name__ = ["com", "wiris", "e1_L"]; com.wiris.e1_L.prototype = { v6C: null, vAC: null, v8C: null, __class__: com.wiris.e1_L }; com.wiris.e1_M = vp["com.wiris.e1_M"] = function () { }; com.wiris.e1_M.__name__ = ["com", "wiris", "e1_M"]; com.wiris.e1_M.prototype = { keyType: null, keyRelease: null, keyPress: null, __class__: com.wiris.e1_M }; com.wiris.e1_N = vp["com.wiris.e1_N"] = function () { }; com.wiris.e1_N.__name__ = ["com", "wiris", "e1_N"]; com.wiris.e1_N.prototype = { vcC: null, focusGained: null, __class__: com.wiris.e1_N }; com.wiris.e1_O = vp["com.wiris.e1_O"] = function () { }; com.wiris.e1_O.__name__ = ["com", "wiris", "e1_O"]; com.wiris.e1_O.prototype = { vOC: null, vMC: null, vSC: null, vQC: null, vKC: null, vIC: null, __class__: com.wiris.e1_O }; com.wiris.e1_P = vp["com.wiris.e1_P"] = function (component) { this.component = component; this.vbE = false; this.focused = false; com.wiris.e1_P.vcE = true; }; com.wiris.e1_P.__name__ = ["com", "wiris", "e1_P"]; com.wiris.e1_P.__interfaces__ = [com.wiris.e1_L, com.wiris.e1_M, com.wiris.e1_N, com.wiris.e1_O]; com.wiris.e1_P.vcE = null; com.wiris.e1_P.prototype = { keyType: function (e) { }, keyRelease: function (e) { }, keyPress: function (e) { if (e.vdE() || e.veE()) return; com.wiris.e1_P.vcE = true; if (this.component == e.vfE()) this.component.v32(com.wiris.e1_J.vgE); }, vcC: function (e) { this.focused = false; this.component.v22(com.wiris.e1_J.vgE); }, focusGained: function (e) { this.focused = true; if (com.wiris.e1_P.vcE || js.Boot.__instanceof(this.component, com.wiris.e1_W)) this.component.v32(com.wiris.e1_J.vgE); }, v6C: function (e) { }, vAC: function (e) { }, v8C: function (e) { com.wiris.e1_P.vcE = false; }, vOC: function (e) { this.vbE = false; }, vMC: function (e) { this.vbE = true; }, vSC: function (e) { }, vQC: function (e) { com.wiris.e1_P.vcE = false; }, vKC: function (e) { }, vIC: function (e) { }, vGE: function () { return this.focused; }, vHE: function () { return this.vbE; }, focused: null, vbE: null, component: null, __class__: com.wiris.e1_P }; com.wiris.e1_Q = vp["com.wiris.e1_Q"] = function () { }; com.wiris.e1_Q.__name__ = ["com", "wiris", "e1_Q"]; com.wiris.e1_Q.prototype = { vhE: null, viE: null, vjE: null, __class__: com.wiris.e1_Q }; com.wiris.e1_R = vp["com.wiris.e1_R"] = function () { com.wiris.e1_J.call(this); this.v2E().vOB("--indentation-level", "0"); this.scrollBar = new com.wiris.e1_V(); this.scrollBar.vTE(this); this.vkE = new Array(); this.vlE = new Array(); this.vmE = new Array(); this.v32(com.wiris.e1_R.vnE); }; com.wiris.e1_R.__name__ = ["com", "wiris", "e1_R"]; com.wiris.e1_R.__super__ = com.wiris.e1_J; com.wiris.e1_R.prototype = vr(com.wiris.e1_J.prototype, { voE: function (vaB) { var i = HxOverrides.iter(this.vpE()); while (i.hasNext()) { var vj5 = i.next(); vj5.vDE(vaB); if (js.Boot.__instanceof(vj5, com.wiris.e1_R)) vj5.voE(vaB); } }, vqE: function () { return Std.parseInt(this.v2E().vNB("--indentation-level")); }, vrE: function (vsE) { this.v2E().vOB("--indentation-level", vsE + ""); }, vtE: function () { var n = this.vkE.length; while (n > 0) { this.vSE(0); --n; } }, vSE: function (index) { var component = this.vkE.splice(index, 1)[0]; component.vTE(null); component.vPE(-1); this.vH5(com.wiris.e1_m.vuE(this, com.wiris.util.ui.interaction.EventType.vvE, component, index, -1)); }, vwE: function (index, vxE) { if (index != vxE) { var component = this.vkE.splice(index, 1)[0]; var vyE = index < vxE ? vxE - 1 : vxE; this.vkE.splice(vyE, 0, component); var i = Math.min(index, vxE); var n = Math.max(index, vxE); while (i <= n && i < this.vkE.length) { this.vkE[i].vPE(i); ++i; }; this.vH5(com.wiris.e1_m.vuE(this, com.wiris.util.ui.interaction.EventType.vzE, component, index, vxE)); } }, v0F: function (component, index) { var i = this.vkE.length - 1; while (i >= index) { this.vkE[i].vPE(i + 1); --i; }; this.vkE.splice(index, 0, component); component.vTE(this); component.vPE(index); this.vH5(com.wiris.e1_m.vuE(this, com.wiris.util.ui.interaction.EventType.v1F, component, index, -1)); }, v2F: function (component) { this.vkE.push(component); component.vTE(this); component.vPE(this.vkE.length - 1); this.vH5(com.wiris.e1_m.vuE(this, com.wiris.util.ui.interaction.EventType.v1F, component, this.vkE.length - 1, -1)); }, v3F: function (listener, e, v4F) { if (listener == null) return; if (com.wiris.util.ui.interaction.EventType.v1F == v4F) listener.childAdded(e); else if (com.wiris.util.ui.interaction.EventType.vzE == v4F) listener.childMoved(e); else if (com.wiris.util.ui.interaction.EventType.vvE == v4F) listener.childRemoved(e); }, vH5: function (e) { var vM5 = e.vxC(); if (com.wiris.util.ui.interaction.EventType.v5F == vM5) { var v6F = e; var v4F = v6F.v7F(); var i = HxOverrides.iter(this.vlE); while (i.hasNext() && e.v0D()) this.v3F(i.next(), v6F, v4F); i = HxOverrides.iter(this.vmE); while (i.hasNext() && !e.v1D()) this.v3F(i.next(), v6F, v4F); } else com.wiris.e1_J.prototype.vH5.call(this, e); }, v8F: function (listener) { this.vmE.push(listener); return this; }, v9F: function (listener) { HxOverrides.remove(this.vlE, listener); return this; }, vAF: function (listener) { this.vlE.push(listener); return this; }, vBF: function () { this.scrollBar = null; }, vCF: function () { return this.scrollBar; }, vVE: function (className) { var result = com.wiris.e1_J.prototype.vVE.call(this, className); var i = HxOverrides.iter(this.vkE); while (i.hasNext()) { var component = i.next(); var vDF = component.vVE(className); var j = HxOverrides.iter(vDF); while (j.hasNext()) result.push(j.next()); }; return result; }, vUE: function (component) { if (com.wiris.system.ArrayEx.vl3(this.vkE, component) || this.scrollBar == component) return true; var i = HxOverrides.iter(this.vkE); while (i.hasNext()) { var vEF = i.next(); if (vEF.vUE(component)) return true; }; return false; }, vWE: function (id) { var i = HxOverrides.iter(this.vkE); while (i.hasNext()) { var component = i.next().vWE(id); if (component != null) return component; }; return com.wiris.e1_J.prototype.vWE.call(this, id); }, vXE: function () { var i = HxOverrides.iter(this.vkE); while (i.hasNext()) { var component = i.next().vXE(); if (component != null) return component; }; return com.wiris.e1_J.prototype.vXE.call(this); }, vYE: function () { return this.vpE(); }, vpE: function () { return this.vkE; }, vmE: null, vlE: null, vkE: null, scrollBar: null, __class__: com.wiris.e1_R }); com.wiris.e1_S = vp["com.wiris.e1_S"] = function () { }; com.wiris.e1_S.__name__ = ["com", "wiris", "e1_S"]; com.wiris.e1_S.prototype = { vCC: null, __class__: com.wiris.e1_S }; com.wiris.e1_T = vp["com.wiris.e1_T"] = function () { }; com.wiris.e1_T.__name__ = ["com", "wiris", "e1_T"]; com.wiris.e1_T.prototype = { styleChanged: null, blurRequested: null, focusRequested: null, draggableChanged: null, enabledChanged: null, visibilityChanged: null, __class__: com.wiris.e1_T }; com.wiris.e1_U = vp["com.wiris.e1_U"] = function () { }; com.wiris.e1_U.__name__ = ["com", "wiris", "e1_U"]; com.wiris.e1_U.prototype = { stateChanged: null, __class__: com.wiris.e1_U }; com.wiris.e1_V = vp["com.wiris.e1_V"] = function () { com.wiris.e1_J.call(this); this.v32(com.wiris.e1_V.vFF); this.vGF(com.wiris.e1_V.vHF); this.vIF(com.wiris.e1_V.vJF); }; com.wiris.e1_V.__name__ = ["com", "wiris", "e1_V"]; com.wiris.e1_V.__interfaces__ = [com.wiris.e1_S, com.wiris.e1_T, com.wiris.e1_U]; com.wiris.e1_V.vKF = function (scroll) { var scrollBar = new com.wiris.e1_V(); scrollBar.vLF(scroll); return scrollBar; }; com.wiris.e1_V.__super__ = com.wiris.e1_J; com.wiris.e1_V.prototype = vr(com.wiris.e1_J.prototype, { vCC: function (e) { if (this.vMF != com.wiris.e1_V.vNF) { if (this.vOF == com.wiris.e1_V.vJF) this.vLF(e.vPF()); else if (this.vOF == com.wiris.e1_V.vQF) this.vLF(e.vRF()); } }, styleChanged: function (e) { }, blurRequested: function (e) { }, focusRequested: function (e) { }, draggableChanged: function (e) { }, enabledChanged: function (e) { }, visibilityChanged: function (e) { this.vgA(); }, stateChanged: function (e) { this.vRD(); }, vTE: function (parent) { com.wiris.e1_J.prototype.vTE.call(this, parent); parent.vrD(this); parent.vvD(this); parent.vmD(this); }, vGF: function (vMF) { this.vMF = vMF; }, vSF: function () { return this.vMF; }, vIF: function (vOF) { this.vOF = vOF; if (this.vOF == com.wiris.e1_V.vQF) { this.v22(com.wiris.e1_V.vTF); this.v32(com.wiris.e1_V.vUF); } else if (this.vOF == com.wiris.e1_V.vJF) { this.v22(com.wiris.e1_V.vUF); this.v32(com.wiris.e1_V.vTF); }; this.vRD(); }, vVF: function () { return this.vOF; }, vLF: function (scroll) { this.scroll = scroll; this.vRD(); }, vWF: function () { return this.scroll; }, vOF: null, vMF: null, scroll: null, __class__: com.wiris.e1_V }); com.wiris.e1_W = vp["com.wiris.e1_W"] = function () { com.wiris.e1_J.call(this); this.v32(com.wiris.e1_W.vXF).v32(com.wiris.e1_W.vYF); this.v2E().vCB(com.wiris.e1_H.vZF); this.text = ""; this.vaF = ""; this.vbF = ""; this.readOnly = false; this.vcF = null; }; com.wiris.e1_W.__name__ = ["com", "wiris", "e1_W"]; com.wiris.e1_W.__interfaces__ = [com.wiris.e1_Q]; com.wiris.e1_W.__super__ = com.wiris.e1_J; com.wiris.e1_W.prototype = vr(com.wiris.e1_J.prototype, { vhE: function () { return this; }, viE: function (value) { if (value == this.text) return; if (value == null) value = ""; this.text = value; this.vRD(); if (this.text.length == 0) this.v32(com.wiris.e1_W.vYF); else this.v22(com.wiris.e1_W.vYF); if (this.vcF != null) this.vTD(this.vcF); }, vjE: function () { return this.text; }, vdF: function (action) { this.vcF = action; }, veF: function () { return this.vfF; }, vgF: function (vfF) { this.vfF = vfF; }, vhF: function () { return this.prefix; }, viF: function (prefix) { this.prefix = prefix; }, vjF: function (vbF) { this.vbF = vbF; if (this.vbF.length > 0) this.v32(com.wiris.e1_W.vkF); else this.v22(com.wiris.e1_W.vkF); }, vlF: function () { return this.vbF; }, vmF: function (vaF) { this.vaF = vaF; }, vnF: function () { return this.vaF; }, voF: function () { return this.readOnly; }, setReadOnly: function (readOnly) { this.readOnly = readOnly; }, isEmpty: function () { return this.text.length == 0; }, vpF: function () { return this.vcF; }, vcF: null, readOnly: null, vaF: null, vfF: null, prefix: null, vbF: null, text: null, __class__: com.wiris.e1_W }); com.wiris.e1_X = vp["com.wiris.e1_X"] = function () { }; com.wiris.e1_X.__name__ = ["com", "wiris", "e1_X"]; com.wiris.e1_X.prototype = { vxC: null, vfE: null, vqF: null, v1D: null, v0D: null, preventDefault: null, stopPropagation: null, __class__: com.wiris.e1_X }; com.wiris.e1_Y = vp["com.wiris.e1_Y"] = function () { }; com.wiris.e1_Y.__name__ = ["com", "wiris", "e1_Y"]; com.wiris.e1_Y.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_Y.prototype = { vrF: null, vsF: null, __class__: com.wiris.e1_Y }; com.wiris.e1_Z = vp["com.wiris.e1_Z"] = function () { }; com.wiris.e1_Z.__name__ = ["com", "wiris", "e1_Z"]; com.wiris.e1_Z.prototype = { actionPerformed: null, __class__: com.wiris.e1_Z }; com.wiris.e1_a = vp["com.wiris.e1_a"] = function () { }; com.wiris.e1_a.__name__ = ["com", "wiris", "e1_a"]; com.wiris.e1_a.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_a.prototype = { vtF: null, __class__: com.wiris.e1_a }; com.wiris.e1_b = vp["com.wiris.e1_b"] = function () { }; com.wiris.e1_b.__name__ = ["com", "wiris", "e1_b"]; com.wiris.e1_b.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_b.prototype = { v6D: null, __class__: com.wiris.e1_b }; com.wiris.e1_c = vp["com.wiris.e1_c"] = function () { }; com.wiris.e1_c.__name__ = ["com", "wiris", "e1_c"]; com.wiris.e1_c.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_c.prototype = { v7F: null, vuF: null, vvF: null, vwF: null, __class__: com.wiris.e1_c }; com.wiris.e1_d = vp["com.wiris.e1_d"] = function () { }; com.wiris.e1_d.__name__ = ["com", "wiris", "e1_d"]; com.wiris.e1_d.prototype = { childAdded: null, childMoved: null, childRemoved: null, __class__: com.wiris.e1_d }; com.wiris.e1_e = vp["com.wiris.e1_e"] = function () { }; com.wiris.e1_e.__name__ = ["com", "wiris", "e1_e"]; com.wiris.e1_e.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_e.prototype = { v9D: null, vxF: null, vyF: null, vzF: null, v0G: null, v1G: null, __class__: com.wiris.e1_e }; com.wiris.e1_f = vp["com.wiris.e1_f"] = function () { }; com.wiris.e1_f.__name__ = ["com", "wiris", "e1_f"]; com.wiris.e1_f.prototype = { vkC: null, dragEnter: null, dragEnd: null, dragOver: null, vgC: null, dragStart: null, __class__: com.wiris.e1_f }; com.wiris.util.ui.interaction.EventType = vp["com.wiris.util.ui.interaction.EventType"] = function () { }; com.wiris.util.ui.interaction.EventType.__name__ = ["com", "wiris", "util", "ui", "interaction", "EventType"]; com.wiris.e1_g = vp["com.wiris.e1_g"] = function () { }; com.wiris.e1_g.__name__ = ["com", "wiris", "e1_g"]; com.wiris.e1_g.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_g.prototype = { vCD: null, __class__: com.wiris.e1_g }; com.wiris.e1_h = vp["com.wiris.e1_h"] = function () { }; com.wiris.e1_h.__name__ = ["com", "wiris", "e1_h"]; com.wiris.e1_h.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_h.prototype = { vPD: null, v2G: null, v3G: null, v4G: null, __class__: com.wiris.e1_h }; com.wiris.e1_i = vp["com.wiris.e1_i"] = function () { }; com.wiris.e1_i.__name__ = ["com", "wiris", "e1_i"]; com.wiris.e1_i.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_i.prototype = { vPF: null, vRF: null, __class__: com.wiris.e1_i }; com.wiris.e1_j = vp["com.wiris.e1_j"] = function () { }; com.wiris.e1_j.__name__ = ["com", "wiris", "e1_j"]; com.wiris.e1_j.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_j.prototype = { v5G: null, v6G: null, v7G: null, v0G: null, v1G: null, __class__: com.wiris.e1_j }; com.wiris.e1_k = vp["com.wiris.e1_k"] = function () { }; com.wiris.e1_k.__name__ = ["com", "wiris", "e1_k"]; com.wiris.e1_k.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_k.prototype = { vID: null, v8G: null, v6G: null, v7G: null, v0G: null, v1G: null, __class__: com.wiris.e1_k }; com.wiris.e1_l = vp["com.wiris.e1_l"] = function () { }; com.wiris.e1_l.__name__ = ["com", "wiris", "e1_l"]; com.wiris.e1_l.__interfaces__ = [com.wiris.e1_X]; com.wiris.e1_l.prototype = { vFD: null, vdE: null, v9G: null, veE: null, vAG: null, vBG: null, vCG: null, vDG: null, __class__: com.wiris.e1_l }; com.wiris.e1_m = vp["com.wiris.e1_m"] = function (vR2, vM5, vEG) { this.vR2 = vR2; this.vM5 = vM5; this.vEG = vEG; this.vFG = true; this.vGG = false; }; com.wiris.e1_m.__name__ = ["com", "wiris", "e1_m"]; com.wiris.e1_m.__interfaces__ = [com.wiris.e1_h, com.wiris.e1_i, com.wiris.e1_j, com.wiris.e1_k, com.wiris.e1_l, com.wiris.e1_g, com.wiris.e1_e, com.wiris.e1_c, com.wiris.e1_b, com.wiris.e1_a, com.wiris.e1_Y, com.wiris.e1_X]; com.wiris.e1_m.vUD = function (vR2, action) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.vyC, com.wiris.util.ui.interaction.EventType.vHG); e.action = action; return e; }; com.wiris.e1_m.vSD = function (vR2) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.v2D, com.wiris.util.ui.interaction.EventType.vIG); return e; }; com.wiris.e1_m.vQD = function (vR2, voC) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.v4D, voC); return e; }; com.wiris.e1_m.vuE = function (vR2, v4F, vj5, vJG, vKG) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.v5F, v4F); e.vLG = vj5; e.vJG = vJG; e.vKG = vKG; return e; }; com.wiris.e1_m.vMG = function (vR2, veC, x, y, vNG) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.v7D, veC); e.x = x; e.y = y; e.vLG = vNG; return e; }; com.wiris.e1_m.vOG = function (vR2, vZC) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.vAD, vZC); return e; }; com.wiris.e1_m.vPG = function (vR2, vUC, keyCode, charCode, vQG, vRG, vSG) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.vDD, vUC); e.keyCode = keyCode; e.charCode = charCode; e.vQG = vQG; e.vRG = vRG; e.vSG = vSG; return e; }; com.wiris.e1_m.vTG = function (vR2, vGC, x, y, pageX, pageY, button) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.vGD, vGC); e.x = x; e.y = y; e.pageX = pageX; e.pageY = pageY; e.button = button; return e; }; com.wiris.e1_m.vUG = function (vR2, vVG, x, y) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.vJD, vVG); e.x = x; e.y = y; return e; }; com.wiris.e1_m.vWG = function (vR2, v4C) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.vND, v4C); return e; }; com.wiris.e1_m.vXG = function (vR2, vYG, vZG) { var e = new com.wiris.e1_m(vR2, com.wiris.util.ui.interaction.EventType.vLD, com.wiris.util.ui.interaction.EventType.vaG); e.vYG = vYG; e.vZG = vZG; return e; }; com.wiris.e1_m.prototype = { v2G: function () { return null; }, v3G: function () { return null; }, v4G: function () { return null; }, vPD: function () { return this.vEG; }, vPF: function () { return this.vZG; }, vRF: function () { return this.vYG; }, vbG: function () { return this.vEG; }, v5G: function () { return this.vEG; }, v7F: function () { return this.vEG; }, vuF: function () { return this.vKG; }, vvF: function () { return this.vJG; }, vwF: function () { return this.vLG; }, vID: function () { return this.vEG; }, v8G: function () { return this.button; }, vFD: function () { return this.vEG; }, vdE: function () { return this.vRG; }, v9G: function () { return this.vcG; }, veE: function () { return this.vSG; }, vAG: function () { return this.vRG; }, vBG: function () { return this.vQG; }, vCG: function () { return this.charCode; }, vDG: function () { return this.keyCode; }, vCD: function () { return this.vEG; }, v9D: function () { return this.vEG; }, vxF: function () { return this.vLG; }, vyF: function () { return this.y; }, vzF: function () { return this.x; }, v6G: function () { return this.pageY; }, v7G: function () { return this.pageX; }, v0G: function () { return this.y; }, v1G: function () { return this.x; }, v6D: function () { return this.vEG; }, vtF: function () { return this.vEG; }, vrF: function () { return this.vEG; }, vsF: function () { return this.action; }, vxC: function () { return this.vM5; }, vfE: function () { return this.vR2; }, vqF: function () { return this.vR2; }, v1D: function () { return this.vGG; }, v0D: function () { return this.vFG; }, preventDefault: function () { this.vGG = true; }, stopPropagation: function () { this.vFG = false; }, vZG: null, vYG: null, button: null, vcG: null, vSG: null, vRG: null, vQG: null, charCode: null, keyCode: null, vKG: null, vJG: null, vLG: null, pageY: null, pageX: null, y: null, x: null, action: null, vR2: null, vGG: null, vFG: null, vEG: null, vM5: null, __class__: com.wiris.e1_m }; com.wiris.e1_n = vp["com.wiris.e1_n"] = function () { }; com.wiris.e1_n.__name__ = ["com", "wiris", "e1_n"]; com.wiris.e1_n.prototype = { vEC: null, __class__: com.wiris.e1_n }; com.wiris.e1_o = vp["com.wiris.e1_o"] = function (x, y) { this.x = x; this.y = y; }; com.wiris.e1_o.__name__ = ["com", "wiris", "e1_o"]; com.wiris.e1_o.prototype = { v0G: function () { return this.y; }, v1G: function () { return this.x; }, y: null, x: null, __class__: com.wiris.e1_o }; if (!com.wiris.util.xml) com.wiris.util.xml = {}; com.wiris.util.xml.WCharacterBase = vp["com.wiris.util.xml.WCharacterBase"] = function () { }; com.wiris.util.xml.WCharacterBase.__name__ = ["com", "wiris", "util", "xml", "WCharacterBase"]; com.wiris.util.xml.WCharacterBase.vdG = function (c) { if (48 <= c && c <= 57) return true; if (1632 <= c && c <= 1641) return true; if (1776 <= c && c <= 1785) return true; if (2790 <= c && c <= 2799) return true; return false; }; com.wiris.util.xml.WCharacterBase.veG = function (c) { return com.wiris.util.xml.WCharacterBase.vQ9(c) || com.wiris.util.xml.WCharacterBase.vfG(c) || c == 95; }; com.wiris.util.xml.WCharacterBase.vgG = function (c) { return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vhG, c); }; com.wiris.util.xml.WCharacterBase.viG = function (c) { return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vjG, c); }; com.wiris.util.xml.WCharacterBase.vkG = function (c) { return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vlG, c); }; com.wiris.util.xml.WCharacterBase.vmG = function (c) { return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vnG, c); }; com.wiris.util.xml.WCharacterBase.v4A = function (v, c) { var min = 0; var max = v.length - 1; do { var voG = (min + max) / 2 | 0; var vpG = v[voG]; if (c == vpG) return true; else if (c < vpG) max = voG - 1; else min = voG + 1; } while (min <= max); return false; }; com.wiris.util.xml.WCharacterBase.vqG = function () { if (com.wiris.util.xml.WCharacterBase.vrG != null) return; var h = new HaxeHash(); h.set("A", [192, 193, 194, 195, 196, 197, 256, 258, 260, 461, 478, 480, 506, 512, 514, 550, 570, 7680, 7840, 7842, 7844, 7846, 7848, 7850, 7852, 7854, 7856, 7858, 7860, 7862, 9398, 11375, 65313]); h.set("AA", [42802]); h.set("AE", [198, 482, 508]); h.set("AO", [42804]); h.set("AU", [42806]); h.set("AV", [42808, 42810]); h.set("AY", [42812]); h.set("B", [385, 386, 579, 7682, 7684, 7686, 9399, 65314]); h.set("C", [199, 262, 264, 266, 268, 391, 571, 7688, 9400, 42814, 65315]); h.set("D", [208, 270, 272, 393, 394, 395, 7690, 7692, 7694, 7696, 7698, 9401, 42873, 65316]); h.set("DZ", [452, 497]); h.set("Dz", [453, 498]); h.set("E", [200, 201, 202, 203, 274, 276, 278, 280, 282, 398, 400, 516, 518, 552, 7700, 7702, 7704, 7706, 7708, 7864, 7866, 7868, 7870, 7872, 7874, 7876, 7878, 9402, 65317]); h.set("F", [401, 7710, 9403, 42875, 65318]); h.set("G", [284, 286, 288, 290, 403, 484, 486, 500, 7712, 9404, 42877, 42878, 42912, 65319]); h.set("H", [292, 294, 542, 7714, 7716, 7718, 7720, 7722, 9405, 11367, 11381, 42893, 65320]); h.set("I", [204, 205, 206, 207, 296, 298, 300, 302, 304, 407, 463, 520, 522, 7724, 7726, 7880, 7882, 9406, 65321]); h.set("J", [308, 584, 9407, 65322]); h.set("K", [310, 408, 488, 7728, 7730, 7732, 9408, 11369, 42816, 42818, 42820, 42914, 65323]); h.set("L", [313, 315, 317, 319, 321, 573, 7734, 7736, 7738, 7740, 9409, 11360, 11362, 42822, 42824, 42880, 65324]); h.set("LJ", [455]); h.set("Lj", [456]); h.set("M", [412, 7742, 7744, 7746, 9410, 11374, 65325]); h.set("N", [209, 323, 325, 327, 413, 504, 544, 7748, 7750, 7752, 7754, 9411, 42896, 42916, 65326]); h.set("NJ", [458]); h.set("Nj", [459]); h.set("O", [210, 211, 212, 213, 214, 216, 332, 334, 336, 390, 415, 416, 465, 490, 492, 510, 524, 526, 554, 556, 558, 560, 7756, 7758, 7760, 7762, 7884, 7886, 7888, 7890, 7892, 7894, 7896, 7898, 7900, 7902, 7904, 7906, 9412, 42826, 42828, 65327]); h.set("OI", [418]); h.set("OO", [42830]); h.set("OU", [546]); h.set("OE", [140, 338]); h.set("oe", [156, 339]); h.set("P", [420, 7764, 7766, 9413, 11363, 42832, 42834, 42836, 65328]); h.set("Q", [586, 9414, 42838, 42840, 65329]); h.set("R", [340, 342, 344, 528, 530, 588, 7768, 7770, 7772, 7774, 9415, 11364, 42842, 42882, 42918, 65330]); h.set("S", [346, 348, 350, 352, 536, 7776, 7778, 7780, 7782, 7784, 7838, 9416, 11390, 42884, 42920, 65331]); h.set("T", [354, 356, 358, 428, 430, 538, 574, 7786, 7788, 7790, 7792, 9417, 42886, 65332]); h.set("TZ", [42792]); h.set("U", [217, 218, 219, 220, 360, 362, 364, 366, 368, 370, 431, 467, 469, 471, 473, 475, 532, 534, 580, 7794, 7796, 7798, 7800, 7802, 7908, 7910, 7912, 7914, 7916, 7918, 7920, 9418, 65333]); h.set("V", [434, 581, 7804, 7806, 9419, 42846, 65334]); h.set("VY", [42848]); h.set("W", [372, 7808, 7810, 7812, 7814, 7816, 9420, 11378, 65335]); h.set("X", [7818, 7820, 9421, 65336]); h.set("Y", [221, 374, 376, 435, 562, 590, 7822, 7922, 7924, 7926, 7928, 7934, 9422, 65337]); h.set("Z", [377, 379, 381, 437, 548, 7824, 7826, 7828, 9423, 11371, 11391, 42850, 65338]); h.set("a", [224, 225, 226, 227, 228, 229, 257, 259, 261, 462, 479, 481, 507, 513, 515, 551, 592, 7681, 7834, 7841, 7843, 7845, 7847, 7849, 7851, 7853, 7855, 7857, 7859, 7861, 7863, 9424, 11365, 65345]); h.set("aa", [42803]); h.set("ae", [230, 483, 509]); h.set("ao", [42805]); h.set("au", [42807]); h.set("av", [42809, 42811]); h.set("ay", [42813]); h.set("b", [384, 387, 595, 7683, 7685, 7687, 9425, 65346]); h.set("c", [231, 263, 265, 267, 269, 392, 572, 7689, 8580, 9426, 42815, 65347]); h.set("d", [271, 273, 396, 598, 599, 7691, 7693, 7695, 7697, 7699, 9427, 42874, 65348]); h.set("dz", [454, 499]); h.set("e", [232, 233, 234, 235, 275, 277, 279, 281, 283, 477, 517, 519, 553, 583, 603, 7701, 7703, 7705, 7707, 7709, 7865, 7867, 7869, 7871, 7873, 7875, 7877, 7879, 9428, 65349]); h.set("f", [402, 7711, 9429, 42876, 65350]); h.set("g", [285, 287, 289, 291, 485, 487, 501, 608, 7545, 7713, 9430, 42879, 42913, 65351]); h.set("h", [293, 295, 543, 613, 7715, 7717, 7719, 7721, 7723, 7830, 9431, 11368, 11382, 65352]); h.set("hv", [405]); h.set("i", [236, 237, 238, 239, 297, 299, 301, 303, 305, 464, 521, 523, 616, 7725, 7727, 7881, 7883, 9432, 65353]); h.set("j", [309, 496, 585, 9433, 65354]); h.set("k", [311, 409, 489, 7729, 7731, 7733, 9434, 11370, 42817, 42819, 42821, 42915, 65355]); h.set("l", [314, 316, 318, 320, 322, 383, 410, 619, 7735, 7737, 7739, 7741, 9435, 11361, 42823, 42825, 42881, 65356]); h.set("lj", [457]); h.set("m", [623, 625, 7743, 7745, 7747, 9436, 65357]); h.set("n", [241, 324, 326, 328, 329, 414, 505, 626, 7749, 7751, 7753, 7755, 9437, 42897, 42917, 65358]); h.set("nj", [460]); h.set("o", [242, 243, 244, 245, 246, 248, 333, 335, 337, 417, 466, 491, 493, 511, 525, 527, 555, 557, 559, 561, 596, 629, 7757, 7759, 7761, 7763, 7885, 7887, 7889, 7891, 7893, 7895, 7897, 7899, 7901, 7903, 7905, 7907, 9438, 42827, 42829, 65359]); h.set("oi", [419]); h.set("ou", [547]); h.set("oo", [42831]); h.set("p", [421, 7549, 7765, 7767, 9439, 42833, 42835, 42837, 65360]); h.set("q", [587, 9440, 42839, 42841, 65361]); h.set("r", [341, 343, 345, 529, 531, 589, 637, 7769, 7771, 7773, 7775, 9441, 42843, 42883, 42919, 65362]); h.set("s", [223, 347, 349, 351, 353, 537, 575, 7777, 7779, 7781, 7783, 7785, 7835, 9442, 42885, 42921, 65363]); h.set("t", [355, 357, 359, 429, 539, 648, 7787, 7789, 7791, 7793, 7831, 9443, 11366, 42887, 65364]); h.set("tz", [42793]); h.set("u", [249, 250, 251, 252, 361, 363, 365, 367, 369, 371, 432, 468, 470, 472, 474, 476, 533, 535, 649, 7795, 7797, 7799, 7801, 7803, 7909, 7911, 7913, 7915, 7917, 7919, 7921, 9444, 65365]); h.set("v", [651, 652, 7805, 7807, 9445, 42847, 65366]); h.set("vy", [42849]); h.set("w", [373, 7809, 7811, 7813, 7815, 7817, 7832, 9446, 11379, 65367]); h.set("x", [7819, 7821, 9447, 65368]); h.set("y", [253, 255, 375, 436, 563, 591, 7823, 7833, 7923, 7925, 7927, 7929, 7935, 9448, 65369]); h.set("z", [378, 380, 382, 438, 549, 576, 7825, 7827, 7829, 9449, 11372, 42851, 65370]); com.wiris.util.xml.WCharacterBase.vrG = h; }; com.wiris.util.xml.WCharacterBase.vsG = function () { var vtG = new HaxeHash(); vtG.set(com.wiris.util.xml.WCharacterBase.vuG, "SymbolUnicodeCategory"); vtG.set(com.wiris.util.xml.WCharacterBase.vvG, "PunctuationUnicodeCategory"); vtG.set(com.wiris.util.xml.WCharacterBase.vwG, "LetterUnicodeCategory"); vtG.set(com.wiris.util.xml.WCharacterBase.vxG, "MarkUnicodeCategory"); vtG.set(com.wiris.util.xml.WCharacterBase.vyG, "NumberUnicodeCategory"); vtG.set(com.wiris.util.xml.WCharacterBase.vzG, "PhoneticalUnicodeCategory"); vtG.set(com.wiris.util.xml.WCharacterBase.v0H, "OtherUnicodeCategory"); return vtG; }; com.wiris.util.xml.WCharacterBase.v1H = function (v2H) { var v3H = com.wiris.util.xml.WCharacterBase.v4H.indexOf("@" + v2H + ":"); var v5H = HxOverrides.substr(com.wiris.util.xml.WCharacterBase.v4H, v3H + 3, null); var v6H = v5H.indexOf("@"); v5H = HxOverrides.substr(v5H, 0, v6H); return com.wiris.util.xml.WCharacterBase.v7H(v5H); }; com.wiris.util.xml.WCharacterBase.v7H = function (v8H) { var v9H = v8H.split(","); var vAH = new Array(); var i = 0; while (i < v9H.length) { var vBH = v9H[i]; vBH = StringTools.replace(vBH, " ", ""); if (vBH.indexOf("-") != -1) { var vCH = com.wiris.util.xml.WCharacterBase.vDH(vBH.split("-")[0]); var vEH = com.wiris.util.xml.WCharacterBase.vDH(vBH.split("-")[1]); var vFH = vCH; while (vFH <= vEH) { vAH.push(com.wiris.e1_8.vj1(vFH)); vFH++; } } else { var vFH = com.wiris.util.xml.WCharacterBase.vDH(vBH); vAH.push(com.wiris.e1_8.vj1(vFH)); }; i++; }; return vAH; }; com.wiris.util.xml.WCharacterBase.vDH = function (vGH) { return Std.parseInt("0x" + vGH); }; com.wiris.util.xml.WCharacterBase.vHH = function (str) { var vIH = ""; var i = 0; while (i < str.length) { var c = HxOverrides.cca(str, i); var j = 0; while (j < com.wiris.util.xml.WCharacterBase.vJH.length) { if (c == com.wiris.util.xml.WCharacterBase.vJH[j]) { c = com.wiris.util.xml.WCharacterBase.vJH[j + 1]; break; }; j += 2; }; vIH += com.wiris.e1_8.vj1(c); ++i; }; return vIH; }; com.wiris.util.xml.WCharacterBase.vKH = function (c) { var i = 0; while (i < com.wiris.util.xml.WCharacterBase.vLH.length) { if (c == com.wiris.util.xml.WCharacterBase.vLH[i]) return true; ++i; }; return false; }; com.wiris.util.xml.WCharacterBase.vMH = function (c) { var i = 0; while (i < com.wiris.util.xml.WCharacterBase.vNH.length) { if (com.wiris.util.xml.WCharacterBase.vNH[i] == c) return com.wiris.util.xml.WCharacterBase.vNH[i + 1]; i += 2; }; return -1; }; com.wiris.util.xml.WCharacterBase.vOH = function (c) { var i = 1; while (i < com.wiris.util.xml.WCharacterBase.vNH.length) { if (com.wiris.util.xml.WCharacterBase.vNH[i] == c) return com.wiris.util.xml.WCharacterBase.vNH[i - 1]; i += 2; }; return -1; }; com.wiris.util.xml.WCharacterBase.vPH = function (s) { var v11 = com.wiris.e1_8.vQ8(s); while (v11.hasNext()) if (!com.wiris.util.xml.WCharacterBase.vfG(v11.next())) return false; return true; }; com.wiris.util.xml.WCharacterBase.vfG = function (c) { return c >= 768 && c <= 879 || c >= 6832 && c <= 6911 || c >= 7616 && c <= 7679 && (c >= 8400 && c <= 8447) && (c >= 65056 && c <= 65071); }; com.wiris.util.xml.WCharacterBase.vQ9 = function (c) { if (com.wiris.util.xml.WCharacterBase.vdG(c)) return false; if (65 <= c && c <= 90) return true; if (97 <= c && c <= 122) return true; if (192 <= c && c <= 696 && c != 215 && c != 247) return true; if (867 <= c && c <= 1521) return true; if (1552 <= c && c <= 8188) return true; if (c == 8472 || c == 8467 || com.wiris.util.xml.WCharacterBase.vQH(c) || com.wiris.util.xml.WCharacterBase.vRH(c) || com.wiris.util.xml.WCharacterBase.vSH(c)) return true; if (com.wiris.util.xml.WCharacterBase.vTH(c)) return true; if (com.wiris.util.xml.WCharacterBase.vUH(c)) return true; return false; }; com.wiris.util.xml.WCharacterBase.vVH = function (c) { return com.wiris.util.xml.WCharacterBase.vQH(c) || com.wiris.util.xml.WCharacterBase.vRH(c) || com.wiris.util.xml.WCharacterBase.vSH(c); }; com.wiris.util.xml.WCharacterBase.vWH = function (c) { return c == 120128 || c == 8450 || c == 8461 || c == 8469 || c == 8473 || c == 8474 || c == 8477 || c == 8484; }; com.wiris.util.xml.WCharacterBase.vQH = function (c) { return c >= 120120 && c <= 120171 || c == 8450 || c == 8461 || c == 8469 || c == 8473 || c == 8474 || c == 8477 || c == 8484; }; com.wiris.util.xml.WCharacterBase.vRH = function (c) { return c >= 120068 && c <= 120119 || c == 8493 || c == 8460 || c == 8465 || c == 8476 || c == 8488; }; com.wiris.util.xml.WCharacterBase.vSH = function (c) { return c >= 119964 && c <= 120015 || c == 8458 || c == 8459 || c == 8466 || c == 8464 || c == 8499 || c == 8500 || c == 8492 || c == 8495 || c == 8496 || c == 8497 || c == 8475; }; com.wiris.util.xml.WCharacterBase.vXH = function (c) { return c >= 97 && c <= 122 || c >= 224 && c <= 255 || c >= 591 && c >= 659 || c >= 661 && c <= 687 || c >= 940 && c <= 974; }; com.wiris.util.xml.WCharacterBase.vYH = function (c) { if (com.wiris.util.xml.WCharacterBase.vZH(c) || com.wiris.util.xml.WCharacterBase.vTH(c) || com.wiris.util.xml.WCharacterBase.vaH(c) || com.wiris.util.xml.WCharacterBase.vbH(c) || com.wiris.util.xml.WCharacterBase.vcH(c) || com.wiris.util.xml.WCharacterBase.vUH(c)) return true; return false; }; com.wiris.util.xml.WCharacterBase.vdH = function (s) { var i = s.length - 1; while (i >= 0) { if (!com.wiris.util.xml.WCharacterBase.veH(HxOverrides.cca(s, i))) return false; --i; }; return true; }; com.wiris.util.xml.WCharacterBase.veH = function (c) { if (c >= 1536 && c <= 1791 && !com.wiris.util.xml.WCharacterBase.vdG(c)) return true; return false; }; com.wiris.util.xml.WCharacterBase.vaH = function (c) { if (c >= 1424 && c <= 1535) return true; return false; }; com.wiris.util.xml.WCharacterBase.vTH = function (c) { if (c >= 13312 && c <= 40959) return true; return false; }; com.wiris.util.xml.WCharacterBase.vUH = function (c) { if (c >= 12593 && c <= 52044) return true; return false; }; com.wiris.util.xml.WCharacterBase.vfH = function (c) { if (c >= 945 && c <= 969) return true; else if (c >= 913 && c <= 937 && c != 930) return true; else if (c == 977 || c == 981 || c == 982) return true; return false; }; com.wiris.util.xml.WCharacterBase.vZH = function (c) { if (c >= 2304 && c < 2431) return true; return false; }; com.wiris.util.xml.WCharacterBase.vcH = function (c) { if (c >= 2689 && c < 2788 || c == 2800 || c == 2801) return true; return false; }; com.wiris.util.xml.WCharacterBase.vbH = function (c) { if (3585 <= c && c < 3676) return true; return false; }; com.wiris.util.xml.WCharacterBase.vgH = function (s) { var i = s.length - 1; while (i >= 0) { if (!com.wiris.util.xml.WCharacterBase.vZH(HxOverrides.cca(s, i))) return false; --i; }; return true; }; com.wiris.util.xml.WCharacterBase.vhH = function (c) { if (com.wiris.util.xml.WCharacterBase.vaH(c) || com.wiris.util.xml.WCharacterBase.veH(c)) return true; return false; }; com.wiris.util.xml.WCharacterBase.viH = function (c) { if (97 <= c && c <= 122 || 945 <= c && c <= 969) return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vjH, c); return true; }; com.wiris.util.xml.WCharacterBase.vkH = function (c) { if (97 <= c && c <= 122 || 945 <= c && c <= 969) return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vlH, c); else if (65 <= c && c <= 90) return false; return true; }; com.wiris.util.xml.WCharacterBase.vmH = function (text) { var i = 0; var n = com.wiris.e1_8.vK8(text); while (i < n) { if (!com.wiris.util.xml.WCharacterBase.vdG(com.wiris.e1_8.charCodeAt(text, i))) return false; ++i; }; return true; }; com.wiris.util.xml.WCharacterBase.vnH = function (c) { return c == 178 || c == 179 || c == 185 || c >= 8304 && c <= 8319 && c != 8306 && c != 8307; }; com.wiris.util.xml.WCharacterBase.voH = function (c) { return c >= 8320 && c <= 8348 && c != 8335; }; com.wiris.util.xml.WCharacterBase.vpH = function (c) { return com.wiris.util.xml.WCharacterBase.vnH(c) || com.wiris.util.xml.WCharacterBase.voH(c); }; com.wiris.util.xml.WCharacterBase.vqH = function (c) { var i = 0; var n = com.wiris.util.xml.WCharacterBase.vrH.length; while (i < n) { if (com.wiris.util.xml.WCharacterBase.vrH[i] == c) return com.wiris.util.xml.WCharacterBase.vrH[i + 1]; i += 2; }; return c; }; com.wiris.util.xml.WCharacterBase.vsH = function (c) { return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vtH, c); }; com.wiris.util.xml.WCharacterBase.vuH = function (c) { return com.wiris.util.xml.WCharacterBase.v4A(com.wiris.util.xml.WCharacterBase.vvH, c); }; com.wiris.util.xml.WCharacterBase.vwH = function (l) { var index = -1; if (l < 100) index = com.wiris.util.xml.WCharacterBase.vxH.indexOf("@00" + l + "@"); else if (l < 1000) index = com.wiris.util.xml.WCharacterBase.vxH.indexOf("@0" + l + "@"); else index = com.wiris.util.xml.WCharacterBase.vxH.indexOf("@" + l + "@"); if (index != -1) { var s = HxOverrides.substr(com.wiris.util.xml.WCharacterBase.vyH, index + 1, 4); return Std.parseInt(s); }; return l; }; com.wiris.util.xml.WCharacterBase.vzH = function (g) { var index = -1; if (g < 100) index = com.wiris.util.xml.WCharacterBase.vyH.indexOf("@00" + g + "@"); else if (g < 1000) index = com.wiris.util.xml.WCharacterBase.vyH.indexOf("@0" + g + "@"); else index = com.wiris.util.xml.WCharacterBase.vyH.indexOf("@" + g + "@"); if (index != -1) { var s = HxOverrides.substr(com.wiris.util.xml.WCharacterBase.vxH, index + 1, 4); return Std.parseInt(s); }; return g; }; com.wiris.util.xml.WCharacterBase.v0I = function (c) { return com.wiris.util.xml.WCharacterBase.vgG(c) || com.wiris.util.xml.WCharacterBase.viG(c) || com.wiris.util.xml.WCharacterBase.vkG(c) || com.wiris.util.xml.WCharacterBase.vmG(c) || c == HxOverrides.cca(".", 0) || c == HxOverrides.cca(",", 0) || c == HxOverrides.cca(":", 0); }; com.wiris.util.xml.WCharacterBase.v1I = function (c) { var i = 0; while (i < com.wiris.util.xml.WCharacterBase.v2I.length) { if (c == com.wiris.util.xml.WCharacterBase.v2I[i]) return true; ++i; }; return false; }; com.wiris.util.xml.WCharacterBase.v3I = function (c) { if (c >= 592 && c <= 687) return true; if (c >= 688 && c <= 767) return true; if (c >= 8215 && c <= 8233 || c >= 8241 && c <= 8303) return true; if (c >= 8304 && c <= 8351) return true; if (c >= 8400 && c <= 8447) return true; if (c >= 8448 && c <= 8527) return true; if (c >= 8528 && c <= 8591) return true; if (c >= 8592 && c <= 8703) return true; if (c >= 8704 && c <= 8959) return true; if (c >= 8960 && c <= 9215) return true; if (c >= 9312 && c <= 9471) return true; if (c >= 9472 && c <= 9599) return true; if (c >= 9600 && c <= 9631) return true; if (c >= 9632 && c <= 9727) return true; if (c >= 9728 && c <= 9983) return true; if (c >= 9984 && c <= 10175) return true; if (c >= 10176 && c <= 10223) return true; if (c >= 10224 && c <= 10239) return true; if (c >= 10240 && c <= 10495) return true; if (c >= 10496 && c <= 10623) return true; if (c >= 10624 && c <= 10751) return true; if (c >= 10752 && c <= 11007) return true; if (c >= 11008 && c <= 11263) return true; if (c >= 12288 && c <= 12351) return true; if (c >= 57344 && c <= 65535) return true; if (c >= 119808 && c <= 119963 || c >= 120224 && c <= 120831) return true; if (c == 12398 || c == 42791 || c == 42898) return true; return false; }; com.wiris.util.xml.WCharacterBase.v4I = function (v5I) { if (v5I == 67) return 8450; else if (v5I == 72) return 8461; else if (v5I == 78) return 8469; else if (v5I == 80) return 8473; else if (v5I == 81) return 8474; else if (v5I == 82) return 8477; else if (v5I == 90) return 8484; else if (v5I >= com.wiris.util.xml.WCharacterBase.v6I && v5I <= com.wiris.util.xml.WCharacterBase.v7I) return v5I + (com.wiris.util.xml.WCharacterBase.v8I - com.wiris.util.xml.WCharacterBase.v6I); else if (v5I >= com.wiris.util.xml.WCharacterBase.v9I && v5I <= com.wiris.util.xml.WCharacterBase.vAI) return v5I + (com.wiris.util.xml.WCharacterBase.vBI - com.wiris.util.xml.WCharacterBase.v9I); else if (v5I >= com.wiris.util.xml.WCharacterBase.vCI && v5I <= com.wiris.util.xml.WCharacterBase.vDI) return v5I + (com.wiris.util.xml.WCharacterBase.vEI - com.wiris.util.xml.WCharacterBase.vCI); else return v5I; }; com.wiris.util.xml.WCharacterBase.vFI = function (v5I) { if (v5I == 66) return 8492; else if (v5I == 69) return 8496; else if (v5I == 70) return 8497; else if (v5I == 72) return 8459; else if (v5I == 73) return 8464; else if (v5I == 76) return 8466; else if (v5I == 77) return 8499; else if (v5I == 82) return 8475; else if (v5I == 101) return 8495; else if (v5I == 103) return 8458; else if (v5I == 111) return 8500; else if (v5I >= com.wiris.util.xml.WCharacterBase.v6I && v5I <= com.wiris.util.xml.WCharacterBase.v7I) return v5I + (com.wiris.util.xml.WCharacterBase.vGI - com.wiris.util.xml.WCharacterBase.v6I); else if (v5I >= com.wiris.util.xml.WCharacterBase.v9I && v5I <= com.wiris.util.xml.WCharacterBase.vAI) return v5I + (com.wiris.util.xml.WCharacterBase.vHI - com.wiris.util.xml.WCharacterBase.v9I); else return v5I; }; com.wiris.util.xml.WCharacterBase.vII = function (v5I) { if (v5I == 67) return 8493; else if (v5I == 72) return 8460; else if (v5I == 73) return 8465; else if (v5I == 82) return 8476; else if (v5I == 90) return 8488; else if (v5I >= com.wiris.util.xml.WCharacterBase.v6I && v5I <= com.wiris.util.xml.WCharacterBase.v7I) return v5I + (com.wiris.util.xml.WCharacterBase.vJI - com.wiris.util.xml.WCharacterBase.v6I); else if (v5I >= com.wiris.util.xml.WCharacterBase.v9I && v5I <= com.wiris.util.xml.WCharacterBase.vAI) return v5I + (com.wiris.util.xml.WCharacterBase.vKI - com.wiris.util.xml.WCharacterBase.v9I); else return v5I; }; com.wiris.util.xml.WCharacterBase.vLI = function (c) { com.wiris.util.xml.WCharacterBase.vqG(); if (c >= 128) { var i = com.wiris.util.xml.WCharacterBase.vrG.keys(); while (i.hasNext()) { var s = i.next(); var vMI = com.wiris.util.xml.WCharacterBase.vrG.get(s); if (com.wiris.util.xml.WCharacterBase.v4A(vMI, c)) return s; }; return com.wiris.e1_8.vj1(c); } else return com.wiris.e1_8.vj1(c); }; var haxe = haxe || {}; haxe.Int32 = vp["haxe.Int32"] = function () { }; haxe.Int32.__name__ = ["haxe", "Int32"]; haxe.Int32.make = function (a, b) { return a << 16 | b; }; haxe.Int32.ofInt = function (x) { return x | 0; }; haxe.Int32.vT4 = function (x) { return x | 0; }; haxe.Int32.toInt = function (x) { if ((x >> 30 & 1) != x >>> 31) throw "Overflow " + Std.string(x); return x; }; haxe.Int32.toNativeInt = function (x) { return x; }; haxe.Int32.add = function (a, b) { return a + b | 0; }; haxe.Int32.sub = function (a, b) { return a - b | 0; }; haxe.Int32.mul = function (a, b) { return a * (b & 65535) + (a * (b >>> 16) << 16 | 0) | 0; }; haxe.Int32.div = function (a, b) { return a / b | 0; }; haxe.Int32.mod = function (a, b) { return a % b; }; haxe.Int32.shl = function (a, b) { return a << b; }; haxe.Int32.shr = function (a, b) { return a >> b; }; haxe.Int32.ushr = function (a, b) { return a >>> b; }; haxe.Int32.and = function (a, b) { return a & b; }; haxe.Int32.or = function (a, b) { return a | b; }; haxe.Int32.xor = function (a, b) { return a ^ b; }; haxe.Int32.neg = function (a) { return -a; }; haxe.Int32.vNI = function (a) { return a < 0; }; haxe.Int32.vOI = function (a) { return a == 0; }; haxe.Int32.complement = function (a) { return ~a; }; haxe.Int32.compare = function (a, b) { return a - b; }; haxe.Int32.vPI = function (a, b) { if (a < 0) return b < 0 ? ~b - ~a : 1; return b < 0 ? -1 : a - b; }; haxe.Int64 = vp["haxe.Int64"] = function (v08, v18) { this.v08 = v08; this.v18 = v18; }; haxe.Int64.__name__ = ["haxe", "Int64"]; haxe.Int64.make = function (v08, v18) { return new haxe.Int64(v08, v18); }; haxe.Int64.ofInt = function (x) { return new haxe.Int64(x >> 31 | 0, x | 0); }; haxe.Int64.vQI = function (x) { return new haxe.Int64(x >> 31, x); }; haxe.Int64.toInt = function (x) { if (haxe.Int32.toInt(x.v08) != 0) { if (x.v08 < 0) return -haxe.Int64.toInt(haxe.Int64.neg(x)); throw "Overflow"; }; return haxe.Int32.toInt(x.v18); }; haxe.Int64.vRI = function (x) { return x.v18; }; haxe.Int64.vSI = function (x) { return x.v08; }; haxe.Int64.add = function (a, b) { var v08 = a.v08 + b.v08 | 0; var v18 = a.v18 + b.v18 | 0; if (haxe.Int32.vPI(v18, a.v18) < 0) v08 = v08 + (1 | 0) | 0; return new haxe.Int64(v08, v18); }; haxe.Int64.sub = function (a, b) { var v08 = a.v08 - b.v08 | 0; var v18 = a.v18 - b.v18 | 0; if (haxe.Int32.vPI(a.v18, b.v18) < 0) v08 = v08 - (1 | 0) | 0; return new haxe.Int64(v08, v18); }; haxe.Int64.mul = function (a, b) { var vTI = 65535 | 0; var vUI = a.v18 & vTI, vVI = a.v18 >>> 16; var vWI = b.v18 & vTI, vXI = b.v18 >>> 16; var vYI = vUI * (vWI & 65535) + (vUI * (vWI >>> 16) << 16 | 0) | 0; var vZI = vVI * (vWI & 65535) + (vVI * (vWI >>> 16) << 16 | 0) | 0; var vaI = vUI * (vXI & 65535) + (vUI * (vXI >>> 16) << 16 | 0) | 0; var vbI = vVI * (vXI & 65535) + (vVI * (vXI >>> 16) << 16 | 0) | 0; var v18 = vYI; var v08 = (vbI + (vaI >>> 16) | 0) + (vZI >>> 16) | 0; vaI = vaI << 16; v18 = v18 + vaI | 0; if (haxe.Int32.vPI(v18, vaI) < 0) v08 = v08 + (1 | 0) | 0; vZI = vZI << 16; v18 = v18 + vZI | 0; if (haxe.Int32.vPI(v18, vZI) < 0) v08 = v08 + (1 | 0) | 0; v08 = v08 + haxe.Int32.mul(a.v18, b.v08) | 0; v08 = v08 + haxe.Int32.mul(a.v08, b.v18) | 0; return new haxe.Int64(v08, v18); }; haxe.Int64.vcI = function (vdI, veI) { var vfI = new haxe.Int64(0 | 0, 0 | 0); var vTI = new haxe.Int64(0 | 0, 1 | 0); veI = new haxe.Int64(veI.v08, veI.v18); while (!(veI.v08 < 0)) { var v3A = haxe.Int64.vPI(veI, vdI); veI.v08 = veI.v08 << 1 | veI.v18 >>> 31; veI.v18 = veI.v18 << 1; vTI.v08 = vTI.v08 << 1 | vTI.v18 >>> 31; vTI.v18 = vTI.v18 << 1; if (v3A >= 0) break; }; while (!((vTI.v18 | vTI.v08) == 0)) { if (haxe.Int64.vPI(vdI, veI) >= 0) { vfI.v08 = vfI.v08 | vTI.v08; vfI.v18 = vfI.v18 | vTI.v18; vdI = haxe.Int64.sub(vdI, veI); }; vTI.v18 = vTI.v18 >>> 1 | vTI.v08 << 31; vTI.v08 = vTI.v08 >>> 1; veI.v18 = veI.v18 >>> 1 | veI.v08 << 31; veI.v08 = veI.v08 >>> 1; }; return { vfI: vfI, vdI: vdI }; }; haxe.Int64.div = function (a, b) { var vgI = (a.v08 | b.v08) < 0; if (a.v08 < 0) a = haxe.Int64.neg(a); if (b.v08 < 0) b = haxe.Int64.neg(b); var q = haxe.Int64.vcI(a, b).vfI; return vgI ? haxe.Int64.neg(q) : q; }; haxe.Int64.mod = function (a, b) { var vgI = (a.v08 | b.v08) < 0; if (a.v08 < 0) a = haxe.Int64.neg(a); if (b.v08 < 0) b = haxe.Int64.neg(b); var m = haxe.Int64.vcI(a, b).vdI; return vgI ? haxe.Int64.neg(m) : m; }; haxe.Int64.shl = function (a, b) { return (b & 63) == 0 ? a : (b & 63) < 32 ? new haxe.Int64(a.v08 << b | a.v18 >>> 32 - (b & 63), a.v18 << b) : new haxe.Int64(a.v18 << b - 32, 0 | 0); }; haxe.Int64.shr = function (a, b) { return (b & 63) == 0 ? a : (b & 63) < 32 ? new haxe.Int64(a.v08 >> b, a.v18 >>> b | a.v08 << 32 - (b & 63)) : new haxe.Int64(a.v08 >> 31, a.v08 >> b - 32); }; haxe.Int64.ushr = function (a, b) { return (b & 63) == 0 ? a : (b & 63) < 32 ? new haxe.Int64(a.v08 >>> b, a.v18 >>> b | a.v08 << 32 - (b & 63)) : new haxe.Int64(0 | 0, a.v08 >>> b - 32); }; haxe.Int64.and = function (a, b) { return new haxe.Int64(a.v08 & b.v08, a.v18 & b.v18); }; haxe.Int64.or = function (a, b) { return new haxe.Int64(a.v08 | b.v08, a.v18 | b.v18); }; haxe.Int64.xor = function (a, b) { return new haxe.Int64(a.v08 ^ b.v08, a.v18 ^ b.v18); }; haxe.Int64.neg = function (a) { var v08 = ~a.v08; var v18 = -a.v18; if (v18 == 0) v08 = v08 + (1 | 0) | 0; return new haxe.Int64(v08, v18); }; haxe.Int64.vNI = function (a) { return a.v08 < 0; }; haxe.Int64.vOI = function (a) { return (a.v08 | a.v18) == 0; }; haxe.Int64.compare = function (a, b) { var v = a.v08 - b.v08; return v != 0 ? v : haxe.Int32.vPI(a.v18, b.v18); }; haxe.Int64.vPI = function (a, b) { var v = haxe.Int32.vPI(a.v08, b.v08); return v != 0 ? v : haxe.Int32.vPI(a.v18, b.v18); }; haxe.Int64.vhI = function (a) { return a.toString(); }; haxe.Int64.prototype = { toString: function () { if (this.v08 == 0 && this.v18 == 0) return "0"; var str = ""; var neg = false; var i = this; if (i.v08 < 0) { neg = true; i = haxe.Int64.neg(i); }; var viI = new haxe.Int64(0 | 0, 10 | 0); while (!((i.v08 | i.v18) == 0)) { var r = haxe.Int64.vcI(i, viI); str = haxe.Int32.toInt(r.vdI.v18) + str; i = r.vfI; }; if (neg) str = "-" + str; return str; }, v18: null, v08: null, __class__: haxe.Int64 }; haxe.Json = vp["haxe.Json"] = function () { }; haxe.Json.__name__ = ["haxe", "Json"]; haxe.Json.parse = function (text) { return new haxe.Json().vjI(text); }; haxe.Json.stringify = function (value) { return new haxe.Json().toString(value); }; haxe.Json.prototype = { vkI: function () { var start = this.pos; var buf = new StringBuf(); while (true) { var c = this.str.charCodeAt(this.pos++); if (c == 34) break; if (c == 92) { buf.b += HxOverrides.substr(this.str, start, this.pos - start - 1); c = this.str.charCodeAt(this.pos++); switch (c) { case 114: buf.b += String.fromCharCode(13); break; case 110: buf.b += String.fromCharCode(10); break; case 116: buf.b += String.fromCharCode(9); break; case 98: buf.b += String.fromCharCode(8); break; case 102: buf.b += String.fromCharCode(12); break; case 47: case 92: case 34: buf.b += String.fromCharCode(c); break; case 117: var vlI = Std.parseInt("0x" + HxOverrides.substr(this.str, this.pos, 4)); this.pos += 4; buf.b += String.fromCharCode(vlI); break; default: throw "Invalid escape sequence \\" + String.fromCharCode(c) + " at position " + (this.pos - 1); }; start = this.pos; } else if (c != c) throw "Unclosed string"; }; buf.b += HxOverrides.substr(this.str, start, this.pos - start - 1); return buf.b; }, vmI: function () { while (true) { var c = this.str.charCodeAt(this.pos++); switch (c) { case 32: case 13: case 10: case 9: break; case 123: var obj = {}, field = null, vnI = null; while (true) { var voI = this.str.charCodeAt(this.pos++); switch (voI) { case 32: case 13: case 10: case 9: break; case 125: if (field != null || vnI == false) this.vpI(); return obj; case 58: if (field == null) this.vpI(); obj[field] = this.vmI(); field = null; vnI = true; break; case 44: if (vnI) vnI = false; else this.vpI(); break; case 34: if (vnI) this.vpI(); field = this.vkI(); break; default: this.vpI(); } }; break; case 91: var arr = [], vnI = null; while (true) { var voI = this.str.charCodeAt(this.pos++); switch (voI) { case 32: case 13: case 10: case 9: break; case 93: if (vnI == false) this.vpI(); return arr; case 44: if (vnI) vnI = false; else this.vpI(); break; default: if (vnI) this.vpI(); this.pos--; arr.push(this.vmI()); vnI = true; } }; break; case 116: var save = this.pos; if (this.str.charCodeAt(this.pos++) != 114 || this.str.charCodeAt(this.pos++) != 117 || this.str.charCodeAt(this.pos++) != 101) { this.pos = save; this.vpI(); }; return true; case 102: var save = this.pos; if (this.str.charCodeAt(this.pos++) != 97 || this.str.charCodeAt(this.pos++) != 108 || this.str.charCodeAt(this.pos++) != 115 || this.str.charCodeAt(this.pos++) != 101) { this.pos = save; this.vpI(); }; return false; case 110: var save = this.pos; if (this.str.charCodeAt(this.pos++) != 117 || this.str.charCodeAt(this.pos++) != 108 || this.str.charCodeAt(this.pos++) != 108) { this.pos = save; this.vpI(); }; return null; case 34: return this.vkI(); case 48: case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: case 45: this.pos--; if (!this.vqI.match(HxOverrides.substr(this.str, this.pos, null))) throw "Invalid float at position " + this.pos; var v = this.vqI.matched(0); this.pos += v.length; var f = Std.parseFloat(v); var i = f | 0; return i == f ? i : f; default: this.vpI(); } } }, vrI: function () { return this.str.charCodeAt(this.pos++); }, vpI: function () { this.pos--; throw "Invalid char " + this.str.charCodeAt(this.pos) + " at position " + this.pos; }, vjI: function (str) { this.vqI = new EReg("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?", ""); this.str = str; this.pos = 0; return this.vmI(); }, quote: function (s) { this.buf.b += Std.string("\""); var i = 0; while (true) { var c = s.charCodeAt(i++); if (c != c) break; switch (c) { case 34: this.buf.b += Std.string("\\\""); break; case 92: this.buf.b += Std.string("\\\\"); break; case 10: this.buf.b += Std.string("\\n"); break; case 13: this.buf.b += Std.string("\\r"); break; case 9: this.buf.b += Std.string("\\t"); break; case 8: this.buf.b += Std.string("\\b"); break; case 12: this.buf.b += Std.string("\\f"); break; default: this.buf.b += String.fromCharCode(c); } }; this.buf.b += Std.string("\""); }, vsI: function (v) { var vtI = (Type["typeof"](v)); switch (vtI[1]) { case 8: this.buf.b += Std.string("\"???\""); break; case 4: this.vuI(v); break; case 1: case 2: this.buf.b += Std.string(v); break; case 5: this.buf.b += Std.string("\"<fun>\""); break; case 6: var c = vtI[2]; if (c == String) this.quote(v); else if (c == Array) { var vvI = v; this.buf.b += Std.string("["); var len = vvI.length; if (len > 0) { this.vsI(vvI[0]); var i = 1; while (i < len) { this.buf.b += Std.string(","); this.vsI(vvI[i++]); } }; this.buf.b += Std.string("]"); } else if (c == HaxeHash) { var vvI = v; var o = {}; var vb1 = vvI.keys(); while (vb1.hasNext()) { var k = vb1.next(); o[k] = vvI.get(k); }; this.vuI(o); } else this.vuI(v); break; case 7: var e = vtI[2]; this.buf.b += Std.string(v[1]); break; case 3: this.buf.b += Std.string(v ? "true" : "false"); break; case 0: this.buf.b += Std.string("null"); break; } }, vuI: function (v) { this.vwI(v, Reflect.fields(v)); }, vwI: function (v, fields) { var first = true; this.buf.b += Std.string("{"); var vL1 = 0; while (vL1 < fields.length) { var f = fields[vL1]; ++vL1; var value = Reflect.field(v, f); if (Reflect.isFunction(value)) continue; if (first) first = false; else this.buf.b += Std.string(","); this.quote(f); this.buf.b += Std.string(":"); this.vsI(value); }; this.buf.b += Std.string("}"); }, toString: function (v) { this.buf = new StringBuf(); this.vsI(v); return this.buf.b; }, vqI: null, pos: null, str: null, buf: null, __class__: haxe.Json }; haxe.Log = vp["haxe.Log"] = function () { }; haxe.Log.__name__ = ["haxe", "Log"]; haxe.Log.trace = function (v, infos) { js.Boot.__trace(v, infos); }; haxe.Log.clear = function () { js.Boot.__clear_trace(); }; haxe.Md5 = vp["haxe.Md5"] = function () { }; haxe.Md5.__name__ = ["haxe", "Md5"]; haxe.Md5.encode = function (s) { return new haxe.Md5().doEncode(s); }; haxe.Md5.prototype = { doEncode: function (str) { var x = this.str2blks(str); var a = 1732584193; var b = -271733879; var c = -1732584194; var d = 271733878; var vxI; var i = 0; while (i < x.length) { var vyI = a; var vzI = b; var v0J = c; var v1J = d; vxI = 0; a = this.ff(a, b, c, d, x[i], 7, -680876936); d = this.ff(d, a, b, c, x[i + 1], 12, -389564586); c = this.ff(c, d, a, b, x[i + 2], 17, 606105819); b = this.ff(b, c, d, a, x[i + 3], 22, -1044525330); a = this.ff(a, b, c, d, x[i + 4], 7, -176418897); d = this.ff(d, a, b, c, x[i + 5], 12, 1200080426); c = this.ff(c, d, a, b, x[i + 6], 17, -1473231341); b = this.ff(b, c, d, a, x[i + 7], 22, -45705983); a = this.ff(a, b, c, d, x[i + 8], 7, 1770035416); d = this.ff(d, a, b, c, x[i + 9], 12, -1958414417); c = this.ff(c, d, a, b, x[i + 10], 17, -42063); b = this.ff(b, c, d, a, x[i + 11], 22, -1990404162); a = this.ff(a, b, c, d, x[i + 12], 7, 1804603682); d = this.ff(d, a, b, c, x[i + 13], 12, -40341101); c = this.ff(c, d, a, b, x[i + 14], 17, -1502002290); b = this.ff(b, c, d, a, x[i + 15], 22, 1236535329); a = this.gg(a, b, c, d, x[i + 1], 5, -165796510); d = this.gg(d, a, b, c, x[i + 6], 9, -1069501632); c = this.gg(c, d, a, b, x[i + 11], 14, 643717713); b = this.gg(b, c, d, a, x[i], 20, -373897302); a = this.gg(a, b, c, d, x[i + 5], 5, -701558691); d = this.gg(d, a, b, c, x[i + 10], 9, 38016083); c = this.gg(c, d, a, b, x[i + 15], 14, -660478335); b = this.gg(b, c, d, a, x[i + 4], 20, -405537848); a = this.gg(a, b, c, d, x[i + 9], 5, 568446438); d = this.gg(d, a, b, c, x[i + 14], 9, -1019803690); c = this.gg(c, d, a, b, x[i + 3], 14, -187363961); b = this.gg(b, c, d, a, x[i + 8], 20, 1163531501); a = this.gg(a, b, c, d, x[i + 13], 5, -1444681467); d = this.gg(d, a, b, c, x[i + 2], 9, -51403784); c = this.gg(c, d, a, b, x[i + 7], 14, 1735328473); b = this.gg(b, c, d, a, x[i + 12], 20, -1926607734); a = this.hh(a, b, c, d, x[i + 5], 4, -378558); d = this.hh(d, a, b, c, x[i + 8], 11, -2022574463); c = this.hh(c, d, a, b, x[i + 11], 16, 1839030562); b = this.hh(b, c, d, a, x[i + 14], 23, -35309556); a = this.hh(a, b, c, d, x[i + 1], 4, -1530992060); d = this.hh(d, a, b, c, x[i + 4], 11, 1272893353); c = this.hh(c, d, a, b, x[i + 7], 16, -155497632); b = this.hh(b, c, d, a, x[i + 10], 23, -1094730640); a = this.hh(a, b, c, d, x[i + 13], 4, 681279174); d = this.hh(d, a, b, c, x[i], 11, -358537222); c = this.hh(c, d, a, b, x[i + 3], 16, -722521979); b = this.hh(b, c, d, a, x[i + 6], 23, 76029189); a = this.hh(a, b, c, d, x[i + 9], 4, -640364487); d = this.hh(d, a, b, c, x[i + 12], 11, -421815835); c = this.hh(c, d, a, b, x[i + 15], 16, 530742520); b = this.hh(b, c, d, a, x[i + 2], 23, -995338651); a = this.ii(a, b, c, d, x[i], 6, -198630844); d = this.ii(d, a, b, c, x[i + 7], 10, 1126891415); c = this.ii(c, d, a, b, x[i + 14], 15, -1416354905); b = this.ii(b, c, d, a, x[i + 5], 21, -57434055); a = this.ii(a, b, c, d, x[i + 12], 6, 1700485571); d = this.ii(d, a, b, c, x[i + 3], 10, -1894986606); c = this.ii(c, d, a, b, x[i + 10], 15, -1051523); b = this.ii(b, c, d, a, x[i + 1], 21, -2054922799); a = this.ii(a, b, c, d, x[i + 8], 6, 1873313359); d = this.ii(d, a, b, c, x[i + 15], 10, -30611744); c = this.ii(c, d, a, b, x[i + 6], 15, -1560198380); b = this.ii(b, c, d, a, x[i + 13], 21, 1309151649); a = this.ii(a, b, c, d, x[i + 4], 6, -145523070); d = this.ii(d, a, b, c, x[i + 11], 10, -1120210379); c = this.ii(c, d, a, b, x[i + 2], 15, 718787259); b = this.ii(b, c, d, a, x[i + 9], 21, -343485551); a = this.addme(a, vyI); b = this.addme(b, vzI); c = this.addme(c, v0J); d = this.addme(d, v1J); i += 16; }; return this.rhex(a) + this.rhex(b) + this.rhex(c) + this.rhex(d); }, ii: function (a, b, c, d, x, s, t) { return this.cmn(this.bitXOR(c, this.bitOR(b, ~d)), a, b, x, s, t); }, hh: function (a, b, c, d, x, s, t) { return this.cmn(this.bitXOR(this.bitXOR(b, c), d), a, b, x, s, t); }, gg: function (a, b, c, d, x, s, t) { return this.cmn(this.bitOR(this.bitAND(b, d), this.bitAND(c, ~d)), a, b, x, s, t); }, ff: function (a, b, c, d, x, s, t) { return this.cmn(this.bitOR(this.bitAND(b, c), this.bitAND(~b, d)), a, b, x, s, t); }, cmn: function (q, a, b, x, s, t) { return this.addme(this.rol(this.addme(this.addme(a, q), this.addme(x, t)), s), b); }, rol: function (v2J, v3J) { return v2J << v3J | v2J >>> 32 - v3J; }, str2blks: function (str) { var v4J = (str.length + 8 >> 6) + 1; var v5J = new Array(); var vM1 = 0, vL1 = v4J * 16; while (vM1 < vL1) { var i = vM1++; v5J[i] = 0; }; var i = 0; while (i < str.length) { v5J[i >> 2] |= HxOverrides.cca(str, i) << (str.length * 8 + i) % 4 * 8; i++; }; v5J[i >> 2] |= 128 << (str.length * 8 + i) % 4 * 8; var l = str.length * 8; var k = v4J * 16 - 2; v5J[k] = l & 255; v5J[k] |= (l >>> 8 & 255) << 8; v5J[k] |= (l >>> 16 & 255) << 16; v5J[k] |= (l >>> 24 & 255) << 24; return v5J; }, rhex: function (v2J) { var str = ""; var hex_chr = "0123456789abcdef"; var vL1 = 0; while (vL1 < 4) { var j = vL1++; str += hex_chr.charAt(v2J >> j * 8 + 4 & 15) + hex_chr.charAt(v2J >> j * 8 & 15); }; return str; }, addme: function (x, y) { var v6J = (x & 65535) + (y & 65535); var v7J = (x >> 16) + (y >> 16) + (v6J >> 16); return v7J << 16 | v6J & 65535; }, bitAND: function (a, b) { var v8J = a & 1 & (b & 1); var v9J = a >>> 1 & b >>> 1; return v9J << 1 | v8J; }, bitXOR: function (a, b) { var v8J = a & 1 ^ b & 1; var v9J = a >>> 1 ^ b >>> 1; return v9J << 1 | v8J; }, bitOR: function (a, b) { var v8J = a & 1 | b & 1; var v9J = a >>> 1 | b >>> 1; return v9J << 1 | v8J; }, __class__: haxe.Md5 }; haxe.Resource = vp["haxe.Resource"] = function () { }; haxe.Resource.__name__ = ["haxe", "Resource"]; haxe.Resource.content = null; haxe.Resource.vAJ = function () { var vBJ = new Array(); var vL1 = 0, vM1 = haxe.Resource.content; while (vL1 < vM1.length) { var x = vM1[vL1]; ++vL1; vBJ.push(x.name); }; return vBJ; }; haxe.Resource.vv6 = function (name) { var vL1 = 0, vM1 = haxe.Resource.content; while (vL1 < vM1.length) { var x = vM1[vL1]; ++vL1; if (x.name == name) { if (x.str != null) return x.str; var b = haxe.Unserializer.run(x.data); return b.toString(); } }; return null; }; haxe.Resource.getBytes = function (name) { var vL1 = 0, vM1 = haxe.Resource.content; while (vL1 < vM1.length) { var x = vM1[vL1]; ++vL1; if (x.name == name) { if (x.str != null) return haxe.io.Bytes.ofString(x.str); return haxe.Unserializer.run(x.data); } }; return null; }; haxe.Timer = vp["haxe.Timer"] = function (vCJ) { var vDJ = this; this.id = window.setInterval(function () { vDJ.run(); }, vCJ); }; haxe.Timer.__name__ = ["haxe", "Timer"]; haxe.Timer.delay = function (f, vCJ) { var t = new haxe.Timer(vCJ); t.run = function () { t.stop(); f(); }; return t; }; haxe.Timer.vEJ = function (f, pos) { var vFJ = haxe.Timer.stamp(); var r = f(); haxe.Log.trace(haxe.Timer.stamp() - vFJ + "s", pos); return r; }; haxe.Timer.stamp = function () { return new Date().getTime() / 1000; }; haxe.Timer.prototype = { run: function () { }, stop: function () { if (this.id == null) return; window.clearInterval(this.id); this.id = null; }, id: null, __class__: haxe.Timer }; haxe.Unserializer = vp["haxe.Unserializer"] = function (buf) { this.buf = buf; this.length = buf.length; this.pos = 0; this.scache = new Array(); this.cache = new Array(); var r = haxe.Unserializer.DEFAULT_RESOLVER; if (r == null) { r = Type; haxe.Unserializer.DEFAULT_RESOLVER = r; }; this.setResolver(r); }; haxe.Unserializer.__name__ = ["haxe", "Unserializer"]; haxe.Unserializer.initCodes = function () { var vGJ = new Array(); var vM1 = 0, vL1 = haxe.Unserializer.BASE64.length; while (vM1 < vL1) { var i = vM1++; vGJ[haxe.Unserializer.BASE64.charCodeAt(i)] = i; }; return vGJ; }; haxe.Unserializer.run = function (v) { return new haxe.Unserializer(v).unserialize(); }; haxe.Unserializer.prototype = { unserialize: function () { switch (this.buf.charCodeAt(this.pos++)) { case 110: return null; case 116: return true; case 102: return false; case 122: return 0; case 105: return this.readDigits(); case 100: var vHJ = this.pos; while (true) { var c = this.buf.charCodeAt(this.pos); if (c >= 43 && c < 58 || c == 101 || c == 69) this.pos++; else break; }; return Std.parseFloat(HxOverrides.substr(this.buf, vHJ, this.pos - vHJ)); case 121: var len = this.readDigits(); if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len) throw "Invalid string length"; var s = HxOverrides.substr(this.buf, this.pos, len); this.pos += len; s = StringTools.urlDecode(s); this.scache.push(s); return s; case 107: return Math.NaN; case 109: return Math.NEGATIVE_INFINITY; case 112: return Math.POSITIVE_INFINITY; case 97: var buf = this.buf; var a = new Array(); this.cache.push(a); while (true) { var c = this.buf.charCodeAt(this.pos); if (c == 104) { this.pos++; break; }; if (c == 117) { this.pos++; var n = this.readDigits(); a[a.length + n - 1] = null; } else a.push(this.unserialize()); }; return a; case 111: var o = {}; this.cache.push(o); this.unserializeObject(o); return o; case 114: var n = this.readDigits(); if (n < 0 || n >= this.cache.length) throw "Invalid reference"; return this.cache[n]; case 82: var n = this.readDigits(); if (n < 0 || n >= this.scache.length) throw "Invalid string reference"; return this.scache[n]; case 120: throw this.unserialize(); break; case 99: var name = this.unserialize(); var vQ1 = this.resolver.resolveClass(name); if (vQ1 == null) throw "Class not found " + name; var o = Type.createEmptyInstance(vQ1); this.cache.push(o); this.unserializeObject(o); return o; case 119: var name = this.unserialize(); var vIJ = this.resolver.resolveEnum(name); if (vIJ == null) throw "Enum not found " + name; var e = this.unserializeEnum(vIJ, this.unserialize()); this.cache.push(e); return e; case 106: var name = this.unserialize(); var vIJ = this.resolver.resolveEnum(name); if (vIJ == null) throw "Enum not found " + name; this.pos++; var index = this.readDigits(); var tag = Type.getEnumConstructs(vIJ)[index]; if (tag == null) throw "Unknown enum index " + name + "@" + index; var e = this.unserializeEnum(vIJ, tag); this.cache.push(e); return e; case 108: var l = new List(); this.cache.push(l); var buf = this.buf; while (this.buf.charCodeAt(this.pos) != 104) l.add(this.unserialize()); this.pos++; return l; case 98: var h = new HaxeHash(); this.cache.push(h); var buf = this.buf; while (this.buf.charCodeAt(this.pos) != 104) { var s = this.unserialize(); h.set(s, this.unserialize()); }; this.pos++; return h; case 113: var h = new IntHash(); this.cache.push(h); var buf = this.buf; var c = this.buf.charCodeAt(this.pos++); while (c == 58) { var i = this.readDigits(); h.set(i, this.unserialize()); c = this.buf.charCodeAt(this.pos++); }; if (c != 104) throw "Invalid IntHash format"; return h; case 118: var d = HxOverrides.v41(HxOverrides.substr(this.buf, this.pos, 19)); this.cache.push(d); this.pos += 19; return d; case 115: var len = this.readDigits(); var buf = this.buf; if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len) throw "Invalid bytes length"; var vGJ = haxe.Unserializer.CODES; if (vGJ == null) { vGJ = haxe.Unserializer.initCodes(); haxe.Unserializer.CODES = vGJ; }; var i = this.pos; var vJJ = len & 3; var size = (len >> 2) * 3 + (vJJ >= 2 ? vJJ - 1 : 0); var max = i + (len - vJJ); var bytes = haxe.io.Bytes.alloc(size); var vKJ = 0; while (i < max) { var voI = vGJ[buf.charCodeAt(i++)]; var vS8 = vGJ[buf.charCodeAt(i++)]; bytes.b[vKJ++] = (voI << 2 | vS8 >> 4) & 255; var vLJ = vGJ[buf.charCodeAt(i++)]; bytes.b[vKJ++] = (vS8 << 4 | vLJ >> 2) & 255; var vMJ = vGJ[buf.charCodeAt(i++)]; bytes.b[vKJ++] = (vLJ << 6 | vMJ) & 255; }; if (vJJ >= 2) { var voI = vGJ[buf.charCodeAt(i++)]; var vS8 = vGJ[buf.charCodeAt(i++)]; bytes.b[vKJ++] = (voI << 2 | vS8 >> 4) & 255; if (vJJ == 3) { var vLJ = vGJ[buf.charCodeAt(i++)]; bytes.b[vKJ++] = (vS8 << 4 | vLJ >> 2) & 255; } }; this.pos += len; this.cache.push(bytes); return bytes; case 67: var name = this.unserialize(); var vQ1 = this.resolver.resolveClass(name); if (vQ1 == null) throw "Class not found " + name; var o = Type.createEmptyInstance(vQ1); this.cache.push(o); o.vNJ(this); if (this.buf.charCodeAt(this.pos++) != 103) throw "Invalid custom data"; return o; default: }; this.pos--; throw "Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos; }, unserializeEnum: function (vIJ, tag) { if (this.buf.charCodeAt(this.pos++) != 58) throw "Invalid enum format"; var vOJ = this.readDigits(); if (vOJ == 0) return Type.createEnum(vIJ, tag); var args = new Array(); while (vOJ-- > 0) args.push(this.unserialize()); return Type.createEnum(vIJ, tag, args); }, unserializeObject: function (o) { while (true) { if (this.pos >= this.length) throw "Invalid object"; if (this.buf.charCodeAt(this.pos) == 103) break; var k = this.unserialize(); if (!js.Boot.__instanceof(k, String)) throw "Invalid object key"; var v = this.unserialize(); o[k] = v; }; this.pos++; }, readDigits: function () { var k = 0; var s = false; var vPJ = this.pos; while (true) { var c = this.buf.charCodeAt(this.pos); if (c != c) break; if (c == 45) { if (this.pos != vPJ) break; s = true; this.pos++; continue; }; if (c < 48 || c > 57) break; k = k * 10 + (c - 48); this.pos++; }; if (s) k *= -1; return k; }, get: function (p) { return this.buf.charCodeAt(p); }, getResolver: function () { return this.resolver; }, setResolver: function (r) { if (r == null) this.resolver = { resolveClass: function (_) { return null; }, resolveEnum: function (_) { return null; } }; else this.resolver = r; }, resolver: null, scache: null, cache: null, length: null, pos: null, buf: null, __class__: haxe.Unserializer }; haxe.Utf8 = vp["haxe.Utf8"] = function (size) { this.vM8 = ""; }; haxe.Utf8.__name__ = ["haxe", "Utf8"]; haxe.Utf8.iter = function (s, vMI) { var vM1 = 0, vL1 = s.length; while (vM1 < vL1) { var i = vM1++; vMI(HxOverrides.cca(s, i)); } }; haxe.Utf8.encode = function (s) { throw "Not implemented"; return s; }; haxe.Utf8.decode = function (s) { throw "Not implemented"; return s; }; haxe.Utf8.charCodeAt = function (s, index) { return HxOverrides.cca(s, index); }; haxe.Utf8.validate = function (s) { return true; }; haxe.Utf8.compare = function (a, b) { return a > b ? 1 : a == b ? 0 : -1; }; haxe.Utf8.sub = function (s, pos, len) { return HxOverrides.substr(s, pos, len); }; haxe.Utf8.prototype = { toString: function () { return this.vM8; }, addChar: function (c) { this.vM8 += String.fromCharCode(c); }, vM8: null, __class__: haxe.Utf8 }; if (!haxe.io) haxe.io = {}; haxe.io.Bytes = vp["haxe.io.Bytes"] = function (length, b) { this.length = length; this.b = b; }; haxe.io.Bytes.__name__ = ["haxe", "io", "Bytes"]; haxe.io.Bytes.alloc = function (length) { var a = new Array(); var vL1 = 0; while (vL1 < length) { var i = vL1++; a.push(0); }; return new haxe.io.Bytes(length, a); }; haxe.io.Bytes.ofString = function (s) { var a = new Array(); var vM1 = 0, vL1 = s.length; while (vM1 < vL1) { var i = vM1++; var c = s.charCodeAt(i); if (c <= 127) a.push(c); else if (c <= 2047) { a.push(192 | c >> 6); a.push(128 | c & 63); } else if (c <= 65535) { a.push(224 | c >> 12); a.push(128 | c >> 6 & 63); a.push(128 | c & 63); } else { a.push(240 | c >> 18); a.push(128 | c >> 12 & 63); a.push(128 | c >> 6 & 63); a.push(128 | c & 63); } }; return new haxe.io.Bytes(a.length, a); }; haxe.io.Bytes.ofData = function (b) { return new haxe.io.Bytes(b.length, b); }; haxe.io.Bytes.prototype = { getData: function () { return this.b; }, vi1: function () { var s = new StringBuf(); var vMI = []; var str = "0123456789abcdef"; var vM1 = 0, vL1 = str.length; while (vM1 < vL1) { var i = vM1++; vMI.push(HxOverrides.cca(str, i)); }; var vM1 = 0, vL1 = this.length; while (vM1 < vL1) { var i = vM1++; var c = this.b[i]; s.b += String.fromCharCode(vMI[c >> 4]); s.b += String.fromCharCode(vMI[c & 15]); }; return s.b; }, toString: function () { return this.readString(0, this.length); }, readString: function (pos, len) { if (pos < 0 || len < 0 || pos + len > this.length) throw haxe.io.Error.OutsideBounds; var s = ""; var b = this.b; var vQJ = String.fromCharCode; var i = pos; var max = pos + len; while (i < max) { var c = b[i++]; if (c < 128) { if (c == 0) break; s += vQJ(c); } else if (c < 224) s += vQJ((c & 63) << 6 | b[i++] & 127); else if (c < 240) { var vS8 = b[i++]; s += vQJ((c & 31) << 12 | (vS8 & 127) << 6 | b[i++] & 127); } else { var vS8 = b[i++]; var vLJ = b[i++]; s += vQJ((c & 15) << 18 | (vS8 & 127) << 12 | vLJ << 6 & 127 | b[i++] & 127); } }; return s; }, compare: function (vRJ) { var vSJ = this.b; var vTJ = vRJ.b; var len = this.length < vRJ.length ? this.length : vRJ.length; var vL1 = 0; while (vL1 < len) { var i = vL1++; if (vSJ[i] != vTJ[i]) return vSJ[i] - vTJ[i]; }; return this.length - vRJ.length; }, sub: function (pos, len) { if (pos < 0 || len < 0 || pos + len > this.length) throw haxe.io.Error.OutsideBounds; return new haxe.io.Bytes(len, this.b.slice(pos, pos + len)); }, blit: function (pos, src, vUJ, len) { if (pos < 0 || vUJ < 0 || len < 0 || pos + len > this.length || vUJ + len > src.length) throw haxe.io.Error.OutsideBounds; var vSJ = this.b; var vTJ = src.b; if (vSJ == vTJ && pos > vUJ) { var i = len; while (i > 0) { i--; vSJ[i + pos] = vTJ[i + vUJ]; }; return; }; var vL1 = 0; while (vL1 < len) { var i = vL1++; vSJ[i + pos] = vTJ[i + vUJ]; } }, set: function (pos, v) { this.b[pos] = v & 255; }, get: function (pos) { return this.b[pos]; }, b: null, length: null, __class__: haxe.io.Bytes }; haxe.io.Error = vp["haxe.io.Error"] = { vG1: ["haxe", "io", "Error"], vW1: ["Blocked", "Overflow", "OutsideBounds", "Custom"] }; haxe.io.Error.Blocked = ["Blocked", 0]; haxe.io.Error.Blocked.toString = vq; haxe.io.Error.Blocked.vJ1 = haxe.io.Error; haxe.io.Error.Overflow = ["Overflow", 1]; haxe.io.Error.Overflow.toString = vq; haxe.io.Error.Overflow.vJ1 = haxe.io.Error; haxe.io.Error.OutsideBounds = ["OutsideBounds", 2]; haxe.io.Error.OutsideBounds.toString = vq; haxe.io.Error.OutsideBounds.vJ1 = haxe.io.Error; haxe.io.Error.Custom = function (e) { var vX1 = ["Custom", 3, e]; vX1.vJ1 = haxe.io.Error; vX1.toString = vq; return vX1; }; if (!haxe.xml) haxe.xml = {}; haxe.xml.Parser = vp["haxe.xml.Parser"] = function () { }; haxe.xml.Parser.__name__ = ["haxe", "xml", "Parser"]; haxe.xml.Parser.parse = function (str) { var doc = Xml.createDocument(); haxe.xml.Parser.vjI(str, 0, doc); return doc; }; haxe.xml.Parser.vjI = function (str, p, parent) { if (p == null) p = 0; var xml = null; var vVJ = 1; var next = 1; var vWJ = null; var start = 0; var vXJ = 0; var vYJ = 0; var c = str.charCodeAt(p); while (!(c != c)) { switch (vVJ) { case 0: switch (c) { case 10: case 13: case 9: case 32: break; default: vVJ = next; continue; }; break; case 1: switch (c) { case 60: vVJ = 0; next = 2; break; default: start = p; vVJ = 13; continue; }; break; case 13: if (c == 60) { var vj5 = Xml.createPCData(HxOverrides.substr(str, start, p - start)); parent.addChild(vj5); vXJ++; vVJ = 0; next = 2; }; break; case 17: if (c == 93 && str.charCodeAt(p + 1) == 93 && str.charCodeAt(p + 2) == 62) { var vj5 = Xml.createCData(HxOverrides.substr(str, start, p - start)); parent.addChild(vj5); vXJ++; p += 2; vVJ = 1; }; break; case 2: switch (c) { case 33: if (str.charCodeAt(p + 1) == 91) { p += 2; if (HxOverrides.substr(str, p, 6).toUpperCase() != "CDATA[") throw "Expected <![CDATA["; p += 5; vVJ = 17; start = p + 1; } else if (str.charCodeAt(p + 1) == 68 || str.charCodeAt(p + 1) == 100) { if (HxOverrides.substr(str, p + 2, 6).toUpperCase() != "OCTYPE") throw "Expected <!DOCTYPE"; p += 8; vVJ = 16; start = p + 1; } else if (str.charCodeAt(p + 1) != 45 || str.charCodeAt(p + 2) != 45) throw "Expected <!--"; else { p += 2; vVJ = 15; start = p + 1; }; break; case 63: vVJ = 14; start = p; break; case 47: if (parent == null) throw "Expected node name"; start = p + 1; vVJ = 0; next = 10; break; default: vVJ = 3; start = p; continue; }; break; case 3: if (!(c >= 97 && c <= 122 || c >= 65 && c <= 90 || c >= 48 && c <= 57 || c == 58 || c == 46 || c == 95 || c == 45)) { if (p == start) throw "Expected node name"; xml = Xml.createElement(HxOverrides.substr(str, start, p - start)); parent.addChild(xml); vVJ = 0; next = 4; continue; }; break; case 4: switch (c) { case 47: vVJ = 11; vXJ++; break; case 62: vVJ = 9; vXJ++; break; default: vVJ = 5; start = p; continue; }; break; case 5: if (!(c >= 97 && c <= 122 || c >= 65 && c <= 90 || c >= 48 && c <= 57 || c == 58 || c == 46 || c == 95 || c == 45)) { var vE1; if (start == p) throw "Expected attribute name"; vE1 = HxOverrides.substr(str, start, p - start); vWJ = vE1; if (xml.exists(vWJ)) throw "Duplicate attribute"; vVJ = 0; next = 6; continue; }; break; case 6: switch (c) { case 61: vVJ = 0; next = 7; break; default: throw "Expected ="; }; break; case 7: switch (c) { case 34: case 39: vVJ = 8; start = p; break; default: throw "Expected \""; }; break; case 8: if (c == str.charCodeAt(start)) { var vZJ = HxOverrides.substr(str, start + 1, p - start - 1); xml.set(vWJ, vZJ); vVJ = 0; next = 4; }; break; case 9: p = haxe.xml.Parser.vjI(str, p, xml); start = p; vVJ = 1; break; case 11: switch (c) { case 62: vVJ = 1; break; default: throw "Expected >"; }; break; case 12: switch (c) { case 62: if (vXJ == 0) parent.addChild(Xml.createPCData("")); return p; default: throw "Expected >"; }; break; case 10: if (!(c >= 97 && c <= 122 || c >= 65 && c <= 90 || c >= 48 && c <= 57 || c == 58 || c == 46 || c == 95 || c == 45)) { if (start == p) throw "Expected node name"; var v = HxOverrides.substr(str, start, p - start); if (v != parent.getNodeName()) throw "Expected </" + parent.getNodeName() + ">"; vVJ = 0; next = 12; continue; }; break; case 15: if (c == 45 && str.charCodeAt(p + 1) == 45 && str.charCodeAt(p + 2) == 62) { parent.addChild(Xml.createComment(HxOverrides.substr(str, start, p - start))); p += 2; vVJ = 1; }; break; case 16: if (c == 91) vYJ++; else if (c == 93) vYJ--; else if (c == 62 && vYJ == 0) { parent.addChild(Xml.createDocType(HxOverrides.substr(str, start, p - start))); vVJ = 1; }; break; case 14: if (c == 63 && str.charCodeAt(p + 1) == 62) { p++; var vaJ = HxOverrides.substr(str, start + 1, p - start - 2); parent.addChild(Xml.createProlog(vaJ)); vVJ = 1; }; break; }; c = str.charCodeAt(++p); }; if (vVJ == 1) { start = p; vVJ = 13; }; if (vVJ == 13) { if (p != start || vXJ == 0) parent.addChild(Xml.createPCData(HxOverrides.substr(str, start, p - start))); return p; }; throw "Unexpected end"; }; haxe.xml.Parser.vbJ = function (c) { return c >= 97 && c <= 122 || c >= 65 && c <= 90 || c >= 48 && c <= 57 || c == 58 || c == 46 || c == 95 || c == 45; }; var js = js || {}; js.Boot = vp["js.Boot"] = function () { }; js.Boot.__name__ = ["js", "Boot"]; js.Boot.__unhtml = function (s) { return s.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"); }; js.Boot.__trace = function (v, i) { var vS2 = i != null ? i.fileName + ":" + i.lineNumber + ": " : ""; vS2 += js.Boot.__string_rec(v, ""); var d; if (typeof (document) != "undefined" && (d = document.getElementById("haxe:trace")) != null) d.innerHTML += js.Boot.__unhtml(vS2) + "<br/>"; else if (typeof (vcJ) != "undefined" && vcJ.log != null) vcJ.log(vS2); }; js.Boot.__clear_trace = function () { var d = document.getElementById("haxe:trace"); if (d != null) d.innerHTML = ""; }; js.Boot.vdJ = function (o) { return o.__name__; }; js.Boot.veJ = function (e) { return e.vG1; }; js.Boot.getClass = function (o) { return o.__class__; }; js.Boot.__string_rec = function (o, s) { if (o == null) return "null"; if (s.length >= 5) return "<...>"; var t = typeof (o); if (t == "function" && (o.__name__ || o.vG1)) t = "object"; switch (t) { case "object": if (o instanceof Array) { if (o.vJ1) { if (o.length == 2) return o[0]; var str = o[0] + "("; s += "\t"; var vM1 = 2, vL1 = o.length; while (vM1 < vL1) { var i = vM1++; if (i != 2) str += "," + js.Boot.__string_rec(o[i], s); else str += js.Boot.__string_rec(o[i], s); }; return str + ")"; }; var l = o.length; var i; var str = "["; s += "\t"; var vL1 = 0; while (vL1 < l) { var vy1 = vL1++; str += (vy1 > 0 ? "," : "") + js.Boot.__string_rec(o[vy1], s); }; str += "]"; return str; }; var vfJ; try { vfJ = o.toString; } catch (e) { return "???"; }; if (vfJ != null && vfJ != Object.toString) { var vU7 = o.toString(); if (vU7 != "[object Object]") return vU7; }; var k = null; var str = "{\n"; s += "\t"; var vgJ = o.hasOwnProperty != null; for (var k in o) { ; if (vgJ && !o.hasOwnProperty(k)) { continue; }; if (k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") { continue; }; if (str.length != 2) str += ", \n"; str += s + k + " : " + js.Boot.__string_rec(o[k], s); }; s = s.substring(1); str += "\n" + s + "}"; return str; case "function": return "<function>"; case "string": return o; default: return String(o); } }; js.Boot.__interfLoop = function (vpG, vQ1) { if (vpG == null) return false; if (vpG == vQ1) return true; var vhJ = vpG.__interfaces__; if (vhJ != null) { var vM1 = 0, vL1 = vhJ.length; while (vM1 < vL1) { var i = vM1++; var vy1 = vhJ[i]; if (vy1 == vQ1 || js.Boot.__interfLoop(vy1, vQ1)) return true; } }; return js.Boot.__interfLoop(vpG.__super__, vQ1); }; js.Boot.__instanceof = function (o, vQ1) { try { if (o instanceof vQ1) { if (vQ1 == Array) return o.vJ1 == null; return true; }; if (js.Boot.__interfLoop(o.__class__, vQ1)) return true; } catch (e) { if (vQ1 == null) return false; }; switch (vQ1) { case Int: return Math.ceil(o % 2147483648.0) === o; case Float: return typeof (o) == "number"; case Bool: return o === true || o === false; case String: return typeof (o) == "string"; case Dynamic: return true; default: if (o == null) return false; if (vQ1 == Class && o.__name__ != null) return true; else null; if (vQ1 == Enum && o.vG1 != null) return true; else null; return o.vJ1 == vQ1; } }; js.Boot.vV2 = function (o, t) { if (js.Boot.__instanceof(o, t)) return o; else throw "Cannot cast " + Std.string(o) + " to " + Std.string(t); }; js.Lib = vp["js.Lib"] = function () { }; js.Lib.__name__ = ["js", "Lib"]; js.Lib.document = null; js.Lib.window = null; js.Lib.debug = function () { debugger; }; js.Lib.alert = function (v) { alert(js.Boot.__string_rec(v, "")); }; js.Lib.eval = function (vN9) { return eval(vN9); }; js.Lib.setErrorHandler = function (f) { js.Lib.onerror = f; }; function vG5(o) { if (o instanceof Array) return function () { return HxOverrides.iter(o); }; return typeof (o.iterator) == 'function' ? v52(o, o.iterator) : o.iterator; }; var viJ; function v52(o, m) { var f = function () { return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; return f; }; if (Array.prototype.indexOf) HxOverrides.remove = function (a, o) { var i = a.indexOf(o); if (i == -1) return false; a.splice(i, 1); return true; }; else null; Math.__name__ = ["Math"]; Math.NaN = Number.NaN; Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY; Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY; vp.Math = Math; Math.isFinite = function (i) { return isFinite(i); }; Math.isNaN = function (i) { return isNaN(i); }; String.prototype.__class__ = vp.String = String; String.__name__ = ["String"]; Array.prototype.__class__ = vp.Array = Array; Array.__name__ = ["Array"]; Date.prototype.__class__ = vp.Date = Date; Date.__name__ = ["Date"]; var Int = vp.Int = { __name__: ["Int"] }; var Dynamic = vp.Dynamic = { __name__: ["Dynamic"] }; var Float = vp.Float = Number; Float.__name__ = ["Float"]; var Bool = vp.Bool = Boolean; Bool.vG1 = ["Bool"]; var Class = vp.Class = { __name__: ["Class"] }; var Enum = {}; var Void = vp.Void = { vG1: ["Void"] }; Xml.Element = "element"; Xml.PCData = "pcdata"; Xml.CData = "cdata"; Xml.Comment = "comment"; Xml.DocType = "doctype"; Xml.Prolog = "prolog"; Xml.Document = "document"; if (typeof (JSON) != "undefined") haxe.Json = JSON; haxe.Resource.content = [{ name: "version.txt", data: "s16:Ny45LjAuMzNiZTQ5" }]; if (typeof document != "undefined") js.Lib.document = document; if (typeof window != "undefined") { js.Lib.window = window; js.Lib.window.onerror = function (vS2, url, line) { var f = js.Lib.onerror; if (f == null) return false; return f(vS2, [url + ":" + line]); }; }; js.XMLHttpRequest = window.XMLHttpRequest ? XMLHttpRequest : window.ActiveXObject ? function () { try { return new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) { try { return new ActiveXObject("Microsoft.XMLHTTP"); } catch (vjJ) { throw "Unable to create XMLHttpRequest object."; } } } : (function (vx) { var vy_; throw "Unable to create XMLHttpRequest object."; return vy_; }(this)); com.wiris.js.JsHand.DEFAULT_PREVIEW_ZOOM = 1.5; com.wiris.js.JsHand.DEFAULT_LINE_COLOR = "#284283"; com.wiris.js.JsHand.DEFAULT_LINE_WIDTH = 3; com.wiris.js.JsHand.DEFAULT_RECOGNITION_DELAY = 500; com.wiris.js.JsHand.DEFAULT_RELATIVE_FIT_MARGIN = 0.05; com.wiris.js.JsHand.DEFAULT_FIT_WIDTH_PER_CHARACTER_PROPORTION = 0.038929; com.wiris.js.JsHand.DEFAULT_EDITOR_SERVICE_URL = "https://www.wiris.net/demo/editor"; com.wiris.js.JsHand.DEFAULT_LATEX2MATHML_SERVICE_URL = "https://www.wiris.net/demo/editor/latex2mathml"; com.wiris.js.JsHand.DEFAULT_DELETION_GESTURE_INTERSECTIONS = 5; com.wiris.js.JsHand.DEFAULT_DELETION_RECTANGLE_WIDTH = 15; com.wiris.js.JsHand.DEFAULT_DELETION_DIAGONAL_OFFSET = 0.15; com.wiris.js.JsHand.DEFAULT_DELETION_SAFE_MARGIN = 10.0; com.wiris.js.JsHand.DEFAULT_DELETION_LINE_COLOR = "#ed1a26"; com.wiris.js.JsHand.DEFAULT_DELETION_DELETED_STROKE_COLOR = "#ed1a26"; com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_SIZE = 6; com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_LINE_COLOR = "#000000"; com.wiris.js.JsHand.DEFAULT_EDITION_MARKER_BACKGROUND_COLOR = "#ffff00"; com.wiris.js.JsHand.DEFAULT_EDITION_SELECTED_MARKER_BACKGROUND_COLOR = "#ff0000"; com.wiris.js.JsHand.DEFAULT_WARNING_COLOR = null; com.wiris.js.JsHand.DEFAULT_ERROR_COLOR = "b22222"; com.wiris.js.JsHand.HELP_STROKES_MATH = "[[[4,30],[16,62]],[[4,62],[17,30]],[[26,14],[27,10],[29,9],[32,9],[34,13],[32,19],[29,28],[26,35],[26,35],[33,35]],[[45,41],[58,41]],[[45,51],[59,51]],[[82,62],[82,9],[82,9],[71,46],[71,46],[86,46]],[[94,30],[94,56],[96,61],[103,62],[108,59],[108,54],[109,30],[109,30],[109,80],[106,88],[97,89],[94,83]],[[118,13],[119,9],[121,8],[124,8],[126,12],[124,18],[121,27],[118,34],[118,34],[125,34]],[[35,6],[34,7],[32,10],[29,14],[27,16],[27,17],[29,15],[31,13],[35,9],[36,6],[36,5],[36,8],[33,13],[29,19],[29,20],[29,21],[29,20],[31,17],[35,12],[37,8],[37,7],[36,8],[33,10],[26,18],[20,24],[20,25],[21,25],[22,25],[26,21],[31,17],[34,15],[34,13],[31,15],[26,19],[24,22],[24,24],[25,24],[30,22],[36,17]],[[126,11],[124,11],[121,12],[113,17],[113,18],[116,17],[120,14],[125,12],[126,10],[125,11],[123,13],[118,15],[115,17],[115,18],[117,18],[119,17],[122,16],[128,13],[130,11],[123,15],[119,18],[117,20],[117,21],[120,21],[125,19],[130,14],[132,11],[133,11],[131,13],[129,14],[127,16],[126,17],[126,18],[129,17],[134,15],[135,15]],[[78,13],[78,15],[75,21],[72,28],[67,38],[67,45],[67,49],[68,49],[74,41],[78,31],[80,19],[80,10],[80,9],[80,14],[77,24],[73,35],[73,45],[73,49],[74,46],[78,40],[82,29],[85,22],[85,18],[85,17],[85,18],[83,25],[77,35],[76,40],[76,41],[78,38],[82,31],[86,20],[87,14],[87,11],[87,12],[83,23],[77,39]]]"; com.wiris.js.JsHand.HELP_STROKES_TEXT = "[[[8,9],[8,62]],[[4,62],[13,62]],[[4,8],[12,8]],[[54,30],[57,62],[57,62],[64,34],[64,35],[71,62],[71,62],[74,29]],[[82,29],[82,62],[82,61],[82,34],[82,34],[89,30],[95,30],[97,33]],[[109,61],[105,57],[105,42],[107,32],[112,29],[118,32],[120,42],[120,55],[116,62],[108,61]],[[143,55],[142,59],[139,62],[134,62],[130,60],[129,55],[128,8]],[[129,30],[138,30]],[[152,48],[158,48],[165,43],[165,34],[161,30],[155,30],[152,36],[151,45],[153,59],[159,63],[163,61],[165,56]],[[136,16.5],[135,16.5],[132,17.5],[129,19.5],[123,25.5],[111,34.5],[101,46.5],[97,49.5],[97,50.5],[102,48.5],[108,45.5],[132,35.5],[159,23.5],[169,18.5],[169,17.5],[166,17.5],[162,19.5],[156,22.5],[147,28.5],[135,36.5],[126,42.5],[122,46.5],[119,47.5],[122,47.5],[126,46.5],[145,38.5],[155,34.5],[168,28.5],[168,27.5],[165,27.5],[154,32.5],[142,37.5],[125,44.5],[114,50.5],[109,54.5],[110,54.5],[113,54.5],[125,53.5],[141,46.5],[168,35.5],[173,32.5],[172,32.5],[167,32.5],[154,38.5],[143,43.5],[132,50.5],[123,55.5],[122,56.5],[130,55.5],[155,46.5],[163,41.5],[160,41.5],[150,44.5],[141,49.5],[133,53.5],[128,56.5],[131,56.5],[135,56.5],[138,56.5],[156,51.5],[160,51.5],[159,51.5],[156,52.5],[149,56.5],[141,61.5],[139,63.5],[140,63.5],[145,63.5],[159,60.5],[169,55.5],[171,54.5],[166,56.5]],[[106,29],[105,59],[109,62]],[[107,20],[105,22]],[[132,55],[131,59],[128,62],[123,62],[119,60],[118,55],[117,8]],[[118,30],[127,30]],[[141,48],[147,48],[154,43],[154,34],[150,30],[144,30],[141,36],[140,45],[142,59],[148,63],[152,61],[154,56]]]"; com.wiris.js.JsHand.HELP_POINTS_DELAY = 10; com.wiris.js.JsHand.HELP_STROKES_DELAY = 100; com.wiris.js.JsHand.STROKE_VARS = ["x", "y", "t"]; com.wiris.js.JsHand.MODES = [{ dir: "ltr", alphabet: "western", text: "Western", vV3: "western.svg" }, { dir: "ltr", alphabet: "arabic", text: "Arabic LTR", vV3: "arabic_ltr.svg" }, { dir: "rtl", alphabet: "arabic", text: "Arabic RTL", vV3: "arabic_rtl.svg" }]; com.wiris.js.JsHand.DEBUG = false; com.wiris.js.JsHand.instances = new Array(); com.wiris.e1_6.vg4 = 1; com.wiris.e1_6.vh4 = 2; com.wiris.system.JsDOMUtils.vB5 = 10; com.wiris.system.JsDOMUtils.vh3 = new com.wiris.e1_5(); com.wiris.system.JsDOMUtils.vs4 = false; com.wiris.system.JsDOMUtils.vy4 = new Array(); com.wiris.system.JsDOMUtils.v05 = new Array(); com.wiris.system.JsDOMUtils.vt4 = new HaxeHash(); com.wiris.system.ResourceLoader.editorDefinition = null; com.wiris.system.ResourceLoader.imageDefinition = null; com.wiris.system.ResourceLoader.imageDefinition1_5 = null; com.wiris.system.ResourceLoader.imageDefinition2 = null; com.wiris.system.ResourceLoader.charactersDefinition = null; com.wiris.system.ResourceLoader.translations = {}; com.wiris.system.ResourceLoader.version = null; com.wiris.system.ResourceLoader.fontAdjust = null; com.wiris.system.ResourceLoader.initialLanguage = null; com.wiris.system.ServiceProvider.v87 = 2000; com.wiris.system.ServiceProvider.TIMEOUT = 30000; com.wiris.system.ServiceProvider.v37 = 0; com.wiris.system.ServiceProvider.vn1 = 1; com.wiris.system.ServiceProvider.v77 = 0; com.wiris.system.ServiceProvider.vC7 = new Array(); com.wiris.system.ServiceProvider.v27 = com.wiris.system.ServiceProvider.v37; com.wiris.system.ServiceProvider.vi2 = null; com.wiris.system.ServiceProvider.vG7 = false; com.wiris.system.ServiceProvider.vK7 = null; com.wiris.system.ServiceProvider.vJ7 = null; com.wiris.system.ServiceProvider.vL7 = [function () { return new XMLHttpRequest(); }, function () { return new ActiveXObject("Msxml2.XMLHTTP"); }, function () { return new ActiveXObject("Msxml3.XMLHTTP"); }, function () { return new ActiveXObject("Microsoft.XMLHTTP"); }]; com.wiris.e1_D.vh9 = 0; com.wiris.e1_H.vRA = -1; com.wiris.e1_H.vZF = -2; com.wiris.e1_H.vUA = "px"; com.wiris.e1_H.vkJ = "em"; com.wiris.e1_H.vlJ = "%"; com.wiris.e1_H.vmJ = "vw"; com.wiris.e1_H.vnJ = "vh"; com.wiris.e1_H.vcA = 0; com.wiris.e1_H.voJ = 1; com.wiris.e1_H.vpJ = 2; com.wiris.e1_H.vqJ = 3; com.wiris.e1_H.vrJ = 5; com.wiris.e1_H.vsJ = 0; com.wiris.e1_H.veA = 1; com.wiris.e1_H.vtJ = 2; com.wiris.e1_H.vuJ = 3; com.wiris.e1_H.vvJ = 4; com.wiris.e1_H.vwJ = 5; com.wiris.e1_J.vdB = "component"; com.wiris.e1_J.v5E = "app"; com.wiris.e1_J.vxJ = "mainContent"; com.wiris.e1_J.vyJ = "interesting"; com.wiris.e1_J.vgE = "focused"; com.wiris.e1_J.vFE = "hidden"; com.wiris.e1_R.vnE = "panel"; com.wiris.e1_R.vzJ = "panelSolid"; com.wiris.e1_R.v0K = "panelDarkBackground"; com.wiris.e1_R.v1K = "panelLightBackground"; com.wiris.e1_R.v2K = "panelCard"; com.wiris.e1_V.vFF = "scrollBar"; com.wiris.e1_V.vTF = "scrollBarVertical"; com.wiris.e1_V.vUF = "scrollBarHorizontal"; com.wiris.e1_V.vJF = 0; com.wiris.e1_V.vQF = 1; com.wiris.e1_V.vHF = 0; com.wiris.e1_V.v3K = 1; com.wiris.e1_V.vNF = 2; com.wiris.e1_W.vXF = "textComponent"; com.wiris.e1_W.vYF = "textComponentEmpty"; com.wiris.e1_W.vkF = "textComponentWithLabel"; com.wiris.util.ui.interaction.EventType.vyC = "action"; com.wiris.util.ui.interaction.EventType.v2D = "change"; com.wiris.util.ui.interaction.EventType.v4D = "component"; com.wiris.util.ui.interaction.EventType.v5F = "componentTree"; com.wiris.util.ui.interaction.EventType.v7D = "dragAndDrop"; com.wiris.util.ui.interaction.EventType.vAD = "focus"; com.wiris.util.ui.interaction.EventType.vDD = "key"; com.wiris.util.ui.interaction.EventType.vGD = "mouse"; com.wiris.util.ui.interaction.EventType.vJD = "mouseMotion"; com.wiris.util.ui.interaction.EventType.vND = "touch"; com.wiris.util.ui.interaction.EventType.vHG = "actionPerformed"; com.wiris.util.ui.interaction.EventType.vIG = "stateChanged"; com.wiris.util.ui.interaction.EventType.vuC = "visibilityChanged"; com.wiris.util.ui.interaction.EventType.vqC = "enabledChanged"; com.wiris.util.ui.interaction.EventType.vpC = "draggableChanged"; com.wiris.util.ui.interaction.EventType.vsC = "focusRequested"; com.wiris.util.ui.interaction.EventType.vrC = "blurRequested"; com.wiris.util.ui.interaction.EventType.vtC = "styleChanged"; com.wiris.util.ui.interaction.EventType.vvE = "childRemoved"; com.wiris.util.ui.interaction.EventType.vzE = "childMoved"; com.wiris.util.ui.interaction.EventType.v1F = "childAdded"; com.wiris.util.ui.interaction.EventType.vfC = "dragDrag"; com.wiris.util.ui.interaction.EventType.viC = "dragStart"; com.wiris.util.ui.interaction.EventType.vlC = "dragOver"; com.wiris.util.ui.interaction.EventType.vhC = "dragEnter"; com.wiris.util.ui.interaction.EventType.vjC = "dragDrop"; com.wiris.util.ui.interaction.EventType.vmC = "dragEnd"; com.wiris.util.ui.interaction.EventType.vaC = "focusGained"; com.wiris.util.ui.interaction.EventType.vbC = "focusLosed"; com.wiris.util.ui.interaction.EventType.vVC = "keyPress"; com.wiris.util.ui.interaction.EventType.vWC = "keyRelease"; com.wiris.util.ui.interaction.EventType.vXC = "keyType"; com.wiris.util.ui.interaction.EventType.vHC = "click"; com.wiris.util.ui.interaction.EventType.vJC = "doubleClick"; com.wiris.util.ui.interaction.EventType.vPC = "press"; com.wiris.util.ui.interaction.EventType.vRC = "release"; com.wiris.util.ui.interaction.EventType.vLC = "enter"; com.wiris.util.ui.interaction.EventType.vNC = "exit"; com.wiris.util.ui.interaction.EventType.v4K = "move"; com.wiris.util.ui.interaction.EventType.vLD = "scroll"; com.wiris.util.ui.interaction.EventType.vaG = "scrollScrolled"; com.wiris.util.ui.interaction.EventType.v7C = "press"; com.wiris.util.ui.interaction.EventType.v9C = "release"; com.wiris.util.ui.interaction.EventType.v5C = "move"; com.wiris.util.xml.WCharacterBase.v5K = 57344; com.wiris.util.xml.WCharacterBase.v6K = 57345; com.wiris.util.xml.WCharacterBase.v7K = 57346; com.wiris.util.xml.WCharacterBase.v8K = 57358; com.wiris.util.xml.WCharacterBase.v9K = 61696; com.wiris.util.xml.WCharacterBase.vAK = 61727; com.wiris.util.xml.WCharacterBase.vBK = 61728; com.wiris.util.xml.WCharacterBase.vCK = 61759; com.wiris.util.xml.WCharacterBase.vDK = 61760; com.wiris.util.xml.WCharacterBase.vEK = 61761; com.wiris.util.xml.WCharacterBase.vFK = 9; com.wiris.util.xml.WCharacterBase.vGK = 10; com.wiris.util.xml.WCharacterBase.vHK = 13; com.wiris.util.xml.WCharacterBase.vIK = 32; com.wiris.util.xml.WCharacterBase.vJK = 35; com.wiris.util.xml.WCharacterBase.vKK = 40; com.wiris.util.xml.WCharacterBase.vLK = 41; com.wiris.util.xml.WCharacterBase.vMK = 44; com.wiris.util.xml.WCharacterBase.vNK = 46; com.wiris.util.xml.WCharacterBase.vOK = 91; com.wiris.util.xml.WCharacterBase.vPK = 92; com.wiris.util.xml.WCharacterBase.vQK = 93; com.wiris.util.xml.WCharacterBase.vRK = 94; com.wiris.util.xml.WCharacterBase.vSK = 95; com.wiris.util.xml.WCharacterBase.vTK = 123; com.wiris.util.xml.WCharacterBase.vUK = 124; com.wiris.util.xml.WCharacterBase.vVK = 125; com.wiris.util.xml.WCharacterBase.vWK = 126; com.wiris.util.xml.WCharacterBase.vXK = 175; com.wiris.util.xml.WCharacterBase.vYK = 818; com.wiris.util.xml.WCharacterBase.vZK = 710; com.wiris.util.xml.WCharacterBase.vaK = 711; com.wiris.util.xml.WCharacterBase.vbK = 160; com.wiris.util.xml.WCharacterBase.vcK = 8192; com.wiris.util.xml.WCharacterBase.vdK = 8193; com.wiris.util.xml.WCharacterBase.veK = 8194; com.wiris.util.xml.WCharacterBase.vfK = 8195; com.wiris.util.xml.WCharacterBase.vgK = 8196; com.wiris.util.xml.WCharacterBase.vhK = 8197; com.wiris.util.xml.WCharacterBase.viK = 8198; com.wiris.util.xml.WCharacterBase.vjK = 8199; com.wiris.util.xml.WCharacterBase.vkK = 8200; com.wiris.util.xml.WCharacterBase.vlK = 8201; com.wiris.util.xml.WCharacterBase.vmK = 8202; com.wiris.util.xml.WCharacterBase.vnK = 8203; com.wiris.util.xml.WCharacterBase.voK = 8204; com.wiris.util.xml.WCharacterBase.vpK = 8205; com.wiris.util.xml.WCharacterBase.vqK = 8214; com.wiris.util.xml.WCharacterBase.vrK = 9552; com.wiris.util.xml.WCharacterBase.vsK = 8239; com.wiris.util.xml.WCharacterBase.vtK = 8287; com.wiris.util.xml.WCharacterBase.vuK = 8288; com.wiris.util.xml.WCharacterBase.vvK = 8463; com.wiris.util.xml.WCharacterBase.vwK = 8592; com.wiris.util.xml.WCharacterBase.vxK = 8593; com.wiris.util.xml.WCharacterBase.vyK = 8594; com.wiris.util.xml.WCharacterBase.vzK = 8595; com.wiris.util.xml.WCharacterBase.v0L = 8596; com.wiris.util.xml.WCharacterBase.v1L = 8597; com.wiris.util.xml.WCharacterBase.v2L = 8612; com.wiris.util.xml.WCharacterBase.v3L = 8614; com.wiris.util.xml.WCharacterBase.v4L = 8617; com.wiris.util.xml.WCharacterBase.v5L = 8618; com.wiris.util.xml.WCharacterBase.v6L = 8636; com.wiris.util.xml.WCharacterBase.v7L = 8640; com.wiris.util.xml.WCharacterBase.v8L = 8656; com.wiris.util.xml.WCharacterBase.v9L = 8658; com.wiris.util.xml.WCharacterBase.vAL = 8660; com.wiris.util.xml.WCharacterBase.vBL = 8646; com.wiris.util.xml.WCharacterBase.vCL = 8644; com.wiris.util.xml.WCharacterBase.vDL = 8651; com.wiris.util.xml.WCharacterBase.vEL = 8652; com.wiris.util.xml.WCharacterBase.vFL = 10562; com.wiris.util.xml.WCharacterBase.vGL = 10564; com.wiris.util.xml.WCharacterBase.vHL = 10230; com.wiris.util.xml.WCharacterBase.vIL = 10229; com.wiris.util.xml.WCharacterBase.vJL = 10231; com.wiris.util.xml.WCharacterBase.vKL = 10232; com.wiris.util.xml.WCharacterBase.vLL = 10233; com.wiris.util.xml.WCharacterBase.vML = 10234; com.wiris.util.xml.WCharacterBase.vNL = 8747; com.wiris.util.xml.WCharacterBase.vOL = 8992; com.wiris.util.xml.WCharacterBase.vPL = 8993; com.wiris.util.xml.WCharacterBase.vQL = 9134; com.wiris.util.xml.WCharacterBase.vRL = 9168; com.wiris.util.xml.WCharacterBase.vSL = 8764; com.wiris.util.xml.WCharacterBase.vTL = 8968; com.wiris.util.xml.WCharacterBase.vUL = 8969; com.wiris.util.xml.WCharacterBase.vVL = 8970; com.wiris.util.xml.WCharacterBase.vWL = 8971; com.wiris.util.xml.WCharacterBase.vXL = 9180; com.wiris.util.xml.WCharacterBase.vYL = 9181; com.wiris.util.xml.WCharacterBase.vZL = 9140; com.wiris.util.xml.WCharacterBase.vaL = 9141; com.wiris.util.xml.WCharacterBase.vbL = 9182; com.wiris.util.xml.WCharacterBase.vcL = 9183; com.wiris.util.xml.WCharacterBase.vdL = 10216; com.wiris.util.xml.WCharacterBase.veL = 10217; com.wiris.util.xml.WCharacterBase.vfL = 8517; com.wiris.util.xml.WCharacterBase.vgL = 8518; com.wiris.util.xml.WCharacterBase.vhL = 8519; com.wiris.util.xml.WCharacterBase.viL = 8520; com.wiris.util.xml.WCharacterBase.vjL = 949; com.wiris.util.xml.WCharacterBase.vkL = 1013; com.wiris.util.xml.WCharacterBase.vCI = 48; com.wiris.util.xml.WCharacterBase.vDI = 57; com.wiris.util.xml.WCharacterBase.v6I = 65; com.wiris.util.xml.WCharacterBase.v7I = 90; com.wiris.util.xml.WCharacterBase.v9I = 97; com.wiris.util.xml.WCharacterBase.vAI = 122; com.wiris.util.xml.WCharacterBase.vGI = 119964; com.wiris.util.xml.WCharacterBase.vHI = 119990; com.wiris.util.xml.WCharacterBase.vJI = 120068; com.wiris.util.xml.WCharacterBase.vKI = 120094; com.wiris.util.xml.WCharacterBase.v8I = 120120; com.wiris.util.xml.WCharacterBase.vBI = 120146; com.wiris.util.xml.WCharacterBase.vEI = 120792; com.wiris.util.xml.WCharacterBase.vlL = 183; com.wiris.util.xml.WCharacterBase.vmL = 729; com.wiris.util.xml.WCharacterBase.vnL = 1643; com.wiris.util.xml.WCharacterBase.voL = 1644; com.wiris.util.xml.WCharacterBase.vpL = [61, 8801, 8764, 8776, 8771, 8773, 8800, 8802, 8769, 62, 60, 8805, 8804, 10878, 10877, 10887, 10888, 8810, 8811, 8733, 8826, 8827, 8882, 8883]; com.wiris.util.xml.WCharacterBase.vlG = [43, 45, 47, 177, 183, 215, 247, 8226, 8722, 8723, 8724, 8726, 8727, 8728, 8743, 8744, 8745, 8746, 8760, 8768, 8846, 8851, 8852, 8853, 8854, 8855, 8856, 8857, 8858, 8859, 8861, 8862, 8863, 8864, 8865, 8890, 8891, 8900, 8901, 8902, 8903, 8905, 8906, 8907, 8908, 8910, 8911, 8914, 8915, 8966, 9021, 9675, 10678, 10789, 10794, 10797, 10798, 10799, 10804, 10805, 10812, 10815, 10835, 10836, 10837, 10838, 10846, 10847, 10851]; com.wiris.util.xml.WCharacterBase.vnG = [60, 61, 62, 8592, 8593, 8594, 8595, 8596, 8597, 8598, 8599, 8600, 8601, 8602, 8603, 8604, 8605, 8606, 8608, 8610, 8611, 8614, 8617, 8618, 8619, 8620, 8621, 8622, 8624, 8625, 8627, 8630, 8631, 8636, 8637, 8638, 8639, 8640, 8641, 8642, 8643, 8644, 8645, 8646, 8647, 8648, 8649, 8650, 8651, 8652, 8653, 8654, 8655, 8656, 8657, 8658, 8659, 8660, 8661, 8666, 8667, 8669, 8693, 8712, 8713, 8715, 8716, 8733, 8739, 8740, 8741, 8742, 8764, 8765, 8769, 8770, 8771, 8772, 8773, 8774, 8775, 8776, 8777, 8778, 8779, 8781, 8782, 8783, 8784, 8785, 8786, 8787, 8788, 8789, 8790, 8791, 8793, 8794, 8795, 8796, 8799, 8800, 8801, 8802, 8804, 8805, 8806, 8807, 8808, 8809, 8810, 8811, 8812, 8814, 8815, 8816, 8817, 8818, 8819, 8820, 8821, 8822, 8823, 8824, 8825, 8826, 8827, 8828, 8829, 8830, 8831, 8832, 8833, 8834, 8835, 8836, 8837, 8838, 8839, 8840, 8841, 8842, 8843, 8847, 8848, 8849, 8850, 8866, 8867, 8869, 8871, 8872, 8873, 8874, 8875, 8876, 8877, 8878, 8879, 8882, 8883, 8884, 8885, 8886, 8887, 8888, 8904, 8909, 8912, 8913, 8918, 8919, 8920, 8921, 8922, 8923, 8926, 8927, 8930, 8931, 8934, 8935, 8936, 8937, 8938, 8939, 8940, 8941, 8994, 8995, 9123, 10229, 10230, 10231, 10232, 10233, 10234, 10236, 10239, 10501, 10514, 10515, 10531, 10532, 10533, 10534, 10535, 10536, 10537, 10538, 10547, 10550, 10551, 10560, 10561, 10562, 10564, 10567, 10574, 10575, 10576, 10577, 10578, 10579, 10580, 10581, 10582, 10583, 10584, 10585, 10586, 10587, 10588, 10589, 10590, 10591, 10592, 10593, 10606, 10607, 10608, 10620, 10621, 10869, 10877, 10878, 10885, 10886, 10887, 10888, 10889, 10890, 10891, 10892, 10901, 10902, 10909, 10910, 10913, 10914, 10927, 10928, 10933, 10934, 10935, 10936, 10937, 10938, 10949, 10950, 10955, 10956, 10987, 11005]; com.wiris.util.xml.WCharacterBase.vhG = [8719, 8720, 8721, 8896, 8897, 8898, 8899, 10756, 10757, 10758, 10759, 10760]; com.wiris.util.xml.WCharacterBase.vjG = [8747, 8748, 8749, 8750, 8751, 8752, 8753, 8754, 8755, 10763, 10764, 10765, 10766, 10767, 10768, 10774, 10775, 10776, 10777, 10778, 10779, 10780]; com.wiris.util.xml.WCharacterBase.vjH = [98, 100, 102, 104, 105, 106, 107, 108, 116, 946, 948, 950, 952, 955, 958]; com.wiris.util.xml.WCharacterBase.vlH = [103, 106, 112, 113, 121, 946, 947, 950, 951, 956, 958, 961, 962, 966, 967, 968]; com.wiris.util.xml.WCharacterBase.vNH = [61, 8800, 8801, 8802, 8764, 8769, 8712, 8713, 8715, 8716, 8834, 8836, 8835, 8837, 8838, 8840, 8839, 8841, 62, 8815, 60, 8814, 8805, 8817, 8804, 8816, 10878, 8817, 10877, 8816, 8776, 8777, 8771, 8772, 8773, 8775, 8849, 8930, 8850, 8931, 8707, 8708, 8741, 8742]; com.wiris.util.xml.WCharacterBase.vJH = [40, 41, 41, 40, 60, 62, 62, 60, 91, 93, 93, 91, 123, 125, 125, 123, 171, 187, 187, 171, 3898, 3899, 3899, 3898, 3900, 3901, 3901, 3900, 5787, 5788, 5788, 5787, 8249, 8250, 8250, 8249, 8261, 8262, 8262, 8261, 8317, 8318, 8318, 8317, 8333, 8334, 8334, 8333, 8712, 8715, 8713, 8716, 8714, 8717, 8715, 8712, 8716, 8713, 8717, 8714, 8725, 10741, 8764, 8765, 8765, 8764, 8771, 8909, 8786, 8787, 8787, 8786, 8788, 8789, 8789, 8788, 8804, 8805, 8805, 8804, 8806, 8807, 8807, 8806, 8808, 8809, 8809, 8808, 8810, 8811, 8811, 8810, 8814, 8815, 8815, 8814, 8816, 8817, 8817, 8816, 8818, 8819, 8819, 8818, 8820, 8821, 8821, 8820, 8822, 8823, 8823, 8822, 8824, 8825, 8825, 8824, 8826, 8827, 8827, 8826, 8828, 8829, 8829, 8828, 8830, 8831, 8831, 8830, 8832, 8833, 8833, 8832, 8834, 8835, 8835, 8834, 8836, 8837, 8837, 8836, 8838, 8839, 8839, 8838, 8840, 8841, 8841, 8840, 8842, 8843, 8843, 8842, 8847, 8848, 8848, 8847, 8849, 8850, 8850, 8849, 8856, 10680, 8866, 8867, 8867, 8866, 8870, 10974, 8872, 10980, 8873, 10979, 8875, 10981, 8880, 8881, 8881, 8880, 8882, 8883, 8883, 8882, 8884, 8885, 8885, 8884, 8886, 8887, 8887, 8886, 8905, 8906, 8906, 8905, 8907, 8908, 8908, 8907, 8909, 8771, 8912, 8913, 8913, 8912, 8918, 8919, 8919, 8918, 8920, 8921, 8921, 8920, 8922, 8923, 8923, 8922, 8924, 8925, 8925, 8924, 8926, 8927, 8927, 8926, 8928, 8929, 8929, 8928, 8930, 8931, 8931, 8930, 8932, 8933, 8933, 8932, 8934, 8935, 8935, 8934, 8936, 8937, 8937, 8936, 8938, 8939, 8939, 8938, 8940, 8941, 8941, 8940, 8944, 8945, 8945, 8944, 8946, 8954, 8947, 8955, 8948, 8956, 8950, 8957, 8951, 8958, 8954, 8946, 8955, 8947, 8956, 8948, 8957, 8950, 8958, 8951, 8968, 8969, 8969, 8968, 8970, 8971, 8971, 8970, 9001, 9002, 9002, 9001, 10088, 10089, 10089, 10088, 10090, 10091, 10091, 10090, 10092, 10093, 10093, 10092, 10094, 10095, 10095, 10094, 10096, 10097, 10097, 10096, 10098, 10099, 10099, 10098, 10100, 10101, 10101, 10100, 10179, 10180, 10180, 10179, 10181, 10182, 10182, 10181, 10184, 10185, 10185, 10184, 10187, 10189, 10189, 10187, 10197, 10198, 10198, 10197, 10205, 10206, 10206, 10205, 10210, 10211, 10211, 10210, 10212, 10213, 10213, 10212, 10214, 10215, 10215, 10214, 10216, 10217, 10217, 10216, 10218, 10219, 10219, 10218, 10220, 10221, 10221, 10220, 10222, 10223, 10223, 10222, 10627, 10628, 10628, 10627, 10629, 10630, 10630, 10629, 10631, 10632, 10632, 10631, 10633, 10634, 10634, 10633, 10635, 10636, 10636, 10635, 10637, 10640, 10638, 10639, 10639, 10638, 10640, 10637, 10641, 10642, 10642, 10641, 10643, 10644, 10644, 10643, 10645, 10646, 10646, 10645, 10647, 10648, 10648, 10647, 10680, 8856, 10688, 10689, 10689, 10688, 10692, 10693, 10693, 10692, 10703, 10704, 10704, 10703, 10705, 10706, 10706, 10705, 10708, 10709, 10709, 10708, 10712, 10713, 10713, 10712, 10714, 10715, 10715, 10714, 10741, 8725, 10744, 10745, 10745, 10744, 10748, 10749, 10749, 10748, 10795, 10796, 10796, 10795, 10797, 10798, 10798, 10797, 10804, 10805, 10805, 10804, 10812, 10813, 10813, 10812, 10852, 10853, 10853, 10852, 10873, 10874, 10874, 10873, 10877, 10878, 10878, 10877, 10879, 10880, 10880, 10879, 10881, 10882, 10882, 10881, 10883, 10884, 10884, 10883, 10891, 10892, 10892, 10891, 10897, 10898, 10898, 10897, 10899, 10900, 10900, 10899, 10901, 10902, 10902, 10901, 10903, 10904, 10904, 10903, 10905, 10906, 10906, 10905, 10907, 10908, 10908, 10907, 10913, 10914, 10914, 10913, 10918, 10919, 10919, 10918, 10920, 10921, 10921, 10920, 10922, 10923, 10923, 10922, 10924, 10925, 10925, 10924, 10927, 10928, 10928, 10927, 10931, 10932, 10932, 10931, 10939, 10940, 10940, 10939, 10941, 10942, 10942, 10941, 10943, 10944, 10944, 10943, 10945, 10946, 10946, 10945, 10947, 10948, 10948, 10947, 10949, 10950, 10950, 10949, 10957, 10958, 10958, 10957, 10959, 10960, 10960, 10959, 10961, 10962, 10962, 10961, 10963, 10964, 10964, 10963, 10965, 10966, 10966, 10965, 10974, 8870, 10979, 8873, 10980, 8872, 10981, 8875, 10988, 10989, 10989, 10988, 10999, 11000, 11000, 10999, 11001, 11002, 11002, 11001, 11778, 11779, 11779, 11778, 11780, 11781, 11781, 11780, 11785, 11786, 11786, 11785, 11788, 11789, 11789, 11788, 11804, 11805, 11805, 11804, 11808, 11809, 11809, 11808, 11810, 11811, 11811, 11810, 11812, 11813, 11813, 11812, 11814, 11815, 11815, 11814, 11816, 11817, 11817, 11816, 12296, 12297, 12297, 12296, 12298, 12299, 12299, 12298, 12300, 12301, 12301, 12300, 12302, 12303, 12303, 12302, 12304, 12305, 12305, 12304, 12308, 12309, 12309, 12308, 12310, 12311, 12311, 12310, 12312, 12313, 12313, 12312, 12314, 12315, 12315, 12314, 65113, 65114, 65114, 65113, 65115, 65116, 65116, 65115, 65117, 65118, 65118, 65117, 65124, 65125, 65125, 65124, 65288, 65289, 65289, 65288, 65308, 65310, 65310, 65308, 65339, 65341, 65341, 65339, 65371, 65373, 65373, 65371, 65375, 65376, 65376, 65375, 65378, 65379, 65379, 65378, 9115, 9118, 9116, 9119, 9117, 9120, 9118, 9115, 9119, 9116, 9120, 9117, 9121, 9124, 9122, 9125, 9123, 9126, 9124, 9121, 9125, 9122, 9126, 9123, 9127, 9131, 9130, 9134, 9129, 9133, 9131, 9127, 9134, 9130, 9133, 9129, 9128, 9132, 9132, 9128]; com.wiris.util.xml.WCharacterBase.vrH = [178, 50, 179, 51, 185, 49, 8304, 48, 8305, 105, 8308, 52, 8309, 53, 8310, 54, 8311, 55, 8312, 56, 8313, 57, 8314, 43, 8315, 45, 8316, 61, 8317, 40, 8318, 41, 8319, 110, 8320, 48, 8321, 49, 8322, 50, 8323, 51, 8324, 52, 8325, 53, 8326, 54, 8327, 55, 8328, 56, 8329, 57, 8330, 43, 8331, 45, 8332, 61, 8333, 40, 8334, 41, 8336, 97, 8337, 101, 8338, 111, 8339, 120, 8340, 601, 8341, 104, 8342, 107, 8343, 108, 8344, 109, 8345, 110, 8346, 112, 8347, 115, 8348, 116]; com.wiris.util.xml.WCharacterBase.vrG = null; com.wiris.util.xml.WCharacterBase.vLH = [com.wiris.util.xml.WCharacterBase.vwK, com.wiris.util.xml.WCharacterBase.vyK, com.wiris.util.xml.WCharacterBase.v0L, com.wiris.util.xml.WCharacterBase.v2L, com.wiris.util.xml.WCharacterBase.v3L, com.wiris.util.xml.WCharacterBase.v4L, com.wiris.util.xml.WCharacterBase.v5L, com.wiris.util.xml.WCharacterBase.v6L, com.wiris.util.xml.WCharacterBase.v7L, com.wiris.util.xml.WCharacterBase.v8L, com.wiris.util.xml.WCharacterBase.v9L, com.wiris.util.xml.WCharacterBase.vbL, com.wiris.util.xml.WCharacterBase.vcL, com.wiris.util.xml.WCharacterBase.vXL, com.wiris.util.xml.WCharacterBase.vYL, com.wiris.util.xml.WCharacterBase.vZL, com.wiris.util.xml.WCharacterBase.vaL, com.wiris.util.xml.WCharacterBase.vBL, com.wiris.util.xml.WCharacterBase.vCL, com.wiris.util.xml.WCharacterBase.vDL, com.wiris.util.xml.WCharacterBase.vEL, com.wiris.util.xml.WCharacterBase.v7K]; com.wiris.util.xml.WCharacterBase.v2I = [com.wiris.util.xml.WCharacterBase.vBL, com.wiris.util.xml.WCharacterBase.vCL, com.wiris.util.xml.WCharacterBase.vDL, com.wiris.util.xml.WCharacterBase.vEL]; com.wiris.util.xml.WCharacterBase.vvG = "P"; com.wiris.util.xml.WCharacterBase.v0H = "C"; com.wiris.util.xml.WCharacterBase.vwG = "L"; com.wiris.util.xml.WCharacterBase.vxG = "M"; com.wiris.util.xml.WCharacterBase.vyG = "N"; com.wiris.util.xml.WCharacterBase.vuG = "S"; com.wiris.util.xml.WCharacterBase.vzG = "F"; com.wiris.util.xml.WCharacterBase.v4H = "@P:21-23,25-2A,2C-2F,3A-3B,3F-40,5B-5D,5F,7B,7D,A1,A7,AB,B6-B7,BB,BF,37E,387,55A-55F,589-58A,5BE,5C0,5C3,5C6,5F3-5F4,609-60A,60C-60D,61B,61E-61F,66A-66D,6D4,E4F,E5A-E5B,2010-2022,2025-2026,2030-203E,2040,2043,2047,204E-2051,2057,205E,2308-230B,2329-232A,2772-2773,27C5-27C6,27E6-27EF,2983-2998,29D8-29DB,29FC-29FD,2E17,3030,FD3E-FD3F@C:AD,600-603,6DD,200B-200F,202A-202E,206A-206F@L:41-5A,61-7A,AA,B5,BA,C0-D6,D8-F6,F8-2C1,2C6-2D1,2E0-2E4,2EC,2EE,370-374,376-377,37A-37D,386,388-38A,38C,38E-3A1,3A3-3F5,3F7-481,48A-527,531-556,559,561-587,5D0-5EA,5F0-5F2,620-64A,66E-66F,671-6D3,6D5,6E5-6E6,6EE-6EF,6FA-6FC,6FF,750-77F,E01-E30,E32-E33,E40-E46,1D00-1DBF,1E00-1F15,1F18-1F1D,1F20-1F45,1F48-1F4D,1F50-1F57,1F59,1F5B,1F5D,1F5F-1F7D,1F80-1FB4,1FB6-1FBC,1FBE,1FC2-1FC4,1FC6-1FCC,1FD0-1FD3,1FD6-1FDB,1FE0-1FEC,1FF2-1FF4,1FF6-1FFC,207F,2090-2094,2102,2107,210A-2113,2115,2119-211D,2124,2126,2128,212B-212D,212F-2138,213C-213F,2145-2149,214E,2184,2C60-2C7F,306E,A717-A71F,A727,A788,A78B-A78C,A792,FB00-FB04,FB13-FB17,FB1D,FB1F-FB28,FB2A-FB36,FB38-FB3C,FB3E,FB40-FB41,FB43-FB44,FB46-FBB1,FBD3-FBE9,FBFC-FBFF,FC5E-FC63,FC6A,FC6D,FC70,FC73,FC91,FC94,FDF2,FE70-FE74,FE76-FEFC,1D400-1D454,1D456-1D49C,1D49E-1D49F,1D4A2,1D4A5-1D4A6,1D4A9-1D4AC,1D4AE-1D4B9,1D4BB,1D4BD-1D4C3,1D4C5-1D505,1D507-1D50A,1D50D-1D514,1D516-1D51C,1D51E-1D539,1D53B-1D53E,1D540-1D544,1D546,1D54A-1D550,1D552-1D6A5,1D6A8-1D6C0,1D6C2-1D6DA,1D6DC-1D6FA,1D6FC-1D714,1D716-1D734,1D736-1D74E,1D750-1D76E,1D770-1D788,1D78A-1D7A8,1D7AA-1D7C2,1D7C4-1D7C9@M:300-36F,483-489,591-5BD,5BF,5C1-5C2,5C4-5C5,5C7,610-61A,64B-65F,670,6D6-6DC,6DF-6E4,6E7-6E8,6EA-6ED,E31,E34-E3A,E47-E4E,1DC0-1DC1,1DC3,1DCA,1DFE-1DFF,20D0-20D2,20D6-20D7,20DB-20DF,20E1,20E4-20F0,FB1E,FE20-FE23@N:30-39,B2-B3,B9,BC-BE,660-669,6F0-6F9,E50-E59,2070,2074-2079,2080-2089,2153-215E,2460-2468,24EA,2780-2793,1D7CE-1D7FF@S:24,2B,3C-3E,5E,60,7C,7E,A2-A6,A8-A9,AC,AE-B1,B4,B8,D7,F7,2C2-2C5,2D2-2DF,2E5-2EB,2ED,2EF-2FF,375,384-385,3F6,482,58F,606-608,60B,60E-60F,6DE,6E9,6FD-6FE,E3F,1FBD,1FBF-1FC1,1FCD-1FCF,1FDD-1FDF,1FED-1FEF,1FFD-1FFE,2044,2052,20A0-20BA,2105,2116-2118,211E,2120,2122,2125,2127,2129,212E,2140-2144,214A-214B,214D,2190-21EA,21F4-2300,2302,2305-2306,230C-2313,2315-231A,231C-2323,232C-232E,2332,2336,233D,233F-2340,2353,2370,237C,2393-2394,23AF,23B4-23B6,23CE,23D0,23DC-23E7,2423,24B6-24E9,2500,2502,2506,2508,250A,250C,2510,2514,2518,251C,2524,252C,2534,253C,2550-256C,2571-2572,2580,2584,2588,258C,2590-2593,25A0-25FF,2605-2606,2609,260C,260E,2612,2621,2639-2644,2646-2649,2660-2667,2669-266B,266D-266F,267E,2680-2689,26A0,26A5,26AA-26AC,26B2,26E2,2702,2709,2713,2720,272A,2736,273D,279B,27C0-27C4,27C7-27C9,27CB-27CD,27D0-27E5,27F0-27FF,2900-2982,2999-29D7,29DC-29FB,29FE-2AFF,2B12-2B4C,2B50-2B54,3012,A720-A721,A789-A78A,FB29,FBB2-FBC1,FDFC,FFFC-FFFD,1D6C1,1D6DB,1D6FB,1D715,1D735,1D74F,1D76F,1D789,1D7A9,1D7C3@F:70,62,74,64,288,256,63,25F,6B,261,71,262,294,6D,271,6E,273,272,14B,274,72,280,27E,27D,278,3B2,66,76,3B8,F0,73,7A,283,292,282,290,E7,29D,78,263,3C7,281,127,295,68,266,26C,26E,28B,279,27B,6A,270,6C,26D,28E,29F,1A5,253,1AD,257,188,284,199,260,2A0,29B,28D,77,265,29C,2A1-2A2,267,298,1C0,1C3,1C2,1C1,27A,255,291,2C71,287,297,296,286,293,27C,2E2,1AB,26B,67,2A6,2A3,2A7,2A4,2A8,2A5,1DBF,1D4A,1D91,1BB,29E,2E3,19E,19B,3BB,17E,161,1F0,10D,69,65,25B,61,251,254,6F,75,79,F8,153,276,252,28C,264,26F,268,289,26A,28F,28A,259,275,250,E6,25C,25A,131,25E,29A,258,277,269,2BC,325,30A,32C,2B0,324,330,33C,32A,33A-33B,339,31C,31F-320,308,33D,318-319,2DE,2B7,2B2,2E0,2E4,303,207F,2E1,31A,334,31D,2D4,31E,2D5,329,32F,361,35C,322,2F9,2C,2BB,307,2D7,2D6,2B8,323,321,32B,2C8,2CC,2D0-2D1,306,2E,7C,2016,203F,2197-2198,30B,301,304,300,30F,A71B-A71C,2E5-2E9,30C,302,1DC4-1DC5,1DC8,311,2C7,2C6,316,2CE,317,2CF,2AD,2A9-2AB,274D,2A,56,46,57,43,4C,4A,152,398,1D191,1D18F,31-33,346,34D,34A-34C,348-349,5C,34E,2193,2191,2EC,1DB9,362,347,2B6,2ED,2F1-2F2,2F7,41-42,44-45,47-49,4B,4D-55,58-5B,5D,2F,28-29,7B,7D@"; com.wiris.util.xml.WCharacterBase.vtH = [8289, 8290, 8291]; com.wiris.util.xml.WCharacterBase.vvH = [175, 818, 8592, 8594, 8596, 8612, 8614, 8617, 8618, 8636, 8637, 8640, 8641, 8644, 8646, 8651, 8652, 8656, 8658, 8660, 8764, 9140, 9141, 9180, 9181, 9182, 9183, 9552, 10562, 10564, 10602, 10605, 57345, 57346]; com.wiris.util.xml.WCharacterBase.vxH = "@0065@0066@0067@0068@0069@0070@0071@0072@0073@0074@0075@0076@0077@0078@0079@0080@0081@0082@0083@0084@0085@0086@0087@0088@0089@0090" + "@0097@0098@0099@0100@0101@0102@0103@0104@0105@0106@0107@0108@0109@0110@0111@0112@0113@0114@0115@0116@0117@0118@0119@0120@0121@0122@"; com.wiris.util.xml.WCharacterBase.vyH = "@0913@0914@0935@0916@0917@0934@0915@0919@0921@0977@0922@0923@0924@0925@0927@0928@0920@0929@0931@0932@0933@0962@0937@0926@0936@0918" + "@0945@0946@0967@0948@0949@0966@0947@0951@0953@0966@0954@0955@0956@0957@0959@0960@0952@0961@0963@0964@0965@0982@0969@0958@0968@0950@"; haxe.Unserializer.DEFAULT_RESOLVER = Type; haxe.Unserializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:"; haxe.Unserializer.CODES = null; js.Lib.onerror = null; com.wiris.js.JsHand.bypassEncapsulation(); })(); delete Array.prototype.__class__;